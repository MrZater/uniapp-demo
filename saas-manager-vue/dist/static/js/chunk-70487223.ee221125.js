(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70487223"],{"3b83":function(e,t,a){},"423c":function(e,t,a){"use strict";a("da59")},"4e82":function(e,t,a){"use strict";var s=a("23e7"),r=a("1c0b"),o=a("7b0b"),i=a("d039"),l=a("a640"),n=[],c=n.sort,u=i((function(){n.sort(void 0)})),p=i((function(){n.sort(null)})),d=l("sort"),m=u||!p||!d;s({target:"Array",proto:!0,forced:m},{sort:function(e){return void 0===e?c.call(o(this)):c.call(o(this),r(e))}})},"5c25":function(e,t,a){e.exports=a.p+"static/img/no-data.5dbb23e5.png"},"7db0":function(e,t,a){"use strict";var s=a("23e7"),r=a("b727").find,o=a("44d2"),i=a("ae40"),l="find",n=!0,c=i(l);l in[]&&Array(1)[l]((function(){n=!1})),s({target:"Array",proto:!0,forced:n||!c},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o(l)},"7f46":function(e,t,a){"use strict";function s(e){var t=document.createElement("textarea");t.value=e,t.readOnly="readOnly",document.body.appendChild(t),t.select(),t.setSelectionRange(0,e.length);var a=document.execCommand("Copy");return t.remove(),a}a.d(t,"a",(function(){return s}))},ce4b:function(e,t,a){"use strict";a.r(t);var s,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"aggregate-container"},[e.vueType?a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container search"},[a("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"16rem"},attrs:{clearable:!1,type:"daterange","value-format":"yyyy-MM-dd",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.getSTime},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("CustSelectOne",{staticClass:"filter-item",staticStyle:{display:"inline-block",width:"12rem","margin-left":"8px","margin-right":"5px"},attrs:{model:e.query.appId,"all-data":e.appOptions,width:190,word:"应用","search-by-id":!0},on:{handleSelect:e.handleSelectApp}}),a("CustSelectOne",{staticClass:"filter-item",staticStyle:{display:"inline-block",width:"12rem","margin-left":"5px","margin-right":"5px"},attrs:{model:e.query.placeId,"all-data":e.placeOptions,"search-by-id":"",width:190,word:"广告位"},on:{handleSelect:e.handleSelectPlace}}),e.config&&e.placeOptions.length>0?[a("CustSelectOne",{staticClass:"filter-item",staticStyle:{display:"inline-block",width:"12rem","margin-left":"5px","margin-right":"5px"},attrs:{model:e.query.groupId,"all-data":e.config.groups,width:190,word:"流量分组"},on:{handleSelect:e.handleSelectGroup}})]:e._e(),"default"!==e.group.id&&"默认分组"!==e.group.name&&""!==e.group.id&&e.placeOptions.length>0?a("span",{staticClass:"filter-item ruletextbtn",on:{click:function(t){e.showRuleText=!e.showRuleText}}},[e._v("规则"),a("i",{staticClass:"el-icon-arrow-down"})]):e._e()," "!=e.query.placeId?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item height",staticStyle:{position:"absolute",right:"30px"},attrs:{type:"primary",icon:"el-icon-setting",size:"small"},on:{click:e.handleAggregateSetting}},[e._v(" 流量分组 ")]):e._e(),e.group.id&&e.group.abTests&&e.group.abTests.length<=1?a("el-button",{staticClass:"filter-item",staticStyle:{position:"absolute",right:"160px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleClickAdd}},[e._v(" A/B测试 ")]):e._e(),e.showRuleText&&"default"!==e.group.id&&"默认分组"!==e.group.name&&""!==e.group.id&&e.placeOptions.length>0?a("div",{staticClass:"filter-item ruletext"},[a("el-row",{staticClass:"tabsStyle",attrs:{lg:20}},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"ruleSpan"},[e._v("规则:"+e._s(e.groupRuleStr))])])],1)],1):e._e()],2)," "!=e.query.placeId?a("div",{staticClass:"body-container"},[e.abTestList.length>1?a("div",{staticClass:"testgroups"},[a("div",[a("el-radio-group",{on:{change:e.changeabtest},model:{value:e.query.testId,callback:function(t){e.$set(e.query,"testId",t)},expression:"query.testId"}},[e._l(e.abTestList,(function(t,s){return[e.abTestList.length>1?a("el-radio-button",{key:s,attrs:{label:t.testId}},[e._v(" "+e._s(t.groupName)+" "),0==t.type?a("span",[e._v(e._s(t.proportion)+"%")]):e._e(),1==t.type?a("span",[e._v(e._s(e.getProportion(t)+"%"))]):e._e()]):e._e()]}))],2),a("el-dropdown",{attrs:{placement:"right",trigger:"click"}},[a("span",[e.abTestList.length>1?a("i",{staticClass:"el-icon-setting setting"}):e._e()]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticStyle:{width:"120%",height:"30px"},on:{click:e.editABTest}},[e._v(" 编辑 ")])]),a("el-dropdown-item",[a("div",{staticStyle:{width:"120%",height:"30px"},on:{click:e.linkToABData}},[e._v(" A/B测试数据 ")])]),a("el-dropdown-item",[a("div",{staticStyle:{width:"120%",height:"30px"},on:{click:e.endABTest}},[e._v(" 结束测试 ")])])],1)],1)],1)]):e._e(),a("div",{staticClass:"filter-container-operate"},[a("div",{staticClass:"left"},[a("el-dropdown",{staticClass:"item",attrs:{trigger:"click",size:"small","split-button":"",type:"primary"},on:{click:e.handleAdd}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-plus"}),e._v("代码位 ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("span",{staticClass:"dropdown_item",on:{click:e.handleAdd}},[a("i",{staticClass:"el-icon-plus"}),e._v("单个添加")])]),a("el-dropdown-item",[a("span",{staticClass:"dropdown_item",on:{click:e.handleBatchAdd}},[a("i",{staticClass:"el-icon-circle-plus"}),e._v("批量添加")])]),a("el-dropdown-item",[a("span",{staticClass:"dropdown_item",on:{click:e.handleBatchExport}},[a("i",{staticClass:"el-icon-folder-add"}),e._v("批量导入")])])],1)],1),a("el-button",{staticClass:"pinterest item",attrs:{size:"mini",icon:"el-icon-setting"},on:{click:e.handleSettingArgs}},[e._v(" 瀑布流属性配置 ")]),a("el-button",{staticClass:"item",attrs:{disabled:0==e.selectTableColumn.length,type:"warning ",size:"small"},on:{click:e.handleEditSts}},[e._v(" 批量修改状态 ")]),a("batchCopyConfig",{attrs:{"test-id":e.query.testId,"group-id":e.query.groupId,"select-data":e.selectTableColumn,groups:e.config?e.config.groups:[]}})],1),a("div",{staticClass:"right"},[a("CustTag",{staticClass:"item",attrs:{"far-target-arr":e.targetArr,"storage-name":e.storageName,"box-height":600},on:{handelConfirmDialog:e.handelConfirmDialog}}),a("el-button",{staticClass:"item",attrs:{disabled:!e.allowDownload,type:"primary",loading:e.downloading,size:"mini"},on:{click:e.downloadReport}},[e._v(" 导出报表 ")])],1)]),a("div",{staticClass:"chooseBox"},[a("el-checkbox",{attrs:{disabled:0==e.Alen},on:{change:function(t){return e.handleChooseA(t,"A")}},model:{value:e.chooseAllA,callback:function(t){e.chooseAllA=t},expression:"chooseAllA"}},[a("span",{staticClass:"chooseItem"},[e._v("全部已开启")])]),a("el-checkbox",{attrs:{disabled:0==e.Slen},on:{change:function(t){return e.handleChooseA(t,"S")}},model:{value:e.chooseAllS,callback:function(t){e.chooseAllS=t},expression:"chooseAllS"}},[a("span",{staticClass:"chooseItem"},[e._v("全部已关闭")])])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,ref:"tableref",staticClass:"aggregatetable",attrs:{"header-cell-style":{"background-color":"#f7f8fa",color:"#000"},"span-method":e.arraySpanMethod,data:e.listTemp,"empty-text":"-",fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",selectable:e.handleSelectable,fixed:""}}),a("el-table-column",{attrs:{label:"优先级",fixed:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return["selectSource"===s.type?a("span",[e._v(e._s(s.index+1))]):"all"===s.type?a("span",[e._v("汇总")]):"unSelectSource"===s.type?a("span",[e._v("-")]):"settle"===s.type?a("span",[a("svg-icon",{staticStyle:{color:"#f40"},attrs:{"icon-class":"bidding"}})],1):"closebottom"===s.type||"openbottom"===s.type?a("span",[a("el-popover",{attrs:{placement:"top",title:"",width:"150",trigger:"hover",content:"兜底代码位"}},[a("svg-icon",{staticStyle:{color:"#f40","font-size":"16px"},attrs:{slot:"reference","icon-class":"bottom"},slot:"reference"})],1)],1):a("span",{staticClass:"expandbox",staticStyle:{display:"inline-block",width:"100%"}},[e._v(e._s(s.text)+" "),a("el-button",{staticClass:"expand",staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{click:function(t){return e.expandTable(s)}}},[e._v(e._s(e.expand?"折叠":"展开")+" "),a("i",{class:e.expand?"el-icon-arrow-up el-icon--right":"el-icon-arrow-down el-icon--right"})])],1)]}}],null,!1,1611578982)}),a("el-table-column",{attrs:{label:"广告源",fixed:"",prop:"name",width:"120",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("div",[e._l(e.PlatOptions,(function(t){return[s.platId==t.id?a("span",{key:t.id},[e._v(e._s(t.name))]):e._e()]}))],2)]}}],null,!1,3515620748)}),a("el-table-column",{attrs:{label:"代码位",width:"200px",fixed:"",prop:"name",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return["1"==s.isAutoSorting?a("el-tooltip",{attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s("已开启“自动价格”")+" ")]),a("span",{staticStyle:{"margin-right":"5px"}},[a("svg-icon",{staticClass:"svgicon",staticStyle:{color:"#f40","font-size":"18px"},attrs:{"icon-class":"bid"}})],1)]):e._e(),a("span",[e._v(e._s(s.name))])]}}],null,!1,596305266)}),a("el-table-column",{attrs:{label:"操作",fixed:"",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return["selectSource"!==s.type&&"unSelectSource"!==s.type&&"settle"!==s.type&&"closebottom"!==s.type&&"openbottom"!==s.type||!e.allowOperate?e._e():a("div",{staticClass:"doicon",on:{click:function(t){return e.handleUpdate(s)}}},[a("svg-icon",{staticClass:"svgicon",staticStyle:{color:"#3685df"},attrs:{"icon-class":"edit"}})],1),"selectSource"!==s.type&&"unSelectSource"!==s.type&&"settle"!==s.type&&"closebottom"!==s.type&&"openbottom"!==s.type||!e.allowOperate?e._e():a("el-dropdown",{staticClass:"right-menu-item hover-effect",attrs:{placement:"right",trigger:"click"}},[a("span",{staticStyle:{cursor:"pointer"}},[a("svg-icon",{staticStyle:{"fon-size":"20px",color:"#000","font-weight":"600","margin-left":"5px"},attrs:{"icon-class":"omit"}})],1),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"doicon",on:{click:function(t){return e.Advanced(s)}}},[a("svg-icon",{staticClass:"svgicon",staticStyle:{color:"#1890ff","margin-right":"10px","font-size":"14px"},attrs:{"icon-class":"gear"}}),e._v("频次控制 ")],1)]),a("el-dropdown-item",[a("div",{staticClass:"doicon",on:{click:function(t){return e.handleUpdateSourceSts(s,"A"==s.sts?"S":"A")}}},[a("svg-icon",{staticClass:"svgicon",staticStyle:{"margin-right":"10px","font-size":"14px"},style:{color:"A"==s.sts?"#13CE66":"red"},attrs:{"icon-class":"swith"}}),e._v(e._s("A"==s.sts?"关闭":"开启")+" ")],1)]),a("el-dropdown-item",[a("div",{staticClass:"doicon",on:{click:function(t){return e.Adver(s)}}},[a("svg-icon",{staticClass:"svgicon",staticStyle:{color:"red","margin-right":"10px","font-size":"14px"},attrs:{"icon-class":"delete"}}),e._v("删除 ")],1)])],1)],1)]}}],null,!1,539789095)}),a("el-table-column",{staticClass:"table_money",attrs:{width:"100",label:"价格",fixed:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return["selectSource"===s.type||"openbottom"===s.type?a("div",{staticClass:"editmoney",staticStyle:{height:"27px"}},[s.edit?[a("el-dropdown",{attrs:{placement:"right"}},[a("el-input",{staticStyle:{width:"80px"},attrs:{size:"mini"},on:{mouseleave:function(e){s.edit=!1}},model:{value:s.bidfloor,callback:function(t){e.$set(s,"bidfloor","string"===typeof t?t.trim():t)},expression:"row.bidfloor"}},[a("span",{staticStyle:{position:"absolute",top:"-3px","line-height":"40px"},attrs:{slot:"prefix"},slot:"prefix"},[e._v("￥")])]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[s.edit?a("span",{on:{click:function(t){return t.target!==t.currentTarget?null:e.confirmEdit(s)}}},[e._v("保存")]):e._e()]),a("el-dropdown-item",[s.edit?a("span",{on:{click:function(t){return e.cancelEdit(s)}}},[e._v("取消")]):e._e()])],1)],1)]:[a("span",[e._v("￥"+e._s(s.bidfloor))]),a("i",{staticClass:"el-icon-edit editIcon",on:{click:function(e){s.edit=!0}}})]],2):e._e(),"unSelectSource"===s.type||"closebottom"===s.type?a("div",{staticClass:"money"},[a("span",[e._v("￥")]),a("span",[e._v(e._s(s.bidfloor))])]):e._e(),"settle"===s.type?a("div",{staticStyle:{color:"#1890ff"}},[e._v(" 竞价 ")]):e._e(),"all"==s.type?a("div",[e._v(" ￥"+e._s(s.placePrice)+" ")]):e._e()]}}],null,!1,2458239692)}),e._l(e.sureArr,(function(t,s){return[a("el-table-column",{key:s,attrs:{prop:t.prop,label:t.label,align:t.align,width:t.width,"render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(s){var r=s.row;return["advRequestFilledRate"!=t.prop&&"impressRate"!=t.prop&&"clickRate"!=t.prop&&"unitFilledRate"!=t.prop&&"unitCtr"!=t.prop&&"clickGap"!=t.prop&&"impressionGap"!=t.prop&&"askPriceFilledRate"!=t.prop&&"display"!=t.prop&&"revenuePercentage"!=t.prop&&"impressRequestRate"!=t.prop&&"bidSuccessRate"!=t.prop||!r[t.prop]&&0!=r[t.prop]?"advResponseTime"!=t.prop||!r[t.prop]&&0!=r[t.prop]?a("div",[e._v(" "+e._s(r[t.prop])+" ")]):a("div",[e._v(" "+e._s(r[t.prop]+"s")+" ")]):a("div",[e._v(" "+e._s(r[t.prop]||0==r[t.prop]?r[t.prop]+"%":"-")+" ")])]}}],null,!0)})]}))],2)],1):a("Empty",{staticClass:"empty"}),e.dialogSourceVisible?a("el-dialog",{ref:"dialog",attrs:{title:0!==e.dialogSourceType||e.isAdvanced?1!==e.dialogSourceType||e.isAdvanced?e.isAdvanced?"频次控制":"":"编辑代码位":"新增代码位",visible:e.dialogSourceVisible,"destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogSourceVisible=t},close:e.closeSourceDialog}},[a("el-form",{ref:"form",staticClass:"addSourceForm",attrs:{model:e.temp,rules:e.rules,"label-width":"150px","label-position":"right"}},[e.isAdvanced?e._e():a("div",{staticClass:"edit_form_item"},[a("div",{staticStyle:{width:"800px","margin-bottom":"40px"}},[a("el-row",[a("el-col",{attrs:{lg:1}},[a("el-image",{staticStyle:{width:"40px",height:"40px","border-radius":"10px"},attrs:{fit:"fill",src:e.iconUrl?this.$store.getters.resourceUrl+e.iconUrl:"/images/app-none.png"}})],1),a("el-col",{staticStyle:{"margin-left":"20px"},attrs:{lg:6}},[a("div",{staticClass:"app"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",[e._v(e._s(e.appName))])]),a("div",[a("span",[e._v("ID:"+e._s(e.query.appId))])])])]),a("el-col",{attrs:{lg:6}},[a("div",{staticClass:"ad"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",[e._v(e._s(e.placeName))])]),a("div",[a("span",[e._v("ID:"+e._s(e.query.placeId))])])])]),a("el-col",{attrs:{lg:5}},[a("div",{staticClass:"ad"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",[e._v("广告样式")])]),a("div",[a("span",[e._v(e._s(e.getPosition(e.temp.position)))])])])]),a("el-col",{attrs:{lg:5}},[a("div",{staticClass:"ad"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",[e._v("流量分组")])]),a("div",[a("span",[e._v(e._s(e.group.name))])])])])],1)],1),a("el-form-item",{attrs:{label:"广告源"}},[a("AppPlatform",{attrs:{"is-batch":!1,"app-id":e.appId,"linked-show":!1,active:e.active,disabled:1===e.dialogSourceType,"is-edit":e.isEdit},on:{selectPlatId:e.selectPlatId,getplatrow:e.getplatrow,platAppId:e.getPlatAppId,accessType:e.getAccessType,settleType:e.getSettleType,id:e.getId}})],1),1==e.accessType?a("el-form-item",{attrs:{label:"账户",prop:"platAccountId"}},[a("el-select",{model:{value:e.temp.platAccountId,callback:function(t){e.$set(e.temp,"platAccountId",t)},expression:"temp.platAccountId"}},e._l(e.accounts,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e.temp.platId?a("span",[e._v("创建"),a("span",{staticClass:"text-a",staticStyle:{color:"#338aff",cursor:"pointer"},on:{click:e.showNewAccount}},[e._v("新账户")])]):e._e()],1):e._e(),e.accessType&&2!=e.accessType?a("el-form-item",{attrs:{label:"AppId",prop:1==e.accessType?"":"platAppId"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.temp.platAppId,callback:function(t){e.$set(e.temp,"platAppId","string"===typeof t?t.trim():t)},expression:"temp.platAppId"}})],1):e._e(),7==e.temp.platId||11==e.temp.platId?a("el-form-item",{attrs:{label:"AppKey",prop:"appKey"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.temp.appKey,callback:function(t){e.$set(e.temp,"appKey","string"===typeof t?t.trim():t)},expression:"temp.appKey"}})],1):e._e(),e.showSlotId?a("el-form-item",{attrs:{label:"广告版位ID",prop:"slotId"}},[a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"请输入广告版位ID"},model:{value:e.temp.slotId,callback:function(t){e.$set(e.temp,"slotId","string"===typeof t?t.trim():t)},expression:"temp.slotId"}})],1):e._e(),a("el-form-item",{attrs:{label:"代码位名称",prop:"name"}},[a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"请输入代码位名称"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name","string"===typeof t?t.trim():t)},expression:"temp.name"}})],1),e.accessType&&2!=e.accessType?a("el-form-item",{attrs:{label:"代码位ID",prop:"platPlaceId"}},[a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"请输入代码位ID"},model:{value:e.temp.platPlaceId,callback:function(t){e.$set(e.temp,"platPlaceId","string"===typeof t?t.trim():t)},expression:"temp.platPlaceId"}})],1):e._e(),2==e.accessType&&e.dialogSourceType?a("el-form-item",{attrs:{label:"代码位ID"}},[a("div",[a("span",[e._v(" "+e._s(e.temp.platPlaceId))]),a("el-tooltip",{attrs:{content:"复制代码位ID",placement:"right",effect:"light"}},[a("i",{staticClass:"el-icon-copy-document",staticStyle:{cursor:"pointer","margin-left":"5px"},on:{click:function(t){return e.copyId(e.temp.platPlaceId)}}})])],1)]):e._e(),e.accessType&&2==e.accessType?a("el-form-item",{attrs:{label:"参数",prop:"ext"}},[a("el-input",{staticStyle:{width:"95%"},attrs:{type:"textarea",placeholder:"参数必须符合JSON格式"},model:{value:e.temp.ext,callback:function(t){e.$set(e.temp,"ext",t)},expression:"temp.ext"}})],1):e._e(),(e.id>=900||+e.temp.platId>=900)&&2!=e.accessType?a("el-form-item",{attrs:{label:"素材模板",prop:"templateIds"}},[a("el-transfer",{attrs:{data:e.templeteList,titles:["可选模板","已选模板"]},model:{value:e.temp.templateIds,callback:function(t){e.$set(e.temp,"templateIds",t)},expression:"temp.templateIds"}})],1):e._e(),!e.isAutoDrawing||1!=e.temp.platId&&2!=e.temp.platId&&3!=e.temp.platId&&4!=e.temp.platId&&6!=e.temp.platId?e._e():a("el-form-item",{attrs:{label:"是否自渲染",prop:"isAutoDrawing"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.temp.isAutoDrawing,callback:function(t){e.$set(e.temp,"isAutoDrawing",t)},expression:"temp.isAutoDrawing"}},[e._v(" 是 ")]),a("el-radio",{attrs:{label:"0"},model:{value:e.temp.isAutoDrawing,callback:function(t){e.$set(e.temp,"isAutoDrawing",t)},expression:"temp.isAutoDrawing"}},[e._v(" 否 ")])],1),"SUPER_ADMIN"==e.$store.getters.roles[0]&&3==e.temp.position&&"1"==e.temp.isAutoDrawing||"1"==e.accessType&&"3"==e.temp.position?a("el-form-item",{attrs:{label:"关闭按钮控制",prop:"closeButtonType"}},[a("el-radio",{attrs:{label:"A"},model:{value:e.temp.closeButtonType,callback:function(t){e.$set(e.temp,"closeButtonType",t)},expression:"temp.closeButtonType"}},[e._v(" 一直显示 ")]),a("el-radio",{attrs:{label:"B"},model:{value:e.temp.closeButtonType,callback:function(t){e.$set(e.temp,"closeButtonType",t)},expression:"temp.closeButtonType"}},[e._v(" n秒后显示 ")])],1):e._e(),(3==e.temp.position&&"1"==e.temp.isAutoDrawing||"1"==e.accessType&&"3"==e.temp.position)&&"B"==e.temp.closeButtonType&&"SUPER_ADMIN"==e.$store.getters.roles[0]?a("el-form-item",{attrs:{label:"显示时间",prop:"countDown"}},[a("el-input-number",{attrs:{min:0,max:10,step:1,"controls-position":"right"},model:{value:e.temp.countDown,callback:function(t){e.$set(e.temp,"countDown",t)},expression:"temp.countDown"}}),a("span",{staticStyle:{marginleft:"15px"}},[e._v("s后")])],1):e._e(),3==e.temp.position&&"1"==e.temp.isAutoDrawing&&"SUPER_ADMIN"==e.$store.getters.roles[0]||"1"==e.accessType&&"3"==e.temp.position?a("el-form-item",{attrs:{label:"关闭按钮大小",prop:"buttonSize"}},[a("el-input-number",{attrs:{min:0,max:100,step:1,"controls-position":"right"},model:{value:e.temp.buttonSize,callback:function(t){e.$set(e.temp,"buttonSize",t)},expression:"temp.buttonSize"}}),a("span",{staticStyle:{marginleft:"15px"}},[e._v("%")])],1):e._e(),a("el-form-item",{attrs:{prop:"settleType"}},[2==e.temp.platId||6==e.temp.platId?a("tips",{staticStyle:{display:"inline-block"},attrs:{slot:"label",content:2==e.temp.platId?"优量汇竞价必须选择服务端实时竞价(S2S Bidding)。优量汇头部竞价需要"+e.title+" SDK  2.4.2及以上版本支持。":6==e.temp.platId?"百度竞价为服务端实时竞价(S2S Bidding)。百度头部竞价需要"+e.title+" SDK 2.4.9及以上版本支持。":"",title:"价格类型","is-show":!0},slot:"label"}):a("span",{attrs:{slot:"label"},slot:"label"},[e._v("价格类型")]),a("el-radio-group",{attrs:{fill:"#8ec4f0",size:"mini"},model:{value:e.temp.settleType,callback:function(t){e.$set(e.temp,"settleType",t)},expression:"temp.settleType"}},[a("el-radio-button",{attrs:{label:0}},[e._v(" 固价 ")]),1===e.settleType||3===e.settleType?a("el-radio-button",{attrs:{label:1}},[e._v(" 服务端竞价 ")]):e._e(),2===e.settleType||3===e.settleType?a("el-radio-button",{attrs:{label:2}},[e._v(" 客户端竞价 ")]):e._e()],1)],1),0==e.temp.settleType?a("el-form-item",{attrs:{label:"价格",prop:"bidfloor"}},[a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"请输入底价",type:"number"},model:{value:e.temp.bidfloor,callback:function(t){e.$set(e.temp,"bidfloor",t)},expression:"temp.bidfloor"}})],1):e._e(),0==e.temp.settleType?a("el-form-item",{attrs:{prop:"isBottom"}},[a("tips",{staticStyle:{display:"inline-block"},attrs:{slot:"label",content:"兜底代码位将会和瀑布流并行请求，建议设置无底价的代码位，在瀑布流请求失败后进行填充。"+e.title+" SDK 2.4.9及以上版本支持该功能.",title:"是否兜底","is-show":!0},slot:"label"}),a("el-radio",{attrs:{label:"1"},model:{value:e.temp.isBottom,callback:function(t){e.$set(e.temp,"isBottom",t)},expression:"temp.isBottom"}},[e._v(" 是 ")]),a("el-radio",{attrs:{label:"0"},model:{value:e.temp.isBottom,callback:function(t){e.$set(e.temp,"isBottom",t)},expression:"temp.isBottom"}},[e._v(" 否 ")])],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.temp.settleType||2==e.temp.settleType||3==e.temp.settleType,expression:"\n              temp.settleType == 1 ||\n                temp.settleType == 2 ||\n                temp.settleType == 3\n            "}],attrs:{label:"价格"}},[a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"请输入底价",type:"number"},model:{value:e.temp.bidfloor,callback:function(t){e.$set(e.temp,"bidfloor",t)},expression:"temp.bidfloor"}})],1),997==e.temp.platId?a("el-form-item",{attrs:{label:"dealID"}},[a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"请输入dealID"},model:{value:e.temp.dealid,callback:function(t){e.$set(e.temp,"dealid",t)},expression:"temp.dealid"}})],1):e._e(),0==e.temp.settleType?a("el-form-item",{attrs:{prop:"isAutoSorting"}},[a("tips",{staticStyle:{display:"inline-block"},attrs:{slot:"label",content:"选择是之后，"+e.title+"将根据广告平台过去3天的平均eCPM来计算价格，需要代码位所属广告源开通Reporting API后才可使用。当展示少于5000时，该配置不生效。",title:"是否自动价格","is-show":!0},slot:"label"}),a("el-radio",{attrs:{label:"1"},model:{value:e.temp.isAutoSorting,callback:function(t){e.$set(e.temp,"isAutoSorting",t)},expression:"temp.isAutoSorting"}},[e._v(" 是 ")]),a("el-radio",{attrs:{label:"0"},model:{value:e.temp.isAutoSorting,callback:function(t){e.$set(e.temp,"isAutoSorting",t)},expression:"temp.isAutoSorting"}},[e._v(" 否 ")])],1):e._e(),"SUPER_ADMIN"==e.$store.getters.roles[0]?a("el-form-item",{attrs:{label:"是否校验",prop:"isBlack"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.temp.isBlack,callback:function(t){e.$set(e.temp,"isBlack",t)},expression:"temp.isBlack"}},[e._v(" 是 ")]),a("el-radio",{attrs:{label:"0"},model:{value:e.temp.isBlack,callback:function(t){e.$set(e.temp,"isBlack",t)},expression:"temp.isBlack"}},[e._v(" 否 ")])],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.accessType,expression:"accessType === '1'"}],attrs:{label:"价格浮动%"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:100,step:1},model:{value:e.temp.floatingRate,callback:function(t){e.$set(e.temp,"floatingRate",t)},expression:"temp.floatingRate"}})],1),1===e.temp.position&&"1"===e.accessType?a("el-form-item",{attrs:{label:"热区"}},[a("el-radio-group",{model:{value:e.temp.hotspot,callback:function(t){e.$set(e.temp,"hotspot",t)},expression:"temp.hotspot"}},[a("el-radio",{attrs:{label:"A"}},[e._v(" 开启 ")]),a("el-radio",{attrs:{label:"S"}},[e._v(" 关闭 ")])],1)],1):e._e(),"A"===e.temp.hotspot&&"1"===e.accessType?a("el-form-item",{attrs:{label:"热区样式"}},[a("el-radio-group",{model:{value:e.temp.hotspotType,callback:function(t){e.$set(e.temp,"hotspotType",t)},expression:"temp.hotspotType"}},[a("el-radio",{attrs:{label:1}},[e._v(" 默认 ")]),a("el-radio",{attrs:{label:2}},[e._v(" 开启摇一摇 ")])],1)],1):e._e(),2==e.temp.hotspotType&&"SUPER_ADMIN"==e.$store.getters.roles[0]?a("el-form-item",{attrs:{label:"灵敏度",prop:"sensitivity"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:100,step:1},model:{value:e.temp.sensitivity,callback:function(t){e.$set(e.temp,"sensitivity",t)},expression:"temp.sensitivity"}})],1):e._e(),6===e.temp.position&&"1"===e.accessType?a("el-form-item",{attrs:{label:"模版类型",prop:"templateTypeId"}},[a("el-select",{attrs:{placeholder:"请选择模版类型"},model:{value:e.temp.templateTypeId,callback:function(t){e.$set(e.temp,"templateTypeId",t)},expression:"temp.templateTypeId"}},e._l(e.templateTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1):e._e(),6===e.temp.position&&"1"==e.accessType?a("el-form-item",{attrs:{label:"左右边距"}},[a("el-input-number",{staticStyle:{width:"95%"},attrs:{"controls-position":"right"},model:{value:e.temp.lrMargin,callback:function(t){e.$set(e.temp,"lrMargin",t)},expression:"temp.lrMargin"}})],1):e._e(),6===e.temp.position&&"1"===e.accessType?a("el-form-item",{attrs:{label:"上下边距"}},[a("el-input-number",{staticStyle:{width:"95%"},attrs:{"controls-position":"right"},model:{value:e.temp.tbMargin,callback:function(t){e.$set(e.temp,"tbMargin",t)},expression:"temp.tbMargin"}})],1):e._e(),e.showDownload?a("el-form-item",{attrs:{label:"二次下载确认",prop:"showDownload"}},[a("el-select",{model:{value:e.temp.isDownload,callback:function(t){e.$set(e.temp,"isDownload",t)},expression:"temp.isDownload"}},[a("el-option",{attrs:{label:"开启",value:"A"}}),a("el-option",{attrs:{label:"关闭",value:"S"}})],1)],1):e._e(),1===e.dialogSourceType?a("el-form-item",{attrs:{label:"状态",prop:"sts"}},[a("el-select",{model:{value:e.temp.sts,callback:function(t){e.$set(e.temp,"sts",t)},expression:"temp.sts"}},[a("el-option",{attrs:{value:"A",label:"启动"}}),a("el-option",{attrs:{value:"S",label:"暂停"}})],1)],1):e._e(),1==e.accessType?a("el-form-item",{attrs:{label:"应用名称",prop:"appnameReplace"}},[a("el-input",{attrs:{placeholder:"请输入应用名称"},model:{value:e.temp.appnameReplace,callback:function(t){e.$set(e.temp,"appnameReplace",t)},expression:"temp.appnameReplace"}})],1):e._e(),1==e.accessType?a("el-form-item",{attrs:{label:"应用版本号",prop:"versionReplace"}},[a("el-input",{attrs:{placeholder:"请输入应用版本号"},model:{value:e.temp.versionReplace,callback:function(t){e.$set(e.temp,"versionReplace",t)},expression:"temp.versionReplace"}})],1):e._e(),1==e.accessType?a("el-form-item",{attrs:{label:"应用包名",prop:"bundleReplace"}},[a("el-input",{attrs:{placeholder:"请输入应用包名"},model:{value:e.temp.bundleReplace,callback:function(t){e.$set(e.temp,"bundleReplace",t)},expression:"temp.bundleReplace"}})],1):e._e()],1),e.isAdvanced?a("div",{staticClass:"advanced_form_item"},[a("el-form-item",{attrs:{"label-width":"100px",label:"广告源"}},[e._v(" "+e._s(e.getPlatName(e.temp.platId))+" ")]),a("el-form-item",{attrs:{"label-width":"100px",label:"代码位"}},[e._v(" "+e._s(e.temp.name)+" ")]),a("el-form-item",{attrs:{label:"请求上限",prop:"requestFreq"}},[a("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"设置该代码位请求次数上限/天。不填，则表示不限制；",title:"请求上限","is-show":!0}})],1),a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"不限",type:"number",min:0},on:{input:function(t){"Number"==typeof t&&(e.temp.requestFreq=+t<0?0:+t)}},nativeOn:{keyup:function(t){return e.proving(t)},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()}},model:{value:e.temp.requestFreq,callback:function(t){e.$set(e.temp,"requestFreq",t)},expression:"temp.requestFreq"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("次/天")])])],1),a("el-form-item",{attrs:{label:"展示上限",prop:"impressFreq"}},[a("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"设置该代码位展示次数上限/天。不填，则表示不限制；",title:"展示上限","is-show":!0}})],1),a("el-input",{staticStyle:{width:"95%"},attrs:{min:0,type:"number",placeholder:"不限"},on:{input:function(t){"Number"==typeof t&&(e.temp.impressFreq=+t<0?0:+t)}},nativeOn:{keyup:function(t){return e.proving(t)},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()}},model:{value:e.temp.impressFreq,callback:function(t){e.$set(e.temp,"impressFreq",t)},expression:"temp.impressFreq"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("次/天")])])],1),a("el-form-item",{attrs:{label:"点击上限",prop:"clickFreq"}},[a("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"设置该代码位点击次数上限/天。不填，则表示不限制；",title:"点击上限","is-show":!0}})],1),a("el-input",{staticStyle:{width:"95%"},attrs:{min:0,type:"number",placeholder:"不限"},on:{input:function(t){"Number"==typeof t&&(e.temp.clickFreq=+t<0?0:+t)}},nativeOn:{keyup:function(t){return e.proving(t)},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()}},model:{value:e.temp.clickFreq,callback:function(t){e.$set(e.temp,"clickFreq",t)},expression:"temp.clickFreq"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("次/天")])])],1),a("el-form-item",{attrs:{label:"展示频次",prop:"impressFreqDay"}},[a("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"设置单个用户的广告展示次数上限/天。不填，则表示不限制；",title:"展示频次","is-show":!0}})],1),a("el-input",{staticStyle:{width:"95%"},attrs:{min:0,type:"number",placeholder:"不限"},on:{input:function(t){"Number"==typeof t&&(e.temp.impressFreqDay=+t<0?0:+t)}},nativeOn:{keyup:function(t){return e.proving(t)},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()}},model:{value:e.temp.impressFreqDay,callback:function(t){e.$set(e.temp,"impressFreqDay",t)},expression:"temp.impressFreqDay"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("次/设备/天")])])],1),a("el-form-item",{attrs:{label:"展示频次",prop:"impressFreqHour"}},[a("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"设置单个用户的广告展示次数上限/小时。不填，则表示不限制；",title:"展示频次","is-show":!0}})],1),a("el-input",{staticStyle:{width:"95%"},attrs:{min:0,type:"number",placeholder:"不限"},on:{input:function(t){"Number"==typeof t&&(e.temp.impressFreqHour=+t<0?0:+t)}},nativeOn:{keyup:function(t){return e.proving(t)},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()}},model:{value:e.temp.impressFreqHour,callback:function(t){e.$set(e.temp,"impressFreqHour",t)},expression:"temp.impressFreqHour"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("次/设备/小时")])])],1),a("el-form-item",{attrs:{label:"点击频次",prop:"clickInterval"}},[a("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"设置单个用户的广告点击次数上限/天。不填，则表示不限制；",title:"点击频次","is-show":!0}})],1),a("el-input",{staticStyle:{width:"95%"},attrs:{min:0,type:"number",placeholder:"不限"},on:{input:function(t){"Number"==typeof t&&(e.temp.clickInterval=+t<0?0:+t)}},nativeOn:{keyup:function(t){return e.proving(t)},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()}},model:{value:e.temp.clickInterval,callback:function(t){e.$set(e.temp,"clickInterval",t)},expression:"temp.clickInterval"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("次/设备/天")])])],1),a("el-form-item",{attrs:{label:"展示间隔",prop:"impressInterval"}},[a("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"设置本次展示到下一次请求之间的时间间隔/秒。不填，则表示不限",title:"展示间隔","is-show":!0}})],1),a("el-input",{staticStyle:{width:"95%"},attrs:{min:0,type:"number",placeholder:"不限"},on:{input:function(t){"Number"==typeof t&&(e.temp.impressInterval=+t<0?0:+t)}},nativeOn:{keyup:function(t){return e.proving(t)},mousewheel:function(e){e.preventDefault()},DOMMouseScroll:function(e){e.preventDefault()}},model:{value:e.temp.impressInterval,callback:function(t){e.$set(e.temp,"impressInterval",t)},expression:"temp.impressInterval"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("秒")])])],1)],1):e._e()]),e.allowOperate?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.closeSourceDialog}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleSubmitForm}},[e._v("确定")])],1):e._e()],1):e._e()],1):a("div",{staticClass:"app-container"},[a("el-page-header",{staticStyle:{color:"#2265ff"},attrs:{content:"高级设置"},on:{back:e.goBack}}),a("div",{staticClass:"body-container"},[a("div",{staticClass:"adverting"},[a("div",{staticClass:"item"},[a("div",{staticClass:"left"},[e._v(" 应用 ")]),a("div",{staticClass:"right"},[e._v(" "+e._s(e.appName)+" ")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"left"},[e._v(" 广告位 ")]),a("div",{staticClass:"right"},[e._v(" "+e._s(e.placeName)+" ")])]),"SUPER_ADMIN"===e.roles?a("div",{staticClass:"item"},[a("div",{staticClass:"left"},[e._v(" 瀑布流策略缓存生效时长 ")]),a("div",{staticClass:"right"},[a("el-input",{attrs:{disabled:!e.allowOperate},on:{blur:e.editTime},model:{value:e.adverting.cacheTime,callback:function(t){e.$set(e.adverting,"cacheTime",t)},expression:"adverting.cacheTime"}}),a("span",[e._v("s")])],1)]):e._e()]),a("div",{staticClass:"filter-container"},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addFlowGroups}},[e._v(" 流量分组 ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.dragTableKey,ref:"dragTable",staticClass:"dragTable",staticStyle:{cursor:"move"},attrs:{data:e.config.groups,fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"优先级"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("div",["默认分组"!==s.name?a("span",{staticStyle:{"font-size":"14px"}},[e._v(e._s(s.priority))]):a("span",{staticStyle:{"font-size":"14px"}},[e._v("0")])])]}}])}),a("el-table-column",{attrs:{label:"流量分组",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"270"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.aaa(s)}}},[e._v(" 聚合管理 ")]),"default"!=s.id&&e.allowOperate?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleUpdateFlowGroups(s)}}},[e._v(" 编辑 ")]):e._e(),"default"!=s.id&&e.allowOperate?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(s)}}},[e._v(" 删除 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"展示上限 (小时) ",align:"center",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-input",{attrs:{disabled:!e.allowOperate,type:"number",placeholder:"不限"},on:{blur:function(t){return e.editInputVal(s)}},model:{value:s.impressFreqHour,callback:function(t){e.$set(s,"impressFreqHour",t)},expression:"row.impressFreqHour"}})]}}])}),a("el-table-column",{attrs:{label:"展示上限 (天) ",align:"center",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-input",{attrs:{disabled:!e.allowOperate,type:"number",placeholder:"不限"},on:{blur:function(t){return e.editInputVal(s)}},model:{value:s.impressFreqDay,callback:function(t){e.$set(s,"impressFreqDay",t)},expression:"row.impressFreqDay"}})]}}])}),a("el-table-column",{attrs:{label:"展示间隔 (秒)",align:"center",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-input",{attrs:{disabled:!e.allowOperate,type:"number",placeholder:"不限"},on:{blur:function(t){return e.editInputVal(s)}},model:{value:s.impressInterval,callback:function(t){e.$set(s,"impressInterval",t)},expression:"row.impressInterval"}})]}}])})],1)],1)],1),e.flowGroupsDialog?a("el-dialog",{attrs:{title:e.isAdd?"添加流量分组":"编辑流量分组",visible:e.flowGroupsDialog,width:"50%","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.flowGroupsDialog=t},close:e.closeGroups}},[a("div",{staticClass:"container"},[e.isEditShow?a("div",{staticClass:"left"},[a("h3",[e._v("快速添加")]),a("ul",e._l(e.adverteData,(function(t,s){return a("li",{key:s,class:s===e.activeIndex&&!0===e.isBorder?"addactive":"",on:{click:function(a){return e.itemClick(t,s)}}},[e._v(" "+e._s(t.name)+" ")])})),0)]):e._e(),a("div",{staticClass:"right"},[a("el-form",{ref:"flowGroupsRef",attrs:{model:e.flowGroupsForm,"label-width":"150px",rules:e.flowGroupsRules}},[a("el-form-item",{attrs:{label:"流量分组名称",prop:"name"}},[a("div",{staticClass:"name"},[a("el-input",{attrs:{maxlength:"30","show-word-limit":""},model:{value:e.flowGroupsForm.name,callback:function(t){e.$set(e.flowGroupsForm,"name",t)},expression:"flowGroupsForm.name"}})],1)]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.sdkShow,expression:"sdkShow"}],attrs:{label:"SDK版本",prop:"sdk"}},[a("div",{staticClass:"box1 sdkbox",staticStyle:{display:"flex"}},[a("el-select",{staticClass:"select",attrs:{required:!1,placeholder:"请选择"},model:{value:e.flowGroupsForm.sdkSelect,callback:function(t){e.$set(e.flowGroupsForm,"sdkSelect",t)},expression:"flowGroupsForm.sdkSelect"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"sdk",attrs:{placeholder:"显示多个SDK版本用英文逗号隔开"},model:{value:e.flowGroupsForm.sdk,callback:function(t){e.$set(e.flowGroupsForm,"sdk",t)},expression:"flowGroupsForm.sdk"}}),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(1)}}})],1)]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.equipmentId,expression:"equipmentId"}],attrs:{label:"设备ID",prop:"equipVal"}},[a("div",{staticClass:"box1 equipmentbox",staticStyle:{display:"flex"}},[a("el-select",{staticClass:"select",attrs:{required:!1,placeholder:"请选择"},model:{value:e.flowGroupsForm.equipSelect,callback:function(t){e.$set(e.flowGroupsForm,"equipSelect",t)},expression:"flowGroupsForm.equipSelect"}},e._l(e.options1,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"equipment",attrs:{placeholder:"示多个设备ID用英文逗号隔开"},model:{value:e.flowGroupsForm.equipVal,callback:function(t){e.$set(e.flowGroupsForm,"equipVal",t)},expression:"flowGroupsForm.equipVal"}}),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(2)}}})],1)]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.channelShow,expression:"channelShow"}],attrs:{label:"渠道",prop:"channelVal"}},[a("div",{staticClass:"box1 channelbox",staticStyle:{display:"flex"}},[a("el-select",{staticClass:"select",attrs:{placeholder:"请选择",required:!1},model:{value:e.flowGroupsForm.channelSelect,callback:function(t){e.$set(e.flowGroupsForm,"channelSelect",t)},expression:"flowGroupsForm.channelSelect"}},e._l(e.options1,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"channel",attrs:{placeholder:"支持填入多个渠道标识，用英文逗号隔开"},model:{value:e.flowGroupsForm.channelVal,callback:function(t){e.$set(e.flowGroupsForm,"channelVal",t)},expression:"flowGroupsForm.channelVal"}}),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(3)}}})],1)]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.areaShow,expression:"areaShow"}],attrs:{label:"地区",prop:"areaVal"}},[a("div",{staticClass:"box1 areabox",staticStyle:{display:"flex"}},[a("el-select",{staticClass:"select",attrs:{placeholder:"请选择",required:!1},model:{value:e.flowGroupsForm.areaSelect,callback:function(t){e.$set(e.flowGroupsForm,"areaSelect",t)},expression:"flowGroupsForm.areaSelect"}},e._l(e.options1,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-cascader",{staticClass:"area",attrs:{"collapse-tags":"",options:e.areaOptions,props:e.props,clearable:""},model:{value:e.flowGroupsForm.areaVal,callback:function(t){e.$set(e.flowGroupsForm,"areaVal",t)},expression:"flowGroupsForm.areaVal"}}),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(4)}}})],1)]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.dateShow,expression:"dateShow"}],attrs:{label:"日期",required:""}},[a("div",{staticClass:"box1",staticStyle:{display:"flex"}},[a("div",{staticClass:"datepickers"},[e._l(e.pickDate,(function(t,s){return a("div",{key:s,staticClass:"picker_item"},[a("el-select",{attrs:{disabled:!(0===s),width:"100px",placeholder:"请选择",required:!1},model:{value:e.flowGroupsForm.dateSelect,callback:function(t){e.$set(e.flowGroupsForm,"dateSelect",t)},expression:"flowGroupsForm.dateSelect"}},e._l(e.options1,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-date-picker",{attrs:{width:"300px",size:"mini",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.pickDate[s],callback:function(t){e.$set(e.pickDate,s,t)},expression:"pickDate[index]"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!(0===s),expression:"!(index === 0)"}],staticClass:"closeItem el-icon-circle-close",on:{click:function(t){return e.closeDateItem(s)}}})],1)})),a("span",{staticClass:"additem",on:{click:e.addDatepicker}},[e._v("+ 添加日期规则")])],2),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(5)}}})])]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.timeShow,expression:"timeShow"}],attrs:{label:"时间",required:""}},[a("div",{staticClass:"box1",staticStyle:{display:"flex"}},[a("div",{staticClass:"timepickers"},[e._l(e.flowGroupsForm.timeVal,(function(t,s){return a("div",{key:s,staticClass:"picker_item"},[a("el-select",{attrs:{disabled:!(0===s),width:"100px",placeholder:"请选择",required:!1},model:{value:e.flowGroupsForm.timeSelect,callback:function(t){e.$set(e.flowGroupsForm,"timeSelect",t)},expression:"flowGroupsForm.timeSelect"}},e._l(e.options2,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围","value-format":"HH:mm",format:"HH:mm","picker-options":{start:"08:30",end:"18:30"}},model:{value:e.flowGroupsForm.timeVal[s],callback:function(t){e.$set(e.flowGroupsForm.timeVal,s,t)},expression:"flowGroupsForm.timeVal[index]"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!(0===s),expression:"!(index === 0)"}],staticClass:"closeItem el-icon-circle-close",on:{click:function(t){return e.closeTimeItem(s)}}})],1)})),a("span",{staticClass:"additem",on:{click:e.addTimepicker}},[e._v("+ 添加时间规则")])],2),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(6)}}})])]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.brandShow,expression:"brandShow"}],attrs:{label:"设备品牌",prop:"equipVal"}},[a("div",{staticClass:"box1",staticStyle:{display:"flex"}},[a("div",{staticClass:"brandbox"},[a("el-select",{staticClass:"select",attrs:{required:!1,placeholder:"请选择"},model:{value:e.flowGroupsForm.brandSelect,callback:function(t){e.$set(e.flowGroupsForm,"brandSelect",t)},expression:"flowGroupsForm.brandSelect"}},e._l(e.options1,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticClass:"brand",attrs:{multiple:"","collapse-tags":"",filterable:"","reserve-keyword":"",placeholder:"请输入设备品牌"},model:{value:e.flowGroupsForm.brandVal,callback:function(t){e.$set(e.flowGroupsForm,"brandVal",t)},expression:"flowGroupsForm.brandVal"}},e._l(e.brandList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(7)}}})],1)])]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.nettypeShow,expression:"nettypeShow"}],attrs:{label:"网络类型",prop:"equipVal"}},[a("div",{staticClass:"box1",staticStyle:{display:"flex"}},[a("div",{staticClass:"nettypebox"},[a("el-select",{staticClass:"select",attrs:{required:!1,placeholder:"请选择"},model:{value:e.flowGroupsForm.nettypeSelect,callback:function(t){e.$set(e.flowGroupsForm,"nettypeSelect",t)},expression:"flowGroupsForm.nettypeSelect"}},e._l(e.options1,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticClass:"nettype",attrs:{multiple:"","collapse-tags":"",filterable:"","reserve-keyword":"",placeholder:"请输入网络类型"},model:{value:e.flowGroupsForm.nettypeVal,callback:function(t){e.$set(e.flowGroupsForm,"nettypeVal",t)},expression:"flowGroupsForm.nettypeVal"}},e._l(e.netTypeList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(8)}}})],1)])]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.sysVersionShow,expression:"sysVersionShow"}],attrs:{label:"系统版本",prop:""}},[a("div",{staticClass:"box1",staticStyle:{display:"flex"}},[a("div",{staticClass:"nettypebox"},[a("el-select",{staticClass:"select",attrs:{required:!1,placeholder:"请选择"},model:{value:e.flowGroupsForm.sysVersionSelect,callback:function(t){e.$set(e.flowGroupsForm,"sysVersionSelect",t)},expression:"flowGroupsForm.sysVersionSelect"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"nettype",attrs:{placeholder:"2"==e.flowGroupsForm.sysVersionSelect||"3"==e.flowGroupsForm.sysVersionSelect?"请输入系统版本":"支持填入多个系统版本，用中英文逗号隔开"},model:{value:e.flowGroupsForm.sysVersion,callback:function(t){e.$set(e.flowGroupsForm,"sysVersion",t)},expression:"flowGroupsForm.sysVersion"}}),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(9)}}})],1)])]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.appVersionShow,expression:"appVersionShow"}],attrs:{label:"应用版本",prop:""}},[a("div",{staticClass:"box1",staticStyle:{display:"flex"}},[a("div",{staticClass:"nettypebox"},[a("el-select",{staticClass:"select",attrs:{required:!1,placeholder:"请选择"},model:{value:e.flowGroupsForm.appVersionSelect,callback:function(t){e.$set(e.flowGroupsForm,"appVersionSelect",t)},expression:"flowGroupsForm.appVersionSelect"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"nettype",attrs:{placeholder:"2"==e.flowGroupsForm.appVersionSelect||"3"==e.flowGroupsForm.appVersionSelect?"请输入应用版本":"支持填入多个应用版本，用中英文逗号隔开"},model:{value:e.flowGroupsForm.appVersion,callback:function(t){e.$set(e.flowGroupsForm,"appVersion",t)},expression:"flowGroupsForm.appVersion"}}),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(10)}}})],1)])]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.childchannelShow,expression:"childchannelShow"}],attrs:{label:"子渠道",prop:"childchannelVal"}},[a("div",{staticClass:"box1 channelbox",staticStyle:{display:"flex"}},[a("el-select",{staticClass:"select",attrs:{placeholder:"请选择",required:!1},model:{value:e.flowGroupsForm.childchannelSelect,callback:function(t){e.$set(e.flowGroupsForm,"childchannelSelect",t)},expression:"flowGroupsForm.childchannelSelect"}},e._l(e.options1,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"channel",attrs:{placeholder:"支持填入多个子渠道标识，用英文逗号隔开"},model:{value:e.flowGroupsForm.childchannelVal,callback:function(t){e.$set(e.flowGroupsForm,"childchannelVal",t)},expression:"flowGroupsForm.childchannelVal"}}),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(11)}}})],1)]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.custShow,expression:"custShow"}],attrs:{prop:""}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("自定义规则"),a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"通过Key-Value条件进行设置，Key和Value的条件可以是等于=或不等于!=，一个Key可以对应多个Value，用英文逗号分隔。多个条件之间使用&，即多个条件需要同时满足。建议Value使用以下字符规则：大小写字母数字和下划线[A-Za-z0-9]",title:"","is-show":!0}})],1),a("div",{staticClass:"box1",staticStyle:{display:"flex"}},[a("div",{staticClass:"nettypebox"},[a("el-input",{attrs:{placeholder:"请输入自定义规则"},model:{value:e.flowGroupsForm.custVal,callback:function(t){e.$set(e.flowGroupsForm,"custVal",t)},expression:"flowGroupsForm.custVal"}}),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(12)}}})],1)])]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.installTimeShow,expression:"installTimeShow"}],attrs:{prop:""}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("应用安装时间"),a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"小时/天：从请求广告时间到应用第一次初始化"+e.title+" SDK时间",title:"","is-show":!0}})],1),a("div",{staticClass:"box1",staticStyle:{display:"flex"}},[a("el-select",{staticClass:"select",staticStyle:{width:"110px","margin-right":"5px"},attrs:{placeholder:"请选择",required:!1},model:{value:e.flowGroupsForm.installTimeSelect,callback:function(t){e.$set(e.flowGroupsForm,"installTimeSelect",t)},expression:"flowGroupsForm.installTimeSelect"}},e._l(e.options3,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("div",{staticClass:"nettypebox"},[a("el-input",{staticStyle:{width:"200px","margin-right":"5px"},attrs:{placeholder:"请输入"},model:{value:e.flowGroupsForm.installTime,callback:function(t){e.$set(e.flowGroupsForm,"installTime",t)},expression:"flowGroupsForm.installTime"}}),a("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:""},model:{value:e.flowGroupsForm.installTimeType,callback:function(t){e.$set(e.flowGroupsForm,"installTimeType",t)},expression:"flowGroupsForm.installTimeType"}},[a("el-option",{attrs:{label:"小时",value:"h"}}),a("el-option",{attrs:{label:"天",value:"d"}})],1),a("span",{staticClass:"closeIcon el-icon-circle-close",on:{click:function(t){return e.closeInput(13)}}})],1)],1)])],1),a("el-dropdown",{staticStyle:{float:"right",cursor:"pointer"},on:{command:e.addRules}},[a("span",{staticStyle:{color:"#2265ff"}},[e._v(" 添加规则"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1"}},[e._v(" SDK版本 ")]),a("el-dropdown-item",{attrs:{command:"2"}},[e._v(" 设备ID ")]),a("el-dropdown-item",{attrs:{command:"3"}},[e._v(" 渠道 ")]),a("el-dropdown-item",{attrs:{command:"4"}},[e._v(" 地区 ")]),a("el-dropdown-item",{attrs:{command:"5"}},[e._v(" 日期 ")]),a("el-dropdown-item",{attrs:{command:"6"}},[e._v(" 时间 ")]),a("el-dropdown-item",{attrs:{command:"7"}},[e._v(" 设备品牌 ")]),a("el-dropdown-item",{attrs:{command:"8"}},[e._v(" 网络类型 ")]),a("el-dropdown-item",{attrs:{command:"9"}},[e._v(" 系统类型 ")]),a("el-dropdown-item",{attrs:{command:"10"}},[e._v(" 应用版本 ")]),a("el-dropdown-item",{attrs:{command:"11"}},[e._v(" 子渠道 ")]),a("el-dropdown-item",{attrs:{command:"12"}},[e._v(" 自定义规则 ")]),a("el-dropdown-item",{attrs:{command:"13"}},[e._v(" 应用安装时间 ")])],1)],1)],1)]),e.allowOperate?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.flowGroupsDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handelAddOrEdit}},[e._v("确 定")])],1):e._e()]):e._e(),a("addABTestDialog",{attrs:{"show-test-dialog-temp":e.showTestDialog,"add-abtest":e.addAbtest,"testquery-temp":e.testquery,"app-name":e.appName,"place-name":e.placeName,group:e.group},on:{closeTestDialog:function(t){e.showTestDialog=!1},editSuccess:e.handleSubmitTestForm}}),e.showEndTestDialog?a("el-dialog",{attrs:{title:"结束A/B测试",visible:e.showEndTestDialog,"destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showEndTestDialog=t},close:function(t){e.showEndTestDialog=!1}}},[a("el-form",{ref:"endtestdialog",staticStyle:{"padding-right":"50px"},attrs:{model:e.endquery,"label-width":"250px",rules:e.endTestRules}},[a("el-form-item",{attrs:{"label-width":"50px"}},[a("h3",{staticClass:"enddesc",staticStyle:{color:"#f40"}},[e._v(" 请选择您认为最优的测试分组，关闭测试后，您将使用所选测试分组的配置，流量将全部分配到该测试组，且该操作不可撤销。 ")])]),a("el-form-item",{attrs:{label:"测试应用："}},[a("span",[e._v(e._s(e.appName))])]),a("el-form-item",{attrs:{label:"测试广告位："}},[a("span",[e._v(e._s(e.placeName))])]),a("el-form-item",{attrs:{label:"测试流量分组："}},[a("span",[e._v(e._s(e.group.name))])]),a("el-form-item",{attrs:{label:"A/B测试名称："}},[a("span",[e._v(e._s(e.testName))])]),a("el-form-item",{attrs:{label:"测试分组：",prop:"testId"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择最优测试分组保存"},model:{value:e.endquery.testId,callback:function(t){e.$set(e.endquery,"testId",t)},expression:"endquery.testId"}},[e._l(e.abTestList,(function(t,s){return["default"!==t.testId?a("el-option",{key:s,attrs:{value:t.testId,label:t.groupName}}):e._e()]}))],2)],1)],1),e.allowOperate?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.closeEndTestDialog}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleSubmitEndTest}},[e._v("确定")])],1):e._e()],1):e._e(),e.showSettingDialog?a("el-dialog",{attrs:{title:"瀑布流属性配置",visible:e.showSettingDialog,"destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showSettingDialog=t},close:function(t){e.showSettingDialog=!1}}},[a("el-form",{ref:"settingdialog",attrs:{model:e.settingquery,"label-width":"250px",rules:e.endTestRules}},[a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("并行请求数"),a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"瀑布流中代码位将根据并行请求数来分组，同一组内代码位将同时发起广告请求",title:"","is-show":!0}}),e._v("：")],1),a("el-input-number",{attrs:{min:1,max:20,step:1},model:{value:e.settingquery.concurrentNum,callback:function(t){e.$set(e.settingquery,"concurrentNum",t)},expression:"settingquery.concurrentNum"}})],1),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("单次并行请求超时时长"),a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"一次并行请求没有返回广告填充结果(成功或失败)时最多等待的时长",title:"","is-show":!0}}),e._v("：")],1),a("el-input-number",{attrs:{min:.1,max:20,step:.1},model:{value:e.settingquery.timeout,callback:function(t){e.$set(e.settingquery,"timeout",t)},expression:"settingquery.timeout"}}),e._v(" s ")],1),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("瀑布流请求总超时时长"),a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"一次瀑布流总请求还没有返回任何成功广告填充时最多等待的时长",title:"","is-show":!0}}),e._v("：")],1),a("el-input-number",{attrs:{min:1,max:60,step:1},model:{value:e.settingquery.allTime,callback:function(t){e.$set(e.settingquery,"allTime",t)},expression:"settingquery.allTime"}}),e._v(" s ")],1),"SUPER_ADMIN"===e.$store.state.user.roles[0]?a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("服务端竞价请求超时时长"),a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"服务端竞价代码位请求广告超时等待时长",title:"","is-show":!0}}),e._v("：")],1),a("el-input-number",{attrs:{min:.1,max:10,step:.1},model:{value:e.settingquery.apiTimeout,callback:function(t){e.$set(e.settingquery,"apiTimeout",t)},expression:"settingquery.apiTimeout"}}),e._v(" s ")],1):e._e(),"SUPER_ADMIN"===e.$store.state.user.roles[0]?a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("客户端竞价请求超时时长"),a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"客户端竞价代码位请求广告超时等待时长",title:"","is-show":!0}}),e._v("：")],1),a("el-input-number",{attrs:{min:.1,max:10,step:.1},model:{value:e.settingquery.clientTimeout,callback:function(t){e.$set(e.settingquery,"clientTimeout",t)},expression:"settingquery.clientTimeout"}}),e._v(" s ")],1):e._e(),e.isCoopen?e._e():a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("缓存状态"),a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"缓存功能仅对"+e.title+"SDK 2.4.8 及以上版本生效，支持插屏、激励视频、原生和全屏广告",title:"","is-show":!0}}),e._v("：")],1),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"A","inactive-value":"S"},model:{value:e.settingquery.cacheSts,callback:function(t){e.$set(e.settingquery,"cacheSts",t)},expression:"settingquery.cacheSts"}})],1),"A"==e.settingquery.cacheSts?a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("缓存时间：")]),a("el-input-number",{attrs:{min:1,max:30,step:1},model:{value:e.settingquery.cacheTime,callback:function(t){e.$set(e.settingquery,"cacheTime",t)},expression:"settingquery.cacheTime"}}),e._v(" min ")],1):e._e(),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("快速请求"),a("tips",{staticStyle:{display:"inline-block"},attrs:{content:"",title:"","is-show":!0}}),e._v("：")],1),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"A","inactive-value":"S"},model:{value:e.settingquery.quickRequest,callback:function(t){e.$set(e.settingquery,"quickRequest",t)},expression:"settingquery.quickRequest"}})],1)],1),e.allowOperate?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.closeSettingDialog}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleSetting}},[e._v("确定")])],1):e._e()],1):e._e(),a("el-dialog",{attrs:{title:"创建新账户",visible:e.addAccountDialog,"append-to-body":""},on:{"update:visible":function(t){e.addAccountDialog=t}}},[a("el-form",{ref:"account_form",attrs:{model:e.addAccountQuery,rules:e.addAccountRules,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"广告源"}},[a("span",[e._v(e._s(e.editplatquerytemp.name))])]),a("el-form-item",{attrs:{label:"账户名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"输入名称以区分不同账号",maxlength:"30","show-word-limit":""},model:{value:e.addAccountQuery.name,callback:function(t){e.$set(e.addAccountQuery,"name",t)},expression:"addAccountQuery.name"}})],1),"993"==e.temp.platId||"992"==e.temp.platId||"991"==e.temp.platId||"998"==e.temp.platId||"996"==e.temp.platId||"1000"==e.temp.platId?a("el-form-item",{attrs:{label:"993"==e.temp.platId?"MID":"992"==e.temp.platId?"ChannleId":"991"==e.temp.platId?"发布商Id":"998"==e.temp.platId?"token":"996"==e.temp.platId?"渠道ID":"1000"==e.temp.platId?"MID":"",prop:"mid"}},[a("el-input",{attrs:{placeholder:"993"==e.temp.platId?"请输入MID":"992"==e.temp.platId?"请输入ChannleId":"991"==e.temp.platId?"请输入发布商Id":"998"==e.temp.platId?"请输入token":"996"==e.temp.platId?"请输入渠道ID":"1000"==e.temp.platId?"请输入MID":""},model:{value:e.addAccountQuery.mid,callback:function(t){e.$set(e.addAccountQuery,"mid",t)},expression:"addAccountQuery.mid"}})],1):e._e(),"991"==e.temp.platId?a("el-form-item",{attrs:{label:"密钥Id  ",prop:"keyId"}},[a("el-input",{attrs:{placeholder:"请输入密钥Id ",prop:"keyId"},model:{value:e.addAccountQuery.keyId,callback:function(t){e.$set(e.addAccountQuery,"keyId",t)},expression:"addAccountQuery.keyId"}})],1):e._e(),"991"==e.temp.platId?a("el-form-item",{attrs:{label:"密钥  ",prop:"signKey"}},[a("el-input",{attrs:{placeholder:"请输入密钥 ",prop:"signKey"},model:{value:e.addAccountQuery.signKey,callback:function(t){e.$set(e.addAccountQuery,"signKey",t)},expression:"addAccountQuery.signKey"}})],1):e._e(),2!=e.accessType&&(5==e.temp.platId||e.temp.platId>=900&&989!=e.temp.platId)?a("el-form-item",{attrs:{label:"请求环境"}},[a("el-radio-group",{model:{value:e.addAccountQuery.isDebug,callback:function(t){e.$set(e.addAccountQuery,"isDebug",t)},expression:"addAccountQuery.isDebug"}},[a("el-radio",{attrs:{label:"1",border:""}},[e._v(" 测试 ")]),a("el-radio",{attrs:{label:"0",border:""}},[e._v(" 正式 ")])],1)],1):e._e(),989==e.temp.platId?a("el-form-item",{attrs:{label:"请求地址"}},[a("el-input",{attrs:{placeholder:"请输入请求地址"},model:{value:e.temp.requestUrl,callback:function(t){e.$set(e.temp,"requestUrl",t)},expression:"temp.requestUrl"}})],1):e._e(),e.accessType&&"1"!=e.accessType&&"2"!=e.accessType?a("el-form-item",{attrs:{label:"报表API"}},[a("el-radio-group",{attrs:{value:e.addAccountQuery.openApiStatus,size:"small"},model:{value:e.addAccountQuery.openApiStatus,callback:function(t){e.$set(e.addAccountQuery,"openApiStatus",t)},expression:"addAccountQuery.openApiStatus"}},[a("el-radio",{attrs:{label:1,border:""}},[e._v(" 已开通 ")]),a("el-radio",{attrs:{label:0,border:""}},[e._v(" 未开通 ")])],1)],1):e._e(),e.addAccountQuery.openApiStatus&&e.showUserId?a("el-form-item",{attrs:{label:"账户"+e.userIdLabel,prop:"accountId"}},[a("el-input",{attrs:{placeholder:"请输入账户"+e.userIdLabel,maxlength:"30","show-word-limit":""},model:{value:e.addAccountQuery.accountId,callback:function(t){e.$set(e.addAccountQuery,"accountId",t)},expression:"addAccountQuery.accountId"}})],1):e._e(),1===e.addAccountQuery.openApiStatus&&e.showAccessKey?a("el-form-item",{attrs:{label:e.accessKeyLabel,prop:"accessKey"}},[a("el-input",{attrs:{placeholder:"请输入"+e.accessKeyLabel},model:{value:e.addAccountQuery.accessKey,callback:function(t){e.$set(e.addAccountQuery,"accessKey",t)},expression:"addAccountQuery.accessKey"}})],1):e._e(),e.addAccountQuery.openApiStatus&&17!=e.temp.platId?a("el-form-item",{attrs:{label:e.secretLabel,prop:"secretKey"}},[a("el-input",{attrs:{placeholder:"请输入"+e.secretLabel},model:{value:e.addAccountQuery.secretKey,callback:function(t){e.$set(e.addAccountQuery,"secretKey",t)},expression:"addAccountQuery.secretKey"}})],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addAccountDialog=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handlePlatForm}},[e._v("确定")])],1)],1)],1)},o=[],i=a("2909"),l=a("5530"),n=a("1da1"),c=a("ade3"),u=(a("96cf"),a("d3b7"),a("159b"),a("498a"),a("b0c0"),a("d81d"),a("99af"),a("4de4"),a("e9c4"),a("a434"),a("c740"),a("ac1f"),a("1276"),a("7db0"),a("a15b"),a("a9e3"),a("caad"),a("2532"),a("5319"),a("6724")),p=a("dba9"),d=a("fcc1"),m=a("5f72"),h=a("7f46"),f=a("aa47"),g=a("3620"),b=a("b775"),y=a("d084"),v=a("dee8"),w=a("f4f7"),S=a("b562"),I=a("244d"),x=a("441c"),k=a("2934"),T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"batch-copy-config-container"},[a("div",{staticClass:"button"},[a("el-button",{attrs:{size:"small",disabled:0==e.selectData.length,type:"primary"},on:{click:e.handleCopyConfig}},[e._v(" 批量复制代码位配置 ")])],1),a("div",{staticClass:"dialog"},[a("el-dialog",{attrs:{title:"批量复制代码位配置",width:"600px",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[e.query.targetData.length>1||1==e.query.targetData.length&&e.query.targetData[0].testList.length>1?a("div",{staticClass:"check_box"},[e._l(e.query.targetData,(function(t,s){return[a("div",{key:s,staticClass:"group_box"},[a("el-checkbox",{staticClass:"group_check",model:{value:t.isCheck,callback:function(a){e.$set(t,"isCheck",a)},expression:"item.isCheck"}},[a("p",{staticClass:"groupname"},[e._v(" "+e._s(t.groupName)+" ")])]),t.isCheck?a("el-checkbox-group",{class:{test_checkgroup:t.testList.length>1},model:{value:t.testIds,callback:function(a){e.$set(t,"testIds",a)},expression:"item.testIds"}},[e._l(t.testList,(function(t,s){return["default"!=t.testId?a("el-checkbox",{key:s,attrs:{label:t.testId}},[e._v(" "+e._s(t.testName)+" ")]):e._e()]}))],2):e._e()],1)]}))],2):a("span",{staticClass:"warning"},[e._v("暂无其他流量分组，请创建新流量分组后再操作！")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary",disabled:!(e.query.targetData.length>1||1==e.query.targetData.length&&e.query.targetData[0].testList.length>1)},on:{click:e.handleOk}},[e._v("确 定")])],1)])],1)])},_=[],q={name:"CopyConfig",props:{groups:Array,selectData:Array,testId:String,groupId:String},data:function(){return{visible:!1,query:{sourceData:[],targetData:[]}}},methods:{handleGroups:function(){var e=this;this.query.targetData=[],this.groups.forEach((function(t,a){e.query.targetData.push({groupId:t.id,groupName:t.name,isCheck:!1,testIds:[],testName:"",testList:[]}),t.abTests.forEach((function(t){e.query.targetData[a].testList.push({testId:t.testId,testName:t.groupName})})),e.query.targetData[a].testList.length<=1&&e.query.targetData[a].testIds.push("default")}))},handleSelectData:function(){var e=this;this.query.sourceData=[],this.selectData.forEach((function(t,a){e.query.sourceData.push({id:t.id,placeId:t.placeId,groupId:e.groupId,testId:e.testId?e.testId:"default"})}))},handleCopyConfig:function(){this.handleGroups(),this.handleSelectData(),this.visible=!0},handleOk:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=JSON.parse(JSON.stringify(e.query)),a.targetData=e.query.targetData.filter((function(e){return e.isCheck&&e.testIds.length>0})),0!=a.targetData.length){t.next=4;break}return t.abrupt("return",e.$message.error("请选择你要复制到的流量分组或A/B测试分组!"));case 4:return t.next=6,Object(w["i"])(a);case 6:s=t.sent,200==s.code&&(e.$message.success("操作成功！"),e.visible=!1);case 8:case"end":return t.stop()}}),t)})))()}}},O=q,A=(a("fec7"),a("2877")),D=Object(A["a"])(O,T,_,!1,null,"e9b539dc",null),C=D.exports,F=a("1af9"),G=a("1dc2"),$=a("70e0"),V=a("8280"),N=a("e398"),j=a("fa47"),R={name:"Aggregate",directives:{waves:u["a"]},components:(s={AppPlatform:G["a"],Empty:j["a"],CustTag:$["a"],tips:V["a"]},Object(c["a"])(s,"Empty",j["a"]),Object(c["a"])(s,"CustSelectOne",F["a"]),Object(c["a"])(s,"batchCopyConfig",C),Object(c["a"])(s,"addABTestDialog",N["a"]),s),data:function(){var e,t=this,a=function(e,t,a){if(!t)return a(new Error("请输入参数"));try{if(JSON.parse(t))return a()}catch(s){return a(new Error("请输入正确的JSON格式"))}},s=function(e,a,s){if(!a||""===a)return s(new Error("请输入"+t.accessKeyLabel));s()},r=function(e,a,s){if(!a||""===a)return s(new Error("请输入"+t.userIdLabel));s()},o=function(e,a,s){if(!a||""===a)return s(new Error("请输入"+t.secretLabel));s()};return e={pickerOptions:g["a"]||[],netTypeList:["WIFI","2G","3G","4G","5G"],pickDate:[[]],brandList:[],prevquery:{},query:{appId:" ",placeId:" ",groupId:null,dateStart:"",dateEnd:"",testId:""},platAppId:"",active:null,isEdit:null,appId:null,accessType:"",iconUrl:"",appName:null,placeName:null,roles:"",expand:!1,addOrEdit:!0,isBorder:!1,isAdd:!0,isEditShow:!0,appOptions:[],appOptionsAll:[],placeOptions:[],templateTypeOptions:[],config:null,group:{name:"默认分组",id:""},tableKey:0,listLoading:!1,list:[],listTemp:[],total:0,settleType:0,id:0,temp:{groupId:"default",platId:0,isDownload:"A",slotId:"",settleType:0,floatingRate:0,templateIds:[]},dialogSourceType:0,dialogSourceVisible:!1,accounts:[],dialogVisible:!1,groupRuleStr:"",dialogType:0,vueType:!0,adverting:{placeId:"",timeout:"",allTime:"",cacheTime:""},valueProps:!1,activeIndex:"",flowGroupsDialog:!1,equipmentId:!1,channelShow:!1,areaShow:!1,sdkShow:!1,dateShow:!1,timeShow:!1,brandShow:!1,nettypeShow:!1,sysVersionShow:!1,appVersionShow:!1,childchannelShow:!1,custShow:!1,installTimeShow:!1,flowGroupsForm:{name:"",sdk:"",equipVal:"",channelVal:"",areaVal:"",dateVal:"",timeVal:[["00:00","24:00"]],brandVal:[],nettypeVal:[],sysVersion:"",appVersion:"",childchannelVal:"",custVal:"",installTime:[],installTimeType:"h",sdkSelect:"0",equipSelect:"0",channelSelect:"0",areaSelect:"0",dateSelect:"0",timeSelect:"0",brandSelect:"0",nettypeSelect:"0",sysVersionSelect:"0",appVersionSelect:"0",childchannelSelect:"0",custSelect:"0",installTimeSelect:"2"},storageName:"aggregateData_0620",adverteData:[],props:{multiple:!0},areaOptions:[],ruleContent:[],areaList:[],options:[{value:"0",label:"包括"},{value:"1",label:"不包括"},{value:"2",label:">"},{value:"3",label:"<"}],options2:[{value:"0",label:"包括"}],options1:[{value:"0",label:"包括"},{value:"1",label:"不包括"}],options3:[{value:"2",label:">"},{value:"3",label:"<"}],flowGroupsRules:{name:[{required:!0,message:"请填写流量分组名称",trigger:"blur"}]},addAccountRules:{name:[{required:!0,message:"请输入账户名称",trigger:"blur"}],mid:[{required:!0,message:"请输入ID",trigger:"blur"}],keyId:[{required:!0,message:"请输入密钥Id",trigger:"blur"}],signKey:[{required:!0,message:"请输入密钥",trigger:"blur"}],accountId:[{required:!0,validator:r,trigger:"blur"}],secretKey:[{required:!0,validator:o,trigger:"blur"}],accessKey:[{required:!0,validator:s,trigger:"blur"}]},rules:{ext:[{required:!0,validator:a,trigger:"blur"}],name:[{required:!0,message:"请输入代码位名称",trigger:"blur"}],bidfloor:[{required:!0,message:"请输入底价",trigger:"blur"}],templateTypeId:[{required:!0,message:"请输入模版类型",trigger:"change"}],platPlaceId:[{required:!0,message:"请输入代码位ID",trigger:"blur"}],templateIds:[{required:!0,message:"请选择素材模板"}],platAccountId:[{required:!0,message:"请选择账户",trigger:"change"}],platAppId:[{required:!0,message:"请输入AppID",trigger:"blur"}]},platList:[],PlatOptions:[],date:[],showDownload:!1,showSlotId:!1,targetArr:p["a"],sureArr:[],lineIndex:0,downloading:!1,showRuleText:!1,addAbtest:!0,showTestDialog:!1,abTestList:[],testName:"",testType:0,testquery:{placeId:"",groupId:"",testName:"",type:0,abTestList:[{groupName:"A组",proportion:50,testId:"",sts:"A",intervalList:[[1,1]]},{groupName:"B组",proportion:50,testId:"",sts:"A",intervalList:[[1,1]]}]}},Object(c["a"])(e,"abTestList",[]),Object(c["a"])(e,"showEndTestDialog",!1),Object(c["a"])(e,"endquery",{groupId:"",placeId:"",testId:""}),Object(c["a"])(e,"endTestRules",{testId:[{required:!0,message:"请选择测试组"}]}),Object(c["a"])(e,"showSettingDialog",!1),Object(c["a"])(e,"settingquery",{groupId:"",placeId:"",testId:"",concurrentNum:"",timeout:"",allTime:"",apiTimeout:"",cacheTime:"",cacheSts:"S",clientTimeout:"",quickRequest:"S"}),Object(c["a"])(e,"templeteList",[]),Object(c["a"])(e,"fallNum",0),Object(c["a"])(e,"biddingNum",0),Object(c["a"])(e,"concurrentNum",0),Object(c["a"])(e,"platName",""),Object(c["a"])(e,"editplatquerytemp",{}),Object(c["a"])(e,"selectTableColumn",[]),Object(c["a"])(e,"chooseAllA",!1),Object(c["a"])(e,"chooseAllS",!1),Object(c["a"])(e,"dragTableKey",Math.random()),Object(c["a"])(e,"addAccountQuery",{platId:"",openApiStatus:0,isDebug:"0"}),Object(c["a"])(e,"addAccountDialog",!1),Object(c["a"])(e,"isAdvanced",!1),Object(c["a"])(e,"positionList",[]),e},computed:{secretLabel:function(){var e=Object(y["b"])(this.temp.platId);return e},showAccessKey:function(){var e=Object(y["c"])(this.temp.platId);return e},showUserId:function(){var e=Object(y["e"])(this.temp.platId);return e},userIdLabel:function(){var e=Object(y["d"])(this.temp.platId);return e},accessKeyLabel:function(){var e=Object(y["a"])(this.temp.platId);return e},Alen:function(){var e=0;return this.listTemp.forEach((function(t){"A"==t.sts&&e++})),e},Slen:function(){var e=0;return this.listTemp.forEach((function(t){"S"==t.sts&&e++})),e},title:function(){return this.$store.getters.title},allowOperate:function(){return this.$store.getters.allowOperate},allowDownload:function(){return this.$store.getters.allowDownload},isAutoDrawing:function(){var e=this,t=!1;return this.placeOptions.forEach((function(a){a.id==e.query.placeId&&(t=1==a.position||3==a.position)})),t},isCoopen:function(){var e=this,t=!1;return this.placeOptions.forEach((function(a){a.id==e.query.placeId&&(t=1==a.position)})),t}},watch:{selectTableColumn:{handler:function(e){var t=0,a=0;e.forEach((function(e){"A"==e.sts&&t++,"S"==e.sts&&a++})),this.Alen==t&&0!=this.Alen?this.chooseAllA=!0:this.chooseAllA=!1,this.Slen==a&&0!=this.Slen?this.chooseAllS=!0:this.chooseAllS=!1}}},created:function(){Object(v["a"])("aggregateData",this.storageName),this.initDate()},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$store.getters.roles[0],e.roles=a,s=e.$route.query.appId,r=e.$route.query.placeId,s&&s.trim().length>0&&(e.query.appId=s),r&&r.trim().length>0&&(e.query.placeId=r),t.next=8,e.initAppOptions();case 8:if(!e.$route.query.appId){t.next=11;break}return t.next=11,e.handleGetSource();case 11:return t.next=13,e.getTemplateTypeList();case 13:return t.next=15,e.initAreaptions();case 15:return t.next=17,e.getbrandList();case 17:return t.next=19,e.getPlatOptions();case 19:return e.initTargetArr(),e.initTableforTag(),t.next=23,e.getTempleteList();case 23:return t.next=25,e.getPlatList();case 25:e.getPositionList();case 26:case"end":return t.stop()}}),t)})))()},methods:{getPositionList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(k["a"])();case 2:a=t.sent,e.positionList=a.data;case 4:case"end":return t.stop()}}),t)})))()},getPosition:function(e){var t="";return this.positionList.forEach((function(a){a.id==e&&(t=a.name)})),t},initSort:function(){var e=this,t=document.querySelector(".dragTable .el-table__body-wrapper tbody");new f["default"](t,{animation:150,onEnd:function(t){e.handelPriority(t.newIndex,t.oldIndex)}})},getTempleteList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["z"])();case 2:if(a=t.sent,200===a.code){t.next=5;break}return t.abrupt("return");case 5:e.templeteList=a.data.map((function(e){return{label:e.name,key:e.id,disabled:!1}}));case 6:case"end":return t.stop()}}),t)})))()},initDate:function(){var e=(new Date).getTime(),t=new Date(e).getFullYear(),a=new Date(e).getMonth()+1,s=new Date(e).getDate(),r="".concat(t,"-").concat(a<10?"0"+a:a,"-").concat(s<10?"0"+s:s);this.date[0]=this.date[1]=r,this.query.dateEnd=r,this.query.dateStart=r},testrenderHeader:function(e,t){t.column,t.$index;return 0==this.testquery.type?this.$createElement("span","比例"):1==this.testquery.type?this.$createElement("tips",{props:{content:"对用户进行分组，每个分组配置一个数值区间，各分组数值区间不可以交叉。",title:"用户区间",isShow:!0}}):void 0},renderHeader:function(e,t){var a=t.column,s=(t.$index,a.property),r=this.sureArr.filter((function(e){return e.prop==s})),o={};return r.length>0&&(o=r[0]),o.prop?this.$createElement("tips",{props:{content:o.desc,title:o.label,isShow:!0}}):this.$createElement("tips",{props:{content:"",title:a.label,isShow:!1}})},editbidfloor:function(e){},downloadReport:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.downloading=!0,a=[],s=["优先级","广告源","代码位","状态","价格"],e.sureArr.forEach((function(e){e.checked&&(a.push(e.prop),s.push(e.label))})),e.query.codeList=a,e.query.nameList=s,t.prev=6,t.next=9,e.exportToExcel();case 9:return r=t.sent,t.next=12,Object(d["a"])(r,"aggregate.xlsx");case 12:t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](6);case 16:e.downloading=!1;case 17:case"end":return t.stop()}}),t,null,[[6,14]])})))()},exportToExcel:function(){return b["a"].post("/aggregate/downloadReport",this.query,{responseType:"blob"})},initTargetArr:function(){localStorage.getItem(this.storageName)&&(this.targetArr=JSON.parse(localStorage.getItem(this.storageName)))},initTableforTag:function(){var e=this;this.targetArr.forEach((function(t){t.checked&&e.sureArr.push(JSON.parse(JSON.stringify(t)))}))},handelConfirmDialog:function(e,t){this.targetArr=JSON.parse(JSON.stringify(t)),this.sureArr=JSON.parse(JSON.stringify(e))},getPlatList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(S["j"])();case 2:if(a=t.sent,200===a.code){t.next=5;break}return t.abrupt("return");case 5:e.platList=a.data;case 6:case"end":return t.stop()}}),t)})))()},getPlatOptions:function(){var e=this;Object(x["d"])().then((function(t){e.PlatOptions=t.data}))},getbrandList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["k"])();case 2:a=t.sent,e.brandList=a.data;case 4:case"end":return t.stop()}}),t)})))()},closeTimeItem:function(e){this.flowGroupsForm.timeVal.splice(e,1)},closeDateItem:function(e){this.pickDate.splice(e,1)},addTimepicker:function(){this.flowGroupsForm.timeVal.push(["00:00","24:00"])},addDatepicker:function(){this.pickDate.push([])},selectPlatId:function(e){this.active=e,this.temp.platId=e,this.getAccounts(e),this.showDownload=1===e,this.showSlotId=11===e},handelPriority:function(e,t){var a=this;if(0==e||0==t)return this.$message.warning("默认分组优先级不可修改！"),this.handleGetGroup(),this.dragTableKey=Math.random(),void setTimeout((function(){a.initSort()}),1e3);var s=JSON.parse(JSON.stringify(this.config.groups)),r=s.splice(t,1);s.splice(e,0,r[0]);var o={placeId:this.query.placeId,segmentPriorityList:[]};s.forEach((function(e,t){t>0&&(e.priority=t,o.segmentPriorityList.push({id:e.id,priority:t}))})),this.config.groups=s,Object(w["x"])(o).then((function(e){a.handleGetGroup(),a.dragTableKey=Math.random(),setTimeout((function(){a.initSort()}),1e3)}))},aaa:function(e){var t=this.config.groups.findIndex((function(t){return e.id===t.id}));this.vueType=!this.vueType,this.query.groupId=e.id,this.group=this.config.groups[t],this.handleGetSource()},editTime:function(){var e=this;this.adverting.placeId=this.query.placeId,Object(w["g"])(this.adverting).then((function(t){if(200!==t.code)return e.$message.error(t.msg)}))},handleCommand:function(e,t){0===t?this.handleDelete(e):this.handleUpdateFlowGroups(e)},addFlowGroups:function(){var e=this;this.isEditShow=!0,this.isAdd=!0,this.addOrEdit=!0,this.flowGroupsForm={name:"",sdk:"",equipVal:"",channelVal:"",areaVal:"",dateVal:"",timeVal:[["00:00","24:00"]],brandVal:[],nettypeVal:[],sysVersion:"",appVersion:"",childchannelVal:"",custVal:"",installTime:"",installTimeType:"h",sdkSelect:"0",equipSelect:"0",channelSelect:"0",areaSelect:"0",dateSelect:"0",timeSelect:"0",brandSelect:"0",nettypeSelect:"0",sysVersionSelect:"0",appVersionSelect:"0",childchannelSelect:"0",custSelect:"0",installTimeSelect:"2"},this.flowGroupsDialog=!1,this.equipmentId=!1,this.channelShow=!1,this.areaShow=!1,this.sdkShow=!1,this.dateShow=!1,this.timeShow=!1,this.brandShow=!1,this.nettypeShow=!1,this.sysVersionShow=!1,this.appVersionShow=!1,this.childchannelShow=!1,this.custShow=!1,this.installTimeShow=!1,this.flowGroupsDialog=!0,Object(w["e"])().then((function(t){e.adverteData=t.data}))},getGdverteTime:function(){var e=this,t=this.query.placeId,a=new FormData;a.append("placeId",t),Object(w["f"])(a).then((function(t){e.adverting=t.data}))},initAppOptions:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(S["c"])().then((function(t){e.appOptionsAll=t.data,e.appOptions=e.appOptionsAll," "===e.query.appId&&e.appOptions.length>0&&(e.query.appId=e.appOptions[0].id),e.initPlaceOptions()}));case 2:case"end":return t.stop()}}),t)})))()},getTemplateTypeList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["y"])().then((function(t){e.templateTypeOptions=t.data}));case 2:case"end":return t.stop()}}),t)})))()},handleSelectApp:function(e){this.query.appId!=e&&(this.query.appId=e,this.initPlaceOptions(e),this.$router.push({path:"/traffic/aggregate",query:{appId:this.query.appId,placeId:this.query.placeId}}).catch((function(){})))},initPlaceOptions:function(e){var t=this;this.showRuleText=!1,Object(I["c"])(this.query.appId).then((function(e){if(t.group.id="default",t.placeOptions=e.data,t.placeOptions.length>0){t.handleGetSource();var a=!1;t.placeOptions.forEach((function(e){t.query.placeId!==e.id||(a=!0)})),a||(t.query.placeId=t.placeOptions[0].id,t.config&&t.config.groups.length>0&&(t.query.groupId=t.config.groups[0].id))}else t.group={name:"默认分组",id:""},t.query.placeId=" ",t.group={}}))},handleSelectPlace:function(e){this.query.placeId=e,this.$router.push({path:"/traffic/aggregate",query:{appId:this.query.appId,placeId:e}}).catch((function(){})),this.handleGetGroup(e)},handleGetGroup:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showRuleText=!1,e.query.groupId="",t.next=4,Object(w["v"])(e.query.placeId).then((function(t){if(e.config=t.data,e.config&&e.config.groups.length>0&&(e.query.groupId=e.config.groups[0].id,e.group=e.config.groups[0],e.handleGroup("default"),e.handleGetSource(),e.config.groups[0]&&e.config.groups[0].segmentRule.length>0)){var a=e.config.groups[0].segmentRule;e.temp.groupId=e.config.groups[0].id,e.handelArrToStr(a)}e.group.id="default"}));case 4:case"end":return t.stop()}}),t)})))()},handelArrToStr:function(e){var t=this;e||(e=[]);var a=e.length,s="";e.forEach((function(e,r){if(1==e.ruleId?s+="渠道号":2==e.ruleId?s+="SDK版本号":3==e.ruleId?s+="设备ID":4==e.ruleId?s+="地区":5==e.ruleId?s+="日期":6==e.ruleId?s+="时间":7==e.ruleId?s+="设备品牌":8==e.ruleId?s+="网络类型":9==e.ruleId?s+="系统类型":10==e.ruleId?s+="应用版本":11==e.ruleId?s+="子渠道":12==e.ruleId&&(s+="自定义规则"),0==e.ruleType)s+=" 包括 ";else if(1==e.ruleType)s+=" 不包括 ";else if(2==e.ruleType)s+=" 大于 ";else if(3==e.ruleType)return void(s+=" 小于 ");4==e.ruleId?e.ruleContent.forEach((function(e,a,r){var o=e.split("-");o.forEach((function(e,a){if("CHN"===e)s+="中国/";else{var r=t.areaList.find((function(t){return t.value===e})).lable;s+=2===a?r:r+"/"}})),a+1!=r.length&&(s+=",")})):s+=e.ruleContent.filter(Boolean).join(","),r!=a-1&&(s+="    &     ")})),s=s.substring(0,s.length),this.groupRuleStr=s,s=""},handleGetSource:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=JSON.parse(JSON.stringify(e.query)),""!=a.appId&&""!=a.placeId&&""!=a.groupId&&""!=a.testId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(I["c"])(a.appId);case 5:if(s=t.sent,r=!1,o=s.data?s.data:[],o.forEach((function(e){e.id==a.placeId&&(r=!0)})),r){t.next=11;break}return t.abrupt("return");case 11:if(e.prevquery.appId!=a.appId||e.prevquery.placeId!=a.placeId||e.prevquery.groupId!=a.groupId||e.prevquery.testId!=a.testId){t.next=13;break}return t.abrupt("return");case 13:e.prevquery=JSON.parse(JSON.stringify(a)),e.getTableData(a);case 15:case"end":return t.stop()}}),t)})))()},getTableData:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r,o,n,c,u,p,d,m,h,f,g,b,y,v;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.listLoading=!0,s=null,r=null,e.appId&&(t.appOptions.forEach((function(t){t.id===e.appId&&(s=t.name,r=t.iconUrl)})),t.appName=s,t.iconUrl=r),o=null,e.placeId&&(t.placeOptions.forEach((function(t){t.id===e.placeId&&(o=t.name)})),t.placeName=o),a.next=8,Object(w["w"])(e);case 8:n=a.sent,c=[],n.data.bottomSourceList.forEach((function(e){e=Object(l["a"])(Object(l["a"])({},e.reportData),e),c.push(e)})),u=c.filter((function(e){return"S"==e.sts})),p=c.filter((function(e){return"A"==e.sts})),p.forEach((function(e){t.$set(e,"edit",!1),e.oriBidfloor=e.bidfloor})),t.list=[],d=[],m=[],n.data.sources.map((function(e){return t.$set(e,"edit",!1),e.oriBidfloor=e.bidfloor,"A"===e.sts?(e.type="selectSource",d.push(e)):(e.type="unSelectSource",m.push(e)),e})),n.data.reportData.type="all",n.data.reportData.name=d.length+"个代码位开启",n.data.reportData.advRequestFilledRate=n.data.reportData.requestFilledRate,n.data.reportData.advRequest=n.data.reportData.request,t.list.push(n.data.reportData),h=JSON.parse(JSON.stringify(d)),f=[],g=[],d.forEach((function(e,t){1!=e.settleType&&2!=e.settleType&&3!=e.settleType||(g.push(t),f.push(h[t]))})),g.reverse().forEach((function(e,t){h.splice(e,1)})),t.fallNum=h.length,t.biddingNum=d.length-t.fallNum,t.config.groups.forEach((function(a,s){a.id==e.groupId&&a.abTests.forEach((function(a,s){a.testId==e.testId&&(t.concurrentNum=a.concurrentNum)}))})),h.forEach((function(e,t){e.index=t})),f.forEach((function(e,t){e.type="settle"})),d=[].concat(f,Object(i["a"])(h)),d.filter((function(e){e=Object(l["a"])(Object(l["a"])({},e.reportData),e),t.list.push(e)})),t.lineIndex=d.length+1+p.length,p.forEach((function(e){e.type="openbottom",t.list.push(e)})),t.list.push({text:"未启用（"+m.length+"个代码位)"}),b=JSON.parse(JSON.stringify(m)),y=[],v=[],m.forEach((function(e,t){1!=e.settleType&&2!=e.settleType&&3!=e.settleType||(v.push(t),y.push(b[t]))})),v.reverse().forEach((function(e){b.splice(e,1)})),y.forEach((function(e,t){e.type="settle"})),m=[].concat(y,Object(i["a"])(b)),m.filter((function(e){e=Object(l["a"])(Object(l["a"])({},e.reportData),e),t.list.push(e)})),u.forEach((function(e){e.type="closebottom",t.list.push(e)})),t.listTemp=JSON.parse(JSON.stringify(t.list)),t.listLoading=!1,t.$bus.$emit("totop");case 50:case"end":return a.stop()}}),a)})))()},arraySpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(t===this.lineIndex&&1===a)return[1,5]},getSTime:function(e){this.showRuleText=!1,this.query.dateStart=e[0],this.query.dateEnd=e[1],this.getTableData(this.query)},handleSelectGroup:function(e){this.query.groupId=e,this.handleGroup(e)},handleGroup:function(e){var t=this;this.showRuleText=!1,this.expand=!0,this.config.groups.forEach((function(a){a.id!==e&&e||(t.group=a,a.abTests.length>0?(t.abTestList=a.abTests,t.query.testId=a.abTests[0].testId,t.testName=a.abTests[0].testName,t.testType=a.abTests[0].type):(t.abTestList=[],t.query.testId="",t.testName="",t.testType=0))})),this.temp.groupId=e,this.handelArrToStr(this.group.segmentRule),this.handleGetSource()},handleBatchAdd:function(){this.$router.push({path:"/traffic/batchadd",query:{appId:this.query.appId,placeId:this.query.placeId,testId:this.query.testId,groupId:this.query.groupId}})},handleBatchExport:function(){this.$router.push({path:"/traffic/batchexport",query:{appId:this.query.appId,placeId:this.query.placeId,testId:this.query.testId,groupId:this.query.groupId}})},handleAdd:function(){var e=this,t=this.placeOptions.find((function(t){return t.id===e.query.placeId})).position;this.active=null,this.appId=this.query.appId,this.dialogSourceType=0;var a=this.temp.groupId;this.temp={appId:"",appKey:"",platAccountId:"",platAppId:"",accessType:"",platId:"",groupId:a,position:t,hotspot:"S",hotspotType:1,lrMargin:16,tbMargin:16,settleType:0,floatingRate:0,templateIds:[],isAutoDrawing:"0",isAutoSorting:"0",isBottom:"0",isBlack:"0",sensitivity:50,closeButtonType:"A",countDown:5,buttonSize:50},this.id=null,this.accessType="",this.dialogSourceVisible=!0},handleUpdateFlowGroups:function(e){this.query.groupId=e.id,this.addOrEdit=!1,this.isAdd=!1,this.isEditShow=!1,this.flowGroupsDialog=!0,this.flowGroupsForm.name=e.name,this.equipmentId=!1,this.channelShow=!1,this.areaShow=!1,this.sdkShow=!1,this.dateShow=!1,this.timeShow=!1,this.brandShow=!1,this.nettypeShow=!1,this.sysVersionShow=!1,this.appVersionShow=!1,this.childchannelShow=!1,this.custShow=!1,this.installTimeShow=!1,this.disPoseAddOrEdit(e)},Advanced:function(e){this.temp=JSON.parse(JSON.stringify(e)),this.temp.groupId=this.query.groupId,this.dialogSourceVisible=!0,this.isAdvanced=!0},handleUpdate:function(e){var t=this;this.getAccounts(e.platId),this.id="",1==e.settleType||2==e.settleType||3==e.settleType?e.isBidding=!0:e.isBidding=!1,1==e.platId?this.showDownload=!0:this.showDownload=!1,11==e.platId?this.showSlotId=!0:this.showSlotId=!1,this.settleType=0,this.platList.forEach((function(a){e.platId==a.id&&(t.settleType=a.settleType)})),this.isEdit=1,this.active=e.platId,this.appId=this.query.appId,this.dialogSourceType=1,this.temp=JSON.parse(JSON.stringify(e)),this.temp.groupId=this.query.groupId,this.temp.position=this.placeOptions.find((function(e){return e.id===t.query.placeId})).position,this.dialogSourceVisible=!0},disPoseAddOrEdit:function(e){var t=this;e.segmentRule.forEach((function(e,a){if(1==e.ruleId)t.channelShow=!0,t.flowGroupsForm.channelVal=e.ruleContent.join(","),t.flowGroupsForm.channelSelect=e.ruleType+"";else if(2==e.ruleId)t.sdkShow=!0,t.flowGroupsForm.sdk=e.ruleContent.join(","),t.flowGroupsForm.sdkSelect=e.ruleType+"";else if(3==e.ruleId)t.equipmentId=!0,t.flowGroupsForm.equipVal=e.ruleContent.join(","),t.flowGroupsForm.equipSelect=e.ruleType+"";else if(4==e.ruleId){t.areaShow=!0;var s=[];e.ruleContent.forEach((function(e){var t=e.split("-");s.push(t)})),t.flowGroupsForm.areaVal=s,t.flowGroupsForm.areaSelect=e.ruleType+""}else 5==e.ruleId?(t.dateShow=!0,t.flowGroupsForm.dateSelect=e.ruleType+"",e.ruleContent.forEach((function(e,a){var s=e.substring(0,10),r=e.substring(11,21);0===a?(t.pickDate[0].push(s),t.pickDate[0].push(r)):(t.pickDate[a]=[],t.pickDate[a].push(s),t.pickDate[a].push(r))})),t.flowGroupsForm.dateVal=t.pickDate):6===e.ruleId?(t.timeShow=!0,t.flowGroupsForm.timeSelect=e.ruleType+"",e.ruleContent.forEach((function(e,a){var s=e.substring(0,5),r=e.substring(6,11);0===a?(t.flowGroupsForm.timeVal[0]=[],t.flowGroupsForm.timeVal[0].push(s),t.flowGroupsForm.timeVal[0].push(r)):(t.flowGroupsForm.timeVal[a]=[],t.flowGroupsForm.timeVal[a].push(s),t.flowGroupsForm.timeVal[a].push(r))}))):7===e.ruleId?(t.brandShow=!0,t.flowGroupsForm.brandVal=e.ruleContent,t.flowGroupsForm.brandSelect=e.ruleType+""):8===e.ruleId?(t.nettypeShow=!0,t.flowGroupsForm.nettypeVal=e.ruleContent,t.flowGroupsForm.nettypeSelect=e.ruleType+""):9===e.ruleId?(t.sysVersionShow=!0,t.flowGroupsForm.sysVersion=e.ruleContent.join(","),t.flowGroupsForm.sysVersionSelect=e.ruleType+""):10===e.ruleId?(t.appVersionShow=!0,t.flowGroupsForm.appVersion=e.ruleContent.join(","),t.flowGroupsForm.appVersionSelect=e.ruleType+""):11===e.ruleId?(t.childchannelShow=!0,t.flowGroupsForm.childchannelVal=e.ruleContent.join(","),t.flowGroupsForm.childchannelSelect=e.ruleType+""):12===e.ruleId?(t.custShow=!0,t.flowGroupsForm.custVal=e.ruleContent[0],t.flowGroupsForm.custSelect=e.ruleType+""):13==e.ruleId&&(t.installTimeShow=!0,t.flowGroupsForm.installTime=e.ruleContent[0],t.flowGroupsForm.installTimeType=e.ruleContent[1],t.flowGroupsForm.installTimeSelect=e.ruleType+"")}))},handleSubmitForm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isAdvanced?(s=e,e.temp.placeId=e.query.placeId,e.$refs.form.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return a=Object(l["a"])({groupId:s.query.groupId,placeId:s.query.placeId,testId:s.query.testId},s.temp),e.next=4,Object(w["d"])(a);case 4:r=e.sent,200==r.code&&(s.$message.success("修改成功！"),s.dialogSourceVisible=!1,s.getTableData(s.query),s.isAdvanced=!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):(a=e,e.temp.placeId=e.query.placeId,e.query.slotId=e.temp.slotId,e.$refs.form.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(s){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s){t.next=2;break}return t.abrupt("return");case 2:s&&e.editSource(a);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()},editSource:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.temp.testId=e.query.testId,s={},1===e.dialogSourceType?s={id:e.temp.id,groupId:e.temp.groupId,platPlaceId:e.temp.platPlaceId,placeId:e.temp.placeId}:0===e.dialogSourceType&&(s={groupId:e.temp.groupId,platPlaceId:e.temp.platPlaceId,placeId:e.temp.placeId}),a.next=5,Object(w["l"])(s);case 5:if(r=a.sent,o=!1,10001!=r.code){a.next=12;break}return a.next=10,t.$confirm(r.msg,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o=!0})).catch((function(){}));case 10:a.next=13;break;case 12:200==r.code&&(o=!0);case 13:if(0!==e.dialogSourceType||!o){a.next=18;break}return a.next=16,Object(w["c"])(e.temp).then((function(t){Object(m["Message"])({message:"操作成功！",type:"success",duration:5e3}),e.dialogSourceVisible=!1,e.getTableData(e.query),e.temp.isDownload="A",e.temp.slotId="",e.temp.templateIds=[],e.temp.settleType=0}));case 16:a.next=21;break;case 18:if(1!==e.dialogSourceType||!o){a.next=21;break}return a.next=21,Object(w["F"])(e.temp).then((function(t){Object(m["Message"])({message:"操作成功！",type:"success",duration:5e3}),e.dialogSourceVisible=!1,e.getTableData(e.query),e.temp.isDownload="A",e.temp.slotId="",e.temp.settleType=0,e.temp.templateIds=[]}));case 21:case"end":return a.stop()}}),a)})))()},handleAggregateSetting:function(){var e=this;this.vueType=!this.vueType,this.getGdverteTime(),setTimeout((function(){e.initSort()}),1e3)},goBack:function(){this.handleGetGroup(),this.vueType=!this.vueType},handleUpdateSourceSts:function(e,t){var a=this;e.sts=t,e.groupId=this.query.groupId,e.testId=this.query.testId,Object(w["E"])(e).then((function(){a.getTableData(a.query)}))},cancelEdit:function(e){e.bidfloor=e.oriBidfloor,e.edit=!1},confirmEdit:function(e){var t=this;e.edit=!1,e.oriBidfloor=e.bidfloor,e.groupId=this.query.groupId,e.testId=this.query.testId,Object(w["D"])(e).then((function(){t.getTableData(t.query)}))},getAccounts:function(e){var t=this;Object(x["c"])(e).then((function(e){t.accounts=e.data}))},expandTable:function(e){var t=this;this.expand?this.listTemp.forEach((function(e){if(e.sts&&"S"===e.sts){var a=t.listTemp.findIndex((function(e){return"S"===e.sts}));t.listTemp=JSON.parse(JSON.stringify(t.listTemp)),t.listTemp.splice(a,1)}})):(this.listTemp=JSON.parse(JSON.stringify(this.list)),this.chooseAllS=!1),this.expand=!this.expand},itemClick:function(e,t){this.isBorder=!0,this.activeIndex=t,this.channelShow=!1,this.areaShow=!1,this.equipmentId=!1,this.sdkShow=!1,this.dateShow=!1,this.timeShow=!1,this.brandShow=!1,this.nettypeShow=!1,this.sysVersionShow=!1,this.appVersionShow=!1,this.childchannelShow=!1,this.custShow=!1,this.installTimeShow=!1,this.pickDate=[[]],this.flowGroupsForm.name=e.name,this.disPoseAddOrEdit(e)},closeGroups:function(){this.$refs.flowGroupsRef.resetFields(),this.channelShow=!1,this.areaShow=!1,this.equipmentId=!1,this.sdkShow=!1,this.dateShow=!1,this.timeShow=!1,this.brandShow=!1,this.isBorder=!1,this.nettypeShow=!1,this.sysVersionShow=!1,this.appVersionShow=!1,this.childchannelShow=!1,this.custShow=!1,this.installTimeShow=!1,this.pickDate=[[]],this.flowGroupsForm={name:"",equipVal:"",channelVal:"",areaVal:"",sdk:"",dateVal:"",timeVal:[["00:00","24:00"]],brandVal:[],nettypeVal:[],sysVersion:"",appVersion:"",childchannelVal:"",custVal:"",installTime:"",installTimeType:"h",sdkSelect:"0",equipSelect:"0",channelSelect:"0",areaSelect:"0",dateSelect:"0",timeSelect:"0",brandSelect:"0",nettypeSelect:"0",sysVersionSelect:"0",appVersionSelect:"0",childchannelSelect:"0",custSelect:"0",installTimeSelect:"2"}},Adver:function(e){var t=this;this.$confirm("此操作将永久删除该代码位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(w["n"])({id:e.id}).then((function(e){return 200!==e.code?t.$message.error("删除失败"):(t.getTableData(t.query),t.$message.success("删除成功"))}))})).catch((function(){}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该条流量分组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(w["m"])({groupId:e.id}).then((function(e){if(200!=e.code)return t.$message.error("删除失败");t.handleGetGroup(),t.$message.success("删除成功")}))})).catch((function(){}))},addRules:function(e){switch(e){case"1":this.sdkShow=!0;break;case"2":this.equipmentId=!0;break;case"3":this.channelShow=!0;break;case"4":this.areaShow=!0;break;case"5":this.dateShow=!0;break;case"6":this.timeShow=!0;break;case"7":this.brandShow=!0;break;case"8":this.nettypeShow=!0;break;case"9":this.sysVersionShow=!0;break;case"10":this.appVersionShow=!0;break;case"11":this.childchannelShow=!0;break;case"12":this.custShow=!0;break;case"13":this.installTimeShow=!0;break;default:return}},closeInput:function(e){switch(e){case 1:this.sdkShow=!1,this.flowGroupsForm.sdk="";break;case 2:this.equipmentId=!1,this.flowGroupsForm.equipVal="";break;case 3:this.channelShow=!1,this.flowGroupsForm.channelVal="";break;case 4:this.areaShow=!1,this.flowGroupsForm.areaVal="";break;case 5:this.dateShow=!1,this.flowGroupsForm.dateVal="";break;case 6:this.timeShow=!1,this.flowGroupsForm.timeVal=[["00:00","24:00"]];break;case 7:this.brandShow=!1,this.flowGroupsForm.brandVal=[];break;case 8:this.nettypeShow=!1,this.flowGroupsForm.nettypeVal=[];break;case 9:this.sysVersionShow=!1,this.flowGroupsForm.sysVersion="";break;case 10:this.appVersionShow=!1,this.flowGroupsForm.appVersion="";break;case 11:this.childchannelShow=!1,this.flowGroupsForm.childchannelVal="";break;case 12:this.custShow=!1,this.flowGroupsForm.custVal="";break;case 13:this.custShow=!1,this.flowGroupsForm.installTime="",this.flowGroupsForm.installTimeType="h";break;default:return}},handelAddOrEdit:function(){var e=this;this.$refs.flowGroupsRef.validate((function(t){if(t){if(!e.equipmentId&&!e.channelShow&&!e.sdkShow&&!e.areaShow&&!e.dateShow&&!e.timeShow&&!e.brandShow&&!e.nettypeShow&&!e.sysVersionShow&&!e.appVersionShow&&!e.childchannelShow&&!e.custShow&&!e.installTimeShow)return e.$message.error("至少选择一条规则");var a;if(e.addOrEdit){var s=e.query.placeId;a={placeId:s,name:e.flowGroupsForm.name,segmentRule:[]},e.handelAddOEditData(a),Object(w["b"])(a).then((function(t){if(200!==t.code)return e.$message.err(t.msg);e.handleGetGroup(),e.flowGroupsDialog=!1,e.$message.success("添加成功")}))}else{var r=e.query,o=r.placeId,i=r.groupId;a={placeId:o,groupId:i,name:e.flowGroupsForm.name,segmentRule:[]},e.handelAddOEditData(a),Object(w["o"])(a).then((function(t){if(200!==t.code)return e.$message.err(t.msg);e.handleGetGroup(),e.flowGroupsDialog=!1,e.$message.success("编辑成功")}))}}}))},handelAddOEditData:function(e){if(this.sdkShow){var t={ruleId:2,ruleType:this.flowGroupsForm.sdkSelect-0,ruleContent:this.flowGroupsForm.sdk.split(",")};e.segmentRule.push(t)}if(this.channelShow){var a={ruleId:1,ruleType:this.flowGroupsForm.channelSelect-0,ruleContent:this.flowGroupsForm.channelVal.split(",")};e.segmentRule.push(a)}if(this.areaShow){var s="";this.flowGroupsForm.areaVal.forEach((function(e,t,a){if(t+1!=a.length){var r=e.join("-");s=s+r+","}else{var o=e.join("-");s+=o}}));var r={ruleId:4,ruleType:this.flowGroupsForm.areaSelect-0,ruleContent:s.split(",")};e.segmentRule.push(r)}if(this.equipmentId){var o={ruleId:3,ruleType:this.flowGroupsForm.equipSelect-0,ruleContent:this.flowGroupsForm.equipVal.split(",")};e.segmentRule.push(o)}if(this.dateShow){var i=[];this.pickDate.forEach((function(e){if(e.length>0){var t=e[0]+"-"+e[1];i.push(t)}}));var l={ruleId:5,ruleType:this.flowGroupsForm.dateSelect-0,ruleContent:i};e.segmentRule.push(l)}if(this.timeShow){var n=[];this.flowGroupsForm.timeVal.forEach((function(e){if(e.length>0){var t=e[0]+"-"+e[1];n.push(t)}}));var c={ruleId:6,ruleType:this.flowGroupsForm.timeSelect-0,ruleContent:n};e.segmentRule.push(c)}if(this.brandShow){var u={ruleId:7,ruleType:this.flowGroupsForm.brandSelect-0,ruleContent:this.flowGroupsForm.brandVal};e.segmentRule.push(u)}if(this.nettypeShow){var p={ruleId:8,ruleType:this.flowGroupsForm.nettypeSelect-0,ruleContent:this.flowGroupsForm.nettypeVal};e.segmentRule.push(p)}if(this.sysVersionShow){var d;if("2"==this.flowGroupsForm.sysVersionSelect||"3"==this.flowGroupsForm.sysVersionSelect){var m=this.flowGroupsForm.sysVersion.split(/[,，]/g);d=[m[0]]}else d=this.flowGroupsForm.sysVersion.split(/[,，]/g);var h={ruleId:9,ruleType:this.flowGroupsForm.sysVersionSelect-0,ruleContent:d};e.segmentRule.push(h)}if(this.appVersionShow){var f;if("2"==this.flowGroupsForm.appVersionSelect||"3"==this.flowGroupsForm.appVersionSelect){var g=this.flowGroupsForm.appVersion.split(/[,，]/g);f=[g[0]]}else f=this.flowGroupsForm.appVersion.split(/[,，]/g);var b={ruleId:10,ruleType:this.flowGroupsForm.appVersionSelect-0,ruleContent:f};e.segmentRule.push(b)}if(this.childchannelShow){var y={ruleId:11,ruleType:this.flowGroupsForm.childchannelSelect-0,ruleContent:this.flowGroupsForm.childchannelVal.split(",")};e.segmentRule.push(y)}if(this.custShow){var v={ruleId:12,ruleType:this.flowGroupsForm.custSelect-0,ruleContent:[this.flowGroupsForm.custVal]};e.segmentRule.push(v)}if(this.installTimeShow){var w={ruleId:13,ruleType:this.flowGroupsForm.installTimeSelect-0,ruleContent:[this.flowGroupsForm.installTime,this.flowGroupsForm.installTimeType]};e.segmentRule.push(w)}},editInputVal:function(e){var t=this;if(this.allowOperate){if(e.impressFreqHour<0||e.impressFreqDay<0||e.impressInterval<0)return this.$message.error("最小值为1");var a=this.query.placeId,s=e.id,r=e.concurrentNum,o=e.impressFreqHour,i=e.impressFreqDay,l=e.impressInterval;o=Number(e.impressFreqHour),i=Number(e.impressFreqDay),l=Number(e.impressInterval);var n={placeId:a,groupId:s,concurrentNum:r,impressFreqHour:o,impressFreqDay:i,impressInterval:l};Object(w["p"])(n).then((function(e){if(200!=e.code)return t.$message.error(e.msg)}))}},closeSourceDialog:function(){this.isAdvanced=!1,this.active=0,this.platAppId="",this.temp.isDownload="A",this.temp.slotId="",this.isAdvanced=!1,this.dialogSourceVisible=!1},getPlatAppId:function(e){var t=this;this.platAppId=e,this.platList.forEach((function(e){t.temp.platId==e.id&&(t.platName=e.name)}))},getPlatName:function(e){var t="";return this.platList.forEach((function(a){e==a.id&&(t=a.name)})),t},getAccessType:function(e){this.accessType=e},getSettleType:function(e){this.settleType=e},getId:function(e){this.id=e},initAreaptions:function(){var e=this;Object(w["u"])().then((function(t){e.areaOptions=t.data,e.areaList=e.treeToList(e.areaOptions)}))},treeToList:function(e){var t=[];return e.forEach((function(e){e.children.forEach((function(e){t.push({lable:e.label,value:e.value}),e.children.forEach((function(e){var a=e.label,s=e.value;t.push({lable:a,value:s})}))}))})),t},handleClickAdd:function(){this.addAbtest=!0,this.testquery={placeId:this.query.placeId,groupId:this.query.groupId,testName:"",type:0,abTestList:[{groupName:"A组",proportion:50,testId:"",sts:"A",intervalList:[[1,1]]},{groupName:"B组",proportion:50,testId:"",sts:"A",intervalList:[[1,1]]}]},this.showTestDialog=!0},closeTestDialog:function(){this.showTestDialog=!1,this.testquery={placeId:"",groupId:"",testName:"",type:"",abTestList:[{groupName:"A组",proportion:50,sts:"A",intervalList:[[1,1]]},{groupName:"B组",proportion:50,sts:"A",intervalList:[[1,1]]}]}},handleSubmitTestForm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["v"])(e.query.placeId);case 2:a=t.sent,e.config=a.data,e.config.groups.forEach((function(t){t.id===e.query.groupId&&(e.group=JSON.parse(JSON.stringify(t)),e.abTestList=t.abTests,e.query.testId=e.abTestList[0].testId,e.testType=t.abTests[0].type)})),e.handleGroup(e.query.groupId),s=JSON.parse(JSON.stringify(e.query)),e.query=s,e.addABTest=null,e.showTestDialog=!1,e.getTableData(e.query);case 11:case"end":return t.stop()}}),t)})))()},changeabtest:function(e){this.query.testId=e,this.getTableData(this.query)},editABTest:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["q"])({groupId:e.query.groupId,placeId:e.query.placeId});case 2:a=t.sent,e.abTestList=a.data,e.testquery={placeId:e.query.placeId,groupId:e.query.groupId,testName:e.testName,type:e.testType,abTestList:JSON.parse(JSON.stringify(e.abTestList))},e.addAbtest=!1,e.showTestDialog=!0;case 7:case"end":return t.stop()}}),t)})))()},linkToABData:function(){this.$router.push({path:"/traffic/abTestData",query:{appId:this.query.appId,placeId:this.query.placeId,groupId:this.query.groupId}})},endABTest:function(){this.endquery={groupId:this.group.id,placeId:this.query.placeId,testId:""},this.showEndTestDialog=!0},closeEndTestDialog:function(){this.showEndTestDialog=!1,this.endquery={groupId:"",placeId:"",testId:""}},handleSubmitEndTest:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.endtestdialog.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(w["B"])(e.endquery);case 4:if(s=t.sent,200===s.code){t.next=7;break}return t.abrupt("return");case 7:return e.$message.success("操作成功！"),e.showEndTestDialog=!1,t.next=11,Object(w["v"])(e.query.placeId);case 11:r=t.sent,e.config=r.data,e.config.groups.forEach(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.id===e.query.groupId&&(e.group=JSON.parse(JSON.stringify(a)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.abTestList=[],e.query.testId="default",e.getTableData(e.query);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},handleSettingArgs:function(){var e=this,t=0,a=0,s=0,r=1,o=1,i=0,l="S",n="s";this.config.groups.forEach((function(c,u){c.id===e.query.groupId&&(e.config.groups[u].abTests&&e.config.groups[u].abTests.length>0?e.config.groups[u].abTests.forEach((function(c,p){c.testId===e.query.testId&&(t=+e.config.groups[u].abTests[p].concurrentNum,a=+e.config.groups[u].abTests[p].timeout/1e3,s=+e.config.groups[u].abTests[p].allTime/1e3,r=+e.config.groups[u].abTests[p].apiTimeout/1e3,o=+e.config.groups[u].abTests[p].clientTimeout/1e3,i=+e.config.groups[u].abTests[p].cacheTime,l=e.config.groups[u].abTests[p].cacheSts,n=e.config.groups[u].abTests[p].quickRequest)})):(t=+e.config.groups[u].concurrentNum,a=+e.config.groups[u].timeout/1e3,s=+e.config.groups[u].allTime/1e3,r=+e.config.groups[u].apiTimeout/1e3,o=+e.config.groups[u].clientTimeout/1e3,i=+e.config.groups[u].cacheTime,l=e.config.groups[u].cacheSts,n=e.config.groups[u].quickRequest))})),this.settingquery={groupId:this.query.groupId,placeId:this.query.placeId,testId:this.query.testId,concurrentNum:t,timeout:a,allTime:s,apiTimeout:r,clientTimeout:o,cacheTime:i,cacheSts:l,quickRequest:n},this.showSettingDialog=!0},closeSettingDialog:function(){this.showSettingDialog=!1,this.settingquery={groupId:"",placeId:"",testId:"",concurrentNum:"",timeout:"",allTime:"",apiTimeout:"",clientTimeout:"",cacheTime:"",cacheSts:"",quickRequest:""}},handleSetting:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s,r,o,i,n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=1e3*+e.settingquery.timeout,s=1e3*+e.settingquery.allTime,r=1e3*+e.settingquery.apiTimeout,o=1e3*+e.settingquery.clientTimeout,i=JSON.parse(JSON.stringify(e.settingquery)),i=Object(l["a"])(Object(l["a"])({},i),{},{timeout:a,allTime:s,apiTimeout:r,clientTimeout:o}),t.next=8,Object(w["A"])(i);case 8:if(n=t.sent,200===n.code){t.next=11;break}return t.abrupt("return");case 11:return e.$message.success("操作成功！"),t.next=14,Object(w["v"])(e.query.placeId);case 14:c=t.sent,e.config=c.data,e.getTableData(e.query),e.showSettingDialog=!1;case 18:case"end":return t.stop()}}),t)})))()},tableRowClassName:function(e){e.row;var t=e.rowIndex,a=this.biddingNum+1,s=a+this.fallNum-1;if(t<=s&&t>=a){var r=t-a+1;if(Math.ceil(r/this.concurrentNum)%2===0)return"group1-row";if(Math.ceil(r/this.concurrentNum)%2===1)return"group2-row"}return""},getplatrow:function(e){this.editplatquerytemp=JSON.parse(JSON.stringify(e)),this.editplatquerytemp.platId=this.editplatquerytemp.id},handleSelectable:function(e,t){return!(!e.name||e.name.includes("个代码位开启"))},handleChooseA:function(e,t){var a=this;this.listTemp.forEach((function(s,r){s.sts==t&&a.$refs.tableref.toggleRowSelection(a.listTemp[r],e)}))},handleSelectionChange:function(e){this.selectTableColumn=JSON.parse(JSON.stringify(e))},handleEditSts:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.selectTableColumn.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,[];case 4:if(a=t.sent,s=[],e.selectTableColumn.forEach((function(e){"A"==e.sts?s.push(e.id):"S"==e.sts&&a.push(e.id)})),r=null,!(s.length>0)){t.next=13;break}return t.next=11,e.batchChangeSts(s,"S");case 11:r=t.sent,0==a.length&&200==r.code&&(e.$message.success("操作成功！"),e.getTableData(e.query));case 13:if(o=null,!(a.length>0)){t.next=19;break}return t.next=17,e.batchChangeSts(a,"A");case 17:o=t.sent,200==o.code&&(e.$message.success("操作成功！"),e.getTableData(e.query));case 19:case"end":return t.stop()}}),t)})))()},batchChangeSts:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(w["j"])({sts:t,groupId:a.query.groupId,placeId:a.query.placeId,testId:a.query.testId,ids:e});case 2:return r=s.sent,s.abrupt("return",r);case 4:case"end":return s.stop()}}),s)})))()},proving:function(e){var t=e.target.value;if(-1!=t.indexOf(".")){var a=t.substr(t.indexOf(".")+1);-1!=a.indexOf(".")&&(t=t.substr(0,t.indexOf(".")+a.indexOf(".")+1))}e.target.value=t.replace(/[^\d^\.]+/g,"")},showNewAccount:function(){this.addAccountQuery={platId:this.temp.platId,openApiStatus:0,isDebug:"0"},this.addAccountDialog=!0},handlePlatForm:function(){var e=this;this.$refs.account_form.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=3;break}return t.next=3,Object(x["b"])(e.addAccountQuery).then((function(t){Object(m["Message"])({message:"创建成功!",type:"success",duration:5e3}),e.addAccountDialog=!1,e.getAccounts(e.addAccountQuery.platId)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},copyId:function(e){var t=Object(h["a"])(e);!1===t?Object(m["Message"])({message:"不支持复制",type:"error",duration:2e3}):Object(m["Message"])({message:"复制成功",type:"success",duration:2e3})},getProportion:function(e){if("A"==e.sts){var t=0;return e.intervalList.forEach((function(e){var a=e[1]-e[0]+1;t+=a})),t}return 0}}},L=R,E=(a("423c"),Object(A["a"])(L,r,o,!1,null,"4cf71633",null));t["default"]=E.exports},d084:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return l}));a("caad");function s(e){return 1==e?"RoleId":3==e?"Access-Key":7==e?"Public-Key":6==e?"Access-Key":11==e?"skey":17==e?"Access-Key":void 0}function r(e){return 13==e?"client_secret":14==e?"api_Key":12==e?"appSecret":11==e?"secret":"Security-Key"}function o(e){return 1==e||2==e?"ID":13==e?"client_id":14==e?"user_id":12==e?"devid":void 0}function i(e){var t=[1,2,12,13,14];return!!t.includes(e)}function l(e){var t=[1,3,7,6,11,17];return!!t.includes(e)}},da59:function(e,t,a){},e398:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-abtest-container"},[e.showTestDialog?a("el-dialog",{attrs:{title:e.addAbtest?"添加A/B分组":"A/B分组编辑",visible:e.showTestDialog,"destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showTestDialog=t},close:e.closeTestDialog}},[a("el-form",{ref:"testdialog",attrs:{model:e.testquery,"label-width":"150px",rules:e.testRules}},[a("el-form-item",{attrs:{label:"应用:"}},[a("span",[e._v(e._s(e.appName))])]),a("el-form-item",{attrs:{label:"广告位:"}},[a("span",[e._v(e._s(e.placeName))])]),a("el-form-item",{attrs:{label:"流量分组:"}},[a("span",[e._v(e._s(e.group.name))])]),a("el-form-item",{attrs:{label:"A/B测试名称:",prop:"testName"}},[a("el-input",{staticStyle:{width:"20rem"},attrs:{placeholder:"请输入A/B测试名称"},model:{value:e.testquery.testName,callback:function(t){e.$set(e.testquery,"testName",t)},expression:"testquery.testName"}})],1),a("el-form-item",{attrs:{label:"流量划分形式",prop:"type"}},[a("el-radio-group",{attrs:{disabled:!e.addAbtest},model:{value:e.testquery.type,callback:function(t){e.$set(e.testquery,"type",t)},expression:"testquery.type"}},[a("el-radio",{attrs:{label:0}},[e._v(" 请求 ")]),a("el-radio",{attrs:{label:1}},[e._v(" 用户 ")])],1)],1),a("el-form-item",{attrs:{label:"创建分组:"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAddTest}},[e._v(" 添加分组 ")])],1),a("el-table",{staticStyle:{width:"42rem","margin-left":"3rem"},attrs:{border:"",data:e.testquery.abTestList.filter((function(e){return"default"!==e.testId})),fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"分组名称",fixed:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{prop:"abTestList."+t.$index+".groupName",rules:{required:!0,message:"分组名称不能为空",trigger:"blur"},"label-width":"0"}},[a("el-input",{staticStyle:{width:"10rem"},attrs:{size:"mini",required:!0,placeholder:"请填写分组名称"},model:{value:t.row.groupName,callback:function(a){e.$set(t.row,"groupName",a)},expression:"scope.row.groupName"}})],1)]}}],null,!1,2896028185)}),1==e.testquery.type?a("el-table-column",{attrs:{label:"比例",fixed:"",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getProportion(t.$index)+"%")+" ")]}}],null,!1,276516870)}):e._e(),a("el-table-column",{attrs:{label:0==e.testquery.type?"比例":"用户区间",fixed:"",prop:"proportion",align:"center",width:"250px","render-header":e.testrenderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[0==e.testquery.type?a("el-form-item",{attrs:{"label-width":"0",prop:"abTestList."+t.$index+".proportion",rules:[{required:!0,message:"比例不能为空",trigger:"blur"},,{required:!0,trigger:"blur",validator:e.proportionValidator}]}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",prop:"proportion",placeholder:"请填写比例"},model:{value:t.row.proportion,callback:function(a){e.$set(t.row,"proportion",e._n(a))},expression:"scope.row.proportion"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1):e._e(),1==e.testquery.type?a("div",[e._l(t.row.intervalList,(function(s,r){return[a("div",{key:r,staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{"label-width":"0px",label:"",prop:"abTestList."+t.$index+".intervalList["+r+"][0]",rules:[{required:!0,trigger:"blur",validator:e.intervalListValidator}]}},[a("el-input-number",{staticStyle:{width:"100px","margin-left":"5px"},attrs:{size:"mini",max:100,min:1,placeholder:""},model:{value:t.row.intervalList[r][0],callback:function(a){e.$set(t.row.intervalList[r],0,e._n(a))},expression:"scope.row.intervalList[index][0]"}})],1),a("el-form-item",{attrs:{"label-width":"0px",label:"",prop:"abTestList."+t.$index+".intervalList["+r+"][1]",rules:[{required:!0,trigger:"blur",validator:e.intervalListValidator}]}},[a("el-input-number",{staticStyle:{width:"100px","margin-left":"5px"},attrs:{size:"mini",max:100,min:1,placeholder:""},model:{value:t.row.intervalList[r][1],callback:function(a){e.$set(t.row.intervalList[r],1,e._n(a))},expression:"scope.row.intervalList[index][1]"}})],1),e.testquery.abTestList[t.$index]["intervalList"].length>1?a("span",{staticClass:"closeIcon el-icon-circle-close",staticStyle:{"line-height":"35px",color:"red",cursor:"pointer","margin-left":"5px"},on:{click:function(a){return e.closeintervalList(t.$index,r)}}}):e._e()],1)]})),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.handleAddintervalList(t.$index)}}},[e._v(" 添加区间 ")])],2):e._e()]}}],null,!1,3203210188)}),a("el-table-column",{attrs:{width:"100",label:"操作",fixed:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[!t.row.testId&&0!==t.$index&&e.testquery.abTestList.length>2?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.closeTest(t.$index)}}},[e._v(" 删除 ")]):e._e(),t.row.testId&&(e.testDisabled||"A"!==t.row.sts)?a("el-switch",{staticStyle:{height:"20px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"A","inactive-value":"S"},model:{value:t.row.sts,callback:function(a){e.$set(t.row,"sts",a)},expression:"scope.row.sts"}}):e._e()]}}],null,!1,1025424802)})],1)],1),e.allowOperate?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.closeTestDialog}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleSubmitTestForm}},[e._v("确定")])],1):e._e()],1):e._e()],1)},r=[],o=a("1da1"),i=(a("96cf"),a("e9c4"),a("d3b7"),a("159b"),a("a434"),a("4e82"),a("8280")),l=a("f4f7"),n={name:"AddABTestDialog",components:{tips:i["a"]},props:{showTestDialogTemp:{type:Boolean,default:!1},addAbtest:{type:Boolean,default:!1},testqueryTemp:{type:Object,default:{placeId:"",groupId:"",testName:"",type:0,abTestList:[{groupName:"A组",proportion:50,testId:"",sts:"A",intervalList:[[1,1]]},{groupName:"B组",proportion:50,testId:"",sts:"A",intervalList:[[1,1]]}]}},appName:{default:""},placeName:{default:""},group:{type:Object,default:function(){}}},data:function(){return{testRules:{testName:[{required:!0,message:"请填写测试名称",trigger:"blur"}],type:[{required:!0,message:"请选择区分形式",trigger:"blur"}]},testquery:{},showTestDialog:!1,testDisabled:!1}},computed:{allowOperate:function(){return this.$store.getters.allowOperate}},watch:{testqueryTemp:{handler:function(e){this.testquery=JSON.parse(JSON.stringify(e))},deep:!0},showTestDialogTemp:{handler:function(e){this.showTestDialog=e}},testquery:{handler:function(e){var t=0;e.abTestList.forEach((function(e){"A"===e.sts&&t++})),this.testDisabled=t>2},deep:!0}},methods:{getProportion:function(e){var t=0;return this.testquery.abTestList[e].intervalList.forEach((function(e){var a=e[1]-e[0]+1;t+=a})),t},handleAddintervalList:function(e){this.testquery.abTestList[e].intervalList.push([1,1])},closeintervalList:function(e,t){this.testquery.abTestList[e].intervalList.splice(t,1)},closeTestDialog:function(){this.$emit("closeTestDialog")},handleAddTest:function(){if(this.addAbtest)this.testquery.abTestList.push({groupName:"",proportion:0,sts:"A",intervalList:[[1,1]]});else{var e=this.testquery.abTestList.length;this.testquery.abTestList.splice(e-1,0,{groupName:"",proportion:0,sts:"A",intervalList:[[1,1]]})}},closeTest:function(e){this.testquery.abTestList.splice(e,1)},handleSubmitTestForm:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.testdialog.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var s,r,o,i,n,c,u,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:if(s=0,r=JSON.parse(JSON.stringify(e.testquery)),r.abTestList.forEach((function(e){if("A"===e.sts){var t=+e.proportion;s=+s+t}})),1!=r.type){t.next=17;break}if(o=[],i=0,n=0,r.abTestList.forEach((function(e,t){"A"===e.sts?e.intervalList&&e.intervalList.forEach((function(e,t){n++,o.push(e[0]),o.push(e[1]),i+=e[1]-e[0]})):e.intervalList})),o=o.sort((function(e,t){return e-t})),c=o.length,!e.addAbtest){t.next=15;break}if(i+n==100&&1==o[0]&&100==o[c-1]){t.next=15;break}return t.abrupt("return",e.$message.error("输入区间有误！"));case 15:t.next=19;break;case 17:if(100===s){t.next=19;break}return t.abrupt("return",e.$message.error("比例总和必须为100"));case 19:if(!e.addAbtest){t.next=26;break}return t.next=22,Object(l["a"])(r);case 22:u=t.sent,200===u.code&&(e.$message.success("添加成功！"),e.$emit("editSuccess")),t.next=30;break;case 26:return t.next=28,Object(l["C"])(r);case 28:p=t.sent,200===p.code&&(e.$message.success("配置成功！"),e.$emit("editSuccess"));case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},proportionValidator:function(e,t,a){+t<0?a(new Error("比例不能为负数！")):"number"!==typeof+t?a(new Error("比例必须为数字！")):a()},intervalListValidator:function(e,t,a){return t?a():a(new Error("请输入区间值！"))},testrenderHeader:function(e,t){t.column,t.$index;return 0==this.testquery.type?this.$createElement("span","比例"):1==this.testquery.type?this.$createElement("tips",{props:{content:"对用户进行分组，每个分组配置一个数值区间，各分组数值区间不可以交叉。",title:"用户区间",isShow:!0}}):void 0}}},c=n,u=a("2877"),p=Object(u["a"])(c,s,r,!1,null,null,null);t["a"]=p.exports},f4f7:function(e,t,a){"use strict";a.d(t,"v",(function(){return r})),a.d(t,"w",(function(){return o})),a.d(t,"x",(function(){return i})),a.d(t,"E",(function(){return l})),a.d(t,"D",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"F",(function(){return u})),a.d(t,"b",(function(){return p})),a.d(t,"o",(function(){return d})),a.d(t,"n",(function(){return m})),a.d(t,"m",(function(){return h})),a.d(t,"e",(function(){return f})),a.d(t,"p",(function(){return g})),a.d(t,"f",(function(){return b})),a.d(t,"g",(function(){return y})),a.d(t,"y",(function(){return v})),a.d(t,"u",(function(){return w})),a.d(t,"k",(function(){return S})),a.d(t,"a",(function(){return I})),a.d(t,"q",(function(){return x})),a.d(t,"C",(function(){return k})),a.d(t,"B",(function(){return T})),a.d(t,"A",(function(){return _})),a.d(t,"z",(function(){return q})),a.d(t,"l",(function(){return O})),a.d(t,"t",(function(){return A})),a.d(t,"h",(function(){return D})),a.d(t,"j",(function(){return C})),a.d(t,"i",(function(){return F})),a.d(t,"s",(function(){return G})),a.d(t,"r",(function(){return $})),a.d(t,"d",(function(){return V}));var s=a("b775");function r(e){return Object(s["a"])({url:"/aggregate/group",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/aggregate/source",method:"post",data:e})}function i(e){return Object(s["a"])({url:"/aggregate/changePriority",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/aggregate/updateSource",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/aggregate/updateSource",method:"post",data:e})}function c(e){return Object(s["a"])({url:"/aggregate/addSource",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/aggregate/updateSource",method:"post",data:e})}function p(e){return Object(s["a"])({url:"/aggregate/addGroup",method:"post",data:e})}function d(e){return Object(s["a"])({url:"/aggregate/updateGroup",method:"post",data:e})}function m(e){return Object(s["a"])({url:"/aggregate",method:"Delete",params:e})}function h(e){return Object(s["a"])({url:"/aggregate/deleteGroupById",method:"Delete",params:e})}function f(e){return Object(s["a"])({url:"/aggregate/templateList",method:"post",data:e})}function g(e){return Object(s["a"])({url:"/aggregate/updateImpress",method:"post",data:e})}function b(e){return Object(s["a"])({url:"/place/timeInfo",method:"post",data:e})}function y(e){return Object(s["a"])({url:"/place/updateTimeInfo",method:"post",data:e})}function v(){return Object(s["a"])({url:"/aggregate/templateTypeList",method:"get"})}function w(){return Object(s["a"])({url:"/common/area_list",method:"get"})}function S(){return Object(s["a"])({url:"/common/brandList",method:"get"})}function I(e){return Object(s["a"])({url:"/abtest/add",method:"post",data:e})}function x(e){return Object(s["a"])({url:"/abtest/abtest_list",method:"post",data:e})}function k(e){return Object(s["a"])({url:"/abtest/update",method:"post",data:e})}function T(e){return Object(s["a"])({url:"/abtest/shutdownTest",method:"post",data:e})}function _(e){return Object(s["a"])({url:"/abtest/update_args",method:"post",data:e})}function q(){return Object(s["a"])({url:"/creative/template_list",method:"get"})}function O(e){return Object(s["a"])({url:"/aggregate/checkPlatPlaceId",method:"post",data:e})}function A(e){return Object(s["a"])({url:"/app/getAppById",method:"post",data:e})}function D(e){return Object(s["a"])({url:"/aggregate/batchAddSource",method:"post",data:e})}function C(e){return Object(s["a"])({url:"/aggregate/batchUpdateSourceSts",method:"post",data:e})}function F(e){return Object(s["a"])({url:"/aggregate/batchReplicationConfig",method:"post",data:e})}function G(e){return Object(s["a"])({url:"/abtest/getAbTestReport",method:"post",data:e})}function $(e){return Object(s["a"])({url:"/abtest/getAbTestEchartsReport",method:"post",data:e})}function V(e){return Object(s["a"])({url:"/aggregate/adsourceAdvancedSetup",method:"post",data:e})}},fcc1:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a("1da1"),r=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("4de4"),a("ac1f"),a("1276"),a("00b4"),a("5319"),a("4d63"),a("2c3e"),a("25f0"),a("b0c0"),a("5f72"));var o=function(e){var t=new FileReader;return new Promise((function(a,s){t.onload=function(e){a(t.result)},t.readAsText(e,"utf-8")}))};function i(e){return l.apply(this,arguments)}function l(){return l=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,s,i,l,n,c,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:"未命名.xls",e.next=3,o(t);case 3:s=e.sent;try{i=JSON.parse(s),l=i.rspMsg||i.msg,r["Notification"].warning({title:"提示",message:l+""})}catch(p){n=window.URL.createObjectURL(t),c=document.createElement("a"),c.download=a,c.href=n,c.click(),URL.revokeObjectURL(n)}case 5:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}},fec7:function(e,t,a){"use strict";a("3b83")}}]);