(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3560c6c7"],{"011f":function(t,e,s){},"21f2":function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));var n=s("24e5"),o=s.n(n),r="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAOfRWRy4W0URnPurEe18T+Vs9xjlyGPeb6MLfcgoTCMK46OkC3IdQ53Gt6cRFAbk/OvoJ4cQWZMd8GYSxaN4oUUCAwEAAQ==";function a(t){var e=new o.a;return e.setPublicKey(r),e.encrypt(t)}},"2c76":function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));s("4d90"),s("99af");var n=function(t,e){var s=new Date(t),n=s.getFullYear(),o=(s.getMonth()+1+"").padStart("2","0"),r=(s.getDate()+"").padStart("2","0"),a=(s.getHours()+"").padStart("2","0"),i=(s.getMinutes()+"").padStart("2","0"),c=(s.getSeconds()+"").padStart("2","0");return"YYYY-MM-DD hh:mm:ss"==e?"".concat(n,"-").concat(o,"-").concat(r," ").concat(a,":").concat(i,":").concat(c):"YYYY/MM/DD hh:dd:ss"==e?"".concat(n,"/").concat(o,"/").concat(r," ").concat(a,":").concat(i,":").concat(c):"YYYY-MM-DD_hhmmss"==e?"".concat(n,"-").concat(o,"-").concat(r,"_").concat(a).concat(i).concat(c):"".concat(n,"-").concat(o,"-").concat(r)}},"441c":function(t,e,s){"use strict";s.d(e,"e",(function(){return o})),s.d(e,"b",(function(){return r})),s.d(e,"f",(function(){return a})),s.d(e,"d",(function(){return i})),s.d(e,"c",(function(){return c})),s.d(e,"a",(function(){return l}));var n=s("b775");function o(t){return Object(n["a"])({url:"/plat/pager",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/plat/add",method:"post",data:t})}function a(t){return Object(n["a"])({url:"/plat/update",method:"post",data:t})}function i(){return Object(n["a"])({url:"/plat/list",method:"get"})}function c(t){return Object(n["a"])({url:"/plat/accounts/"+t,method:"post"})}function l(t){return Object(n["a"])({url:"/plat/addDefinedPlat",method:"post",data:t})}},"44e5":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._e(),s("el-card",[s("el-row",{staticClass:"box",attrs:{gutter:10}},[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-input",{attrs:{clearable:"",placeholder:1==t.subAccount.userType?"请输入账号名称/登录邮箱/公司名称":"请输入账号名称/登录邮箱"},on:{clear:t.clear},nativeOn:{keyup:function(e){return t.trimName("subAccount","name")}},model:{value:t.subAccount.name,callback:function(e){t.$set(t.subAccount,"name",e)},expression:"subAccount.name"}})],1)]),1==t.subAccount.userType&&"ADMIN"==t.$store.getters.roles[0]||0==t.subAccount.userType&&"BUSINESS_DIRECTOR"!=t.$store.getters.roles[0]&&"OPERATOR_DIRECTOR"!=t.$store.getters.roles[0]?s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-select",{attrs:{placeholder:"选择权限",clearable:""},on:{clear:t.clear},model:{value:t.subAccount.role,callback:function(e){t.$set(t.subAccount,"role",e)},expression:"subAccount.role"}},[t._l(t.options,(function(t,e){return[s("el-option",{key:e,attrs:{label:t.label,value:t.value}})]}))],2)],1)]):t._e(),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-select",{attrs:{placeholder:"状态",clearable:""},on:{clear:t.clear},model:{value:t.subAccount.sts,callback:function(e){t.$set(t.subAccount,"sts",e)},expression:"subAccount.sts"}},t._l(t.options1,(function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)]),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-button",{attrs:{type:"primary"},on:{click:t.searchAccount}},[t._v(" 搜索 ")])],1)])],1)],1),s("el-card",{staticClass:"table"},[s("div",{staticClass:"top"},[1===t.subAccount.userType&&"ADMIN"!=t.$store.getters.roles[0]?s("div",{staticClass:"show"},[s("p",[t._v("维度")]),s("el-checkbox",{model:{value:t.showArr.app,callback:function(e){t.$set(t.showArr,"app",e)},expression:"showArr.app"}},[s("span",[t._v("应用")])]),s("el-checkbox",{model:{value:t.showArr.subAccountVoList,callback:function(e){t.$set(t.showArr,"subAccountVoList",e)},expression:"showArr.subAccountVoList"}},[s("span",[t._v("子账户")])]),s("el-checkbox",{model:{value:t.showArr.mainApp,callback:function(e){t.$set(t.showArr,"mainApp",e)},expression:"showArr.mainApp"}},[s("span",[t._v("主营应用")])]),s("el-checkbox",{model:{value:t.showArr.learnWay,callback:function(e){t.$set(t.showArr,"learnWay",e)},expression:"showArr.learnWay"}},[s("span",[t._v("了解途径")])])],1):t._e(),s("el-button",{staticClass:"addAccount",attrs:{type:"primary"},on:{click:t.addAccount}},[t._v(" 新增账户 ")])],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],key:t.tableKey,attrs:{data:t.AccountTable,"header-cell-style":{background:"#f7f8fa",color:"#000"}}},["ADMIN"!==t.$store.state.user.roles[0]&&0!=t.subAccount.userType?s("el-table-column",{attrs:{align:"center",prop:"company",label:"公司名称","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(s.company?s.company:"-")+" ")]}}],null,!1,2991151475)}):t._e(),s("el-table-column",{attrs:{align:"center",prop:"name",label:"账号名称","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(s.name)+" ")]}}])}),s("el-table-column",{attrs:{align:"center",prop:"loginId",label:"登陆邮箱",width:"180"}}),s("el-table-column",{attrs:{align:"center",prop:"role",label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(2==s.role?"管理员":3==s.role?"运营":4==s.role?"报表":5==s.role?"审核":6==s.role?"商务":7==s.role?"媒体":8==s.role?"商务总监":9==s.role?"运营总监":10==s.role?"技术":11==s.role?"财务":12==s.role?"管理层":13==s.role?"高级运营":"")+" ")]}}])}),t.showArr.subAccountVoList&&1==t.subAccount.userType||0==t.subAccount.userType&&("BUSINESS_DIRECTOR"==t.$store.state.user.roles[0]||"OPERATOR_DIRECTOR"==t.$store.state.user.roles[0]||"BUSINESS"==t.$store.state.user.roles[0])?s("el-table-column",{attrs:{align:"center",width:"100px",label:1==t.subAccount.userType?"子账户":"BUSINESS_DIRECTOR"==t.$store.getters.roles[0]?"客户数":"OPERATOR_DIRECTOR"==t.$store.getters.roles[0]?"应用数":"客户数"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"subaccountchild",on:{click:function(s){return t.handleCheck(e.row)}}},[t._v(" "+t._s(t.getsubAccountVoNum(e.row)))])]}}],null,!1,26411414)}):t._e(),"ADMIN"!==t.$store.state.user.roles[0]&&0!=t.subAccount.userType?s("el-table-column",{attrs:{align:"center",prop:"contact",label:"联系人"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(s.contact?s.contact:"-")+" ")]}}],null,!1,1172972147)}):t._e(),"ADMIN"!=t.$store.state.user.roles[0]&&"OPERATOR_DIRECTOR"!=t.$store.state.user.roles[0]?s("el-table-column",{attrs:{align:"center",prop:"mobile",label:"手机号码",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(s.mobile?s.mobile:"-")+" ")]}}],null,!1,449968851)}):t._e(),t.showArr.app?s("el-table-column",{attrs:{align:"center",prop:"appList",width:"60px",label:"应用"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(s.appList?s.appList.length+"个":"0个")+" ")]}}],null,!1,32968055)}):t._e(),"ADMIN"!==t.$store.state.user.roles[0]&&2===t.subAccount.role?s("el-table-column",{attrs:{align:"center",prop:"businessName",label:"负责商务"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(s.businessName?s.businessName:"-")+" ")]}}],null,!1,2348375923)}):t._e(),t.showArr.mainApp?s("el-table-column",{attrs:{align:"center",prop:"mainApp",label:"主营应用"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(s.mainApp?s.mainApp:"-")+" ")]}}],null,!1,551385203)}):t._e(),t.showArr.learnWay?s("el-table-column",{attrs:{align:"center",prop:"mainApp",label:"了解途径"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(null==s.learnWay||0==s.learnWay?"-":1==s.learnWay?t.title+"官网":2==s.learnWay?t.title+"公众号":3==s.learnWay?t.title+"商务":4==s.learnWay?"朋友推荐":5==s.learnWay?"网络文章":6==s.learnWay?"其他":"")+" ")]}}],null,!1,3731783148)}):t._e(),s("el-table-column",{attrs:{prop:"sts",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("div",["A"===n.sts?s("el-tag",[t._v(" 启用 ")]):t._e(),"S"===n.sts?s("el-tag",{attrs:{type:"danger"}},[t._v(" 停用 ")]):t._e()],1),void 0]}}])}),"BUSINESS"!=t.$store.getters.roles[0]?s("el-table-column",{attrs:{prop:"sts",label:"操作",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("div",{staticClass:"tabledo"},[s("el-tooltip",{attrs:{content:"编辑",placement:"top",effect:"light"}},[s("div",{staticClass:"doicon",on:{click:function(e){return t.editAccount(n)}}},[s("svg-icon",{staticClass:"svgicon",staticStyle:{color:"#3685df"},attrs:{"icon-class":"edit"}})],1)]),s("el-tooltip",{attrs:{content:"设置权限",placement:"top",effect:"light"}},[2!==n.role||"SUPER_ADMIN"!=t.$store.getters.roles[0]&&"MANAGEMENT"!=t.$store.getters.roles[0]&&"TECHNOLOGY"!=t.$store.getters.roles[0]&&"OPERATOR_DIRECTOR"!=t.$store.getters.roles[0]&&"BUSINESS_DIRECTOR"!=t.$store.getters.roles[0]?t._e():s("div",{staticClass:"filter-item doicon",on:{click:function(e){return t.setPermissions(n)}}},[s("svg-icon",{staticClass:"svgicon power",staticStyle:{color:"rgb(0, 47, 167)"},attrs:{"icon-class":"power"}})],1)]),s("el-tooltip",{attrs:{content:"删除",placement:"top",effect:"light"}},["MANAGEMENT"!=t.$store.getters.roles[0]?s("div",{staticClass:"filter-item doicon",on:{click:function(e){return t.delAccount(n)}}},[s("svg-icon",{staticClass:"svgicon",staticStyle:{color:"#ff0000"},attrs:{"icon-class":"delete"}})],1):t._e()])],1)]}}],null,!1,3769622862)}):t._e()],1),s("el-pagination",{staticStyle:{margin:"30px 0 0 0"},attrs:{"current-page":t.subAccount.page,"page-sizes":[5,10,20],"page-size":t.subAccount.limit,layout:"total,sizes,prev,pager,next,jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),s("el-dialog",{attrs:{title:t.isAdd?"添加账号":"编辑账号",visible:t.accountDialogVisible,width:"50%"},on:{"update:visible":function(e){t.accountDialogVisible=e},close:t.closeDialog}},[s("el-form",{ref:"ruleForm",attrs:{rules:t.rules,model:t.accountForm,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"账号名称",prop:"name"}},[s("el-input",{attrs:{maxlength:"30",placeholder:"请输入账号名称","show-word-limit":""},model:{value:t.accountForm.name,callback:function(e){t.$set(t.accountForm,"name",e)},expression:"accountForm.name"}})],1),s("el-form-item",{attrs:{label:"登录邮箱",prop:t.isAdd?"loginId":""}},[s("el-input",{attrs:{disabled:!t.isAdd,placeholder:"请输入登录邮箱"},model:{value:t.accountForm.loginId,callback:function(e){t.$set(t.accountForm,"loginId",e)},expression:"accountForm.loginId"}})],1),t.isAdd?s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{placeholder:"密码",type:"password","show-password":""},model:{value:t.accountForm.password,callback:function(e){t.$set(t.accountForm,"password",e)},expression:"accountForm.password"}})],1):t._e(),s("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[s("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.accountForm.mobile,callback:function(e){t.$set(t.accountForm,"mobile",e)},expression:"accountForm.mobile"}})],1),s("el-form-item",{attrs:{label:"角色",prop:"role"}},[s("el-radio-group",{model:{value:t.accountForm.role,callback:function(e){t.$set(t.accountForm,"role",e)},expression:"accountForm.role"}},["SUPER_ADMIN"==t.$store.getters.roles[0]||"TECHNOLOGY"==t.$store.getters.roles[0]||"MANAGEMENT"==t.$store.getters.roles[0]||"BUSINESS_DIRECTOR"==t.$store.getters.roles[0]||"OPERATOR_DIRECTOR"==t.$store.getters.roles[0]?s("el-radio",{staticClass:"radio_item",attrs:{disabled:t.disabled,label:2}},[t._v(" 管理员 ")]):t._e(),t.isShow&&"BUSINESS_DIRECTOR"!=t.$store.getters.roles[0]&&"OPERATOR_DIRECTOR"!=t.$store.getters.roles[0]?s("el-radio",{staticClass:"radio_item",attrs:{label:3}},[t._v(" 运营 ")]):t._e(),t.isShow&&"BUSINESS_DIRECTOR"!=t.$store.getters.roles[0]&&"OPERATOR_DIRECTOR"!=t.$store.getters.roles[0]?s("el-radio",{staticClass:"radio_item",attrs:{label:4}},[t._v(" 报表 ")]):t._e(),t.isShow&&1===t.$store.getters.creative?s("el-radio",{staticClass:"radio_item",attrs:{label:5}},[t._v(" 审核 ")]):t._e(),t._e(),1==t.$store.state.user.mediaAccess?s("el-radio",{staticClass:"radio_item",attrs:{disabled:t.disabled,label:7}},[t._v(" 媒体 ")]):t._e()],1)],1),6==t.accountForm.role?s("el-form-item",{attrs:{label:"管理员",prop:"adminIdList"}},[s("el-select",{attrs:{placeholder:"请选择管理员","collapse-tags":"",multiple:""},model:{value:t.accountForm.adminIdList,callback:function(e){t.$set(t.accountForm,"adminIdList",e)},expression:"accountForm.adminIdList"}},t._l(t.adminListForEdit,(function(t){return s("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),2==t.accountForm.role||7==t.accountForm.role||3==t.accountForm.role||4==t.accountForm.role||13==t.accountForm.role?s("el-form-item",{attrs:{label:"应用范围",prop:""}},[s("el-select",{attrs:{placeholder:"选择应用",multiple:"","collapse-tags":""},on:{change:t.getSelectDep},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}},[s("div",{staticStyle:{"padding-left":"10px"}},[s("el-checkbox",{style:t.selfstyle,on:{change:t.selectAllThing},model:{value:t.checkedThing,callback:function(e){t.checkedThing=e},expression:"checkedThing"}},[t._v(" 全选 ")])],1),t._l(t.departments,(function(t,e){return s("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],2)],1):t._e(),2==t.accountForm.role?s("el-form-item",{attrs:{label:"商务",prop:"businessId"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.accountForm.businessId,callback:function(e){t.$set(t.accountForm,"businessId",e)},expression:"accountForm.businessId"}},t._l(t.businessIdOptions,(function(t,e){return s("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),t.isAdd?t._e():s("el-form-item",{attrs:{label:"状态",prop:"sts"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.accountForm.sts,callback:function(e){t.$set(t.accountForm,"sts",e)},expression:"accountForm.sts"}},t._l(t.options1,(function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)],1),"MANAGEMENT"!=t.$store.getters.roles[0]?s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.accountDialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.handelAddAccount}},[t._v("确 定")])],1):t._e()],1),s("el-dialog",{attrs:{title:"设置权限",visible:t.permissionsDialogVisible,width:"50%"},on:{"update:visible":function(e){t.permissionsDialogVisible=e},close:t.closePermissionsDialog}},[s("el-form",{attrs:{"label-width":"130px"}},[s("el-form-item",{attrs:{label:"素材审核权限"}},[s("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.permissionsForm.creative,callback:function(e){t.$set(t.permissionsForm,"creative",e)},expression:"permissionsForm.creative"}})],1),s("el-form-item",{attrs:{label:"跳过按钮统一"}},[s("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.permissionsForm.skip,callback:function(e){t.$set(t.permissionsForm,"skip",e)},expression:"permissionsForm.skip"}})],1),s("el-form-item",{attrs:{label:"媒体权限"}},[s("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.permissionsForm.mediaAccess,callback:function(e){t.$set(t.permissionsForm,"mediaAccess",e)},expression:"permissionsForm.mediaAccess"}})],1),s("el-form-item",{attrs:{label:"聚合管理权限"}},[s("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.permissionsForm.aggregate,callback:function(e){t.$set(t.permissionsForm,"aggregate",e)},expression:"permissionsForm.aggregate"}})],1),s("el-form-item",{attrs:{label:"广告源"}},[s("div",[s("el-checkbox-group",{attrs:{size:"small"},model:{value:t.platNames,callback:function(e){t.platNames=e},expression:"platNames"}},t._l(t.platOptions,(function(t,e){return s("el-checkbox",{key:e,attrs:{label:t.name}})})),1)],1)])],1),"MANAGEMENT"!=t.$store.getters.roles[0]?s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.permissionsDialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.handlePermissions}},[t._v("确 定")])],1):t._e()],1),s("el-dialog",{attrs:{title:1==t.subAccount.userType?"子账户":"BUSINESS_DIRECTOR"==t.$store.getters.roles[0]?"客户数":"OPERATOR_DIRECTOR"==t.$store.getters.roles[0]?"应用数":"ADMIN"==t.$store.getters.roles[0]?"子账户":"",visible:t.subAccountChild,width:"50%"},on:{"update:visible":function(e){t.subAccountChild=e}}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.childRow}},[s("el-table-column",{attrs:{align:"center",prop:"name",label:"账号名称","min-width":"150px"}}),s("el-table-column",{attrs:{align:"center",prop:"loginId",label:"登录邮箱","min-width":"150px"}}),s("el-table-column",{attrs:{align:"center",prop:"role",label:"角色","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("div",[2===n.role?s("span",[t._v("管理员")]):t._e(),3===n.role?s("span",[t._v("运营")]):t._e(),4===n.role?s("span",[t._v("报表")]):t._e(),5===n.role?s("span",[t._v("审核")]):t._e(),6===n.role?s("span",[t._v("商务")]):t._e(),7===n.role?s("span",[t._v("媒体")]):t._e()])]}}])})],1)],1)],1)},o=[],r=s("1da1"),a=(s("96cf"),s("ac1f"),s("00b4"),s("5319"),s("d81d"),s("e9c4"),s("99af"),s("d3b7"),s("159b"),s("b0c0"),s("7db0"),s("b0b8")),i=s("b562"),c=s("441c"),l=s("c443"),u=s("2c76"),p=s("21f2"),d={data:function(){var t=/(?=.*[\d])/,e=/(?=.*[a-z])/,s=/(?=.*[A-Z])/,n=/(?=.*[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、])/,o=function(o,r,a){""===r?a(new Error("新密码不能为空！请重新输入")):r.length>16?a(new Error("密码长度不超过16个字符。")):r.length<8?a(new Error("密码不低于8位，包含大小字母、数字、特殊符号")):/^[a-zA-Z\d]{1}/.test(r)?t.test(r)&&e.test(r)&&s.test(r)&&n.test(r)?a():a(new Error("密码不低于8位，包含大小字母、数字、特殊符号!")):a(new Error("密码必须以英文大小写字母或数字开头！"))};return{isLoading:!1,subAccount:{name:"",loginId:"",role:2,sts:"",businessId:null,page:1,limit:10,userType:1},total:0,childRow:[],showArr:{app:!1,subAccountVoList:!1,mainApp:!1,learnWay:!1},subAccountChild:!1,accountDialogVisible:!1,permissionsDialogVisible:!1,AccountTable:[],platOptions:[],businessIdOptions:[],platNames:[],isAdd:!0,isShow:!0,disabled:!1,options:[],editBeforeRow:{},accountForm:{name:"",loginId:"",password:"",appList:[],role:2,sts:"",businessId:null},permissionsForm:{userId:null,platIds:[],skip:0,creative:0,mediaAccess:0},checkedThing:!1,department:[],selfstyle:{textAlign:"right",paddingRight:"10px"},options1:[{value:"A",label:"启用"},{value:"S",label:"暂停"}],tableData:[],departments:[],adminListForEdit:[],rules:{name:[{required:!0,message:"请输入账号名称",trigger:"blur"}],loginId:[{required:!0,message:"请填写邮箱,作为登录账号名",trigger:"blur"},{message:"邮箱无效",trigger:"blur",pattern:/^[\w\.]+@[a-z0-9]+[\.a-z]+\.[a-z]{2,3}[\.]?$/}],role:[{required:!0,message:"请选择权限",trigger:"blur"}],sts:[{required:!0,message:"请选择状态",trigger:"blur"}],password:[{required:!0,trigger:"blur",validator:o}]},tableKey:""+new Date}},computed:{title:function(){return this.$store.getters.title}},watch:{"accountForm.role":{handler:function(t,e){7==t||2==t?this.getAppListByRole():7!=e&&2!=e||this.getAppList()}}},mounted:function(){"BUSINESS"==this.$store.getters.roles[0]&&(this.subAccount.userType=1),this.subAccount.loginId=this.$store.state.user.loginId,"SUPER_ADMIN"!==this.$store.getters.roles[0]&&"TECHNOLOGY"!==this.$store.getters.roles[0]&&"MANAGEMENT"!==this.$store.getters.roles[0]||(this.options.unshift({value:3,label:"运营"}),this.options.unshift({value:4,label:"报表"}),this.options.unshift({value:6,label:"商务"}),this.options.unshift({value:11,label:"财务"}),this.options.unshift({value:8,label:"商务总监"}),this.options.unshift({value:9,label:"运营总监"}),this.options.unshift({value:10,label:"技术"}),this.options.unshift({value:12,label:"管理层"})),"ADMIN"==this.$store.getters.roles[0]&&(this.options.unshift({value:3,label:"运营"}),this.options.unshift({value:4,label:"报表"}),1==this.$store.state.user.mediaAccess&&this.options.unshift({value:7,label:"媒体"}),1==this.$store.state.user.creative&&this.options.unshift({value:5,label:"审核"}),this.subAccount.role="",this.accountForm.role=""),this.getAccountList(),this.getAppList(),this.initPlatOptions(),this.initBusinessIdOptions()},methods:{getAdminListForEdit:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(t.subAccountVoList&&t.subAccountVoList.length>0)){s.next=6;break}return s.next=3,Object(a["d"])({role:2,businessId:t.id});case 3:n=s.sent,s.next=9;break;case 6:return s.next=8,Object(a["d"])({role:2,businessId:""});case 8:n=s.sent;case 9:e.adminListForEdit=n.data;case 10:case"end":return s.stop()}}),s)})))()},handleChangeUser:function(t){for(var e in this.showArr)this.showArr[e]=!1;this.subAccount.role=t?2:"",this.getAccountList()},clear:function(){},trimName:function(t,e){this[t][e]=this[t][e].replace(/\s+/g,"")},getAccountList:function(){var t=this;this.isLoading=!0,this.tableKey=""+new Date,Object(a["a"])(this.subAccount).then((function(e){200==e.code&&(t.AccountTable=e.data.items,t.total=e.data.total)})),setTimeout((function(){t.isLoading=!1,t.$bus.$emit("totop")}),1e3)},getAppList:function(){var t=this;Object(i["c"])().then((function(e){t.departments=e.data}))},getAppListByRole:function(){var t=this,e=null;this.accountForm.id&&(e=this.accountForm.id),Object(i["e"])({role:this.accountForm.role,id:e}).then((function(e){t.departments=e.data}))},addAccount:function(){this.isShow=!0,this.disabled=!1,this.accountDialogVisible=!0,this.isAdd=!0},editAccount:function(t){t.subAccountVoList&&t.subAccountVoList.length>0&&(t.adminIdList=t.subAccountVoList.map((function(t){return t.id}))),this.isAdd=!1,this.accountDialogVisible=!0,t=JSON.parse(JSON.stringify(t)),2==t.role?(this.disabled=!0,this.isShow=!1):(this.disabled=!1,this.isShow=!0),this.accountForm=JSON.parse(JSON.stringify(t)),this.editBeforeRow=JSON.parse(JSON.stringify(t)),this.department=t.appList},searchAccount:function(){"SUPER_ADMIN"!==this.$store.getters.roles[0]&&(this.subAccount.loginId=this.$store.state.user.loginId),this.subAccount.page=1,this.getAccountList()},delAccount:function(t){var e=this;this.$confirm("你确定要删除这条子账户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["c"])({id:t.id}).then((function(t){200==t.code&&(e.getAccountList(),e.$message.success("删除成功"))}))})).catch((function(){}))},handelAddAccount:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(e)if(t.isAdd){var s=Object(p["a"])(t.accountForm.password),n=JSON.parse(JSON.stringify(t.accountForm));n.password=s,Object(a["b"])(n).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(s){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200==s.code){e.next=2;break}return e.abrupt("return",t.$message.error(s.msg));case 2:if(t.$message.success("添加成功"),t.getAccountList(),t.initBusinessIdOptions(),t.accountDialogVisible=!1,n=s.data.id,!t.accountForm.businessId){e.next=13;break}return o=Object(u["a"])(Date.now(),"YYYY-MM-DD hh:mm:ss"),e.next=11,Object(l["a"])({type:1,content:"<p>亲爱的媒介同学：<br/><br/></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;新入驻".concat(t.title,"平台的开发者，注册邮箱为：").concat(t.accountForm.loginId,"，已经分配给您，请在24内与开发者联系。</p><p><br></p><p>").concat(t.title,"团队</p>"),title:"【重要！重要！重要！】",publishType:0,publishTime:o,userIdList:[t.accountForm.businessId]});case 11:return e.next=13,Object(l["a"])({type:1,content:"<p>尊敬的开发者：<br/><br/></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;感谢您注册使用".concat(t.title,"媒体服务平台，24小时内我们商务将通过您预留的信息与您联系，帮助您快速上手使用").concat(t.title,"平台。</p><p><br></p><p><br></p><p>").concat(t.title,"团队</p>"),title:"【重要】欢迎开发者入驻MadPro媒体服",publishType:0,publishTime:o,userIdList:[n]});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else t.accountForm.password="",Object(a["g"])(t.accountForm).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(s){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200==s.code){e.next=2;break}return e.abrupt("return",t.$message.error(s.msg));case 2:if(t.$message.success("编辑成功"),t.getAccountList(),t.initBusinessIdOptions(),t.accountDialogVisible=!1,t.editBeforeRow.businessId==t.accountForm.businessId){e.next=12;break}return n=Object(u["a"])(Date.now(),"YYYY-MM-DD hh:mm:ss"),t.accountForm.id,e.next=11,Object(l["a"])({type:1,content:"<p>亲爱的媒介同学：<br/><br/></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注册邮箱为：".concat(t.accountForm.loginId,"的开发者，已经分配给您，请在24内与开发者联系。</p><p><br></p><p>").concat(t.title,"团队</p>"),title:"【重要！重要！重要！】",publishType:0,publishTime:n,userIdList:[t.accountForm.businessId]});case 11:e.sent;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},setPermissions:function(t){var e=this;this.permissionsDialogVisible=!0,this.platNames=[],this.permissionsForm=JSON.parse(JSON.stringify(t)),this.permissionsForm.userId=t.id,t.platIds.forEach((function(t){e.platNames.push(e.platOptions.find((function(e){return e.id===t})).name)}))},getSelectDep:function(t){t.length===this.departments.length?this.checkedThing=!0:this.checkedThing=!1,this.accountForm.appList=t},selectAllThing:function(){var t=this;this.department=[],this.checkedThing?this.departments.map((function(e){t.department.push(e.id)})):this.department=[],this.accountForm.appList=this.department},closeDialog:function(){this.$refs.ruleForm.resetFields(),this.accountForm={name:"",loginId:"",password:"",appList:[],role:"",sts:""},this.department=[],this.checkedThing=!1},closePermissionsDialog:function(){this.permissionsDialogVisible=!1},initPlatOptions:function(){var t=this;Object(c["d"])().then((function(e){t.platOptions=e.data}))},initBusinessIdOptions:function(){var t=this;Object(a["e"])().then((function(e){t.businessIdOptions=e.data}))},handlePermissions:function(){var t=this,e=[];this.platNames.forEach((function(s){e.push(t.platOptions.find((function(t){return t.name===s})).id)})),this.permissionsForm.platIds=e,Object(a["f"])(this.permissionsForm).then((function(e){if(200!=e.code)return t.$message.error(e.msg);t.$message.success("编辑成功"),t.getAccountList(),t.permissionsDialogVisible=!1}))},handleSizeChange:function(t){this.subAccount.limit=t,this.getAccountList()},handleCurrentChange:function(t){this.subAccount.page=t,this.getAccountList()},handleCheck:function(t){3!=t.role&&5!=t.role&&13!=t.role&&(this.childRow=t.subAccountVoList,this.subAccountChild=!0)},getsubAccountVoNum:function(t){return 3===t.role||13===t.role?t.appList?t.appList.length+"个":"0个":(6===t.role||2===t.role)&&t.subAccountVoList?t.subAccountVoList.length+"个":"0个"}}},b=d,m=(s("7445"),s("2877")),h=Object(m["a"])(b,n,o,!1,null,"2d30e18a",null);e["default"]=h.exports},7445:function(t,e,s){"use strict";s("011f")},"7db0":function(t,e,s){"use strict";var n=s("23e7"),o=s("b727").find,r=s("44d2"),a=s("ae40"),i="find",c=!0,l=a(i);i in[]&&Array(1)[i]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!l},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(i)},b0b8:function(t,e,s){"use strict";s.d(e,"a",(function(){return o})),s.d(e,"g",(function(){return r})),s.d(e,"f",(function(){return a})),s.d(e,"c",(function(){return i})),s.d(e,"h",(function(){return c})),s.d(e,"b",(function(){return l})),s.d(e,"e",(function(){return u})),s.d(e,"d",(function(){return p}));var n=s("b775");function o(t){return Object(n["a"])({url:"/user/subAccountPager",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/user/updateSubAccount",method:"post",data:t})}function a(t){return Object(n["a"])({url:"/user/bindPlat",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/user/".concat(t.id),method:"Delete"})}function c(t){return Object(n["a"])({url:"/user/updateAccountInfo",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/user/addSubAccount",method:"post",data:t})}function u(){return Object(n["a"])({url:"/user/businessUserList",method:"get"})}function p(t){return Object(n["a"])({url:"/user/filterAccount",method:"post",data:t})}},b562:function(t,e,s){"use strict";s.d(e,"c",(function(){return o})),s.d(e,"e",(function(){return r})),s.d(e,"f",(function(){return a})),s.d(e,"a",(function(){return i})),s.d(e,"k",(function(){return c})),s.d(e,"j",(function(){return l})),s.d(e,"b",(function(){return u})),s.d(e,"d",(function(){return p})),s.d(e,"i",(function(){return d})),s.d(e,"h",(function(){return b})),s.d(e,"g",(function(){return m}));var n=s("b775");function o(){return Object(n["a"])({url:"/app/list",method:"get"})}function r(t){return Object(n["a"])({url:"/app/getAppListByRole",method:"post",data:t})}function a(t){return Object(n["a"])({url:"/app/pager",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/app/add",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/app/update",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/aggregate/platformList/"+t,method:"post"})}function u(t){return Object(n["a"])({url:"/dashboard/getAdminAndAppListByBusinessId",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/dashboard/getAppListByAdminId",method:"post",data:t})}function d(){return Object(n["a"])({url:"/user/adminList",method:"get"})}function b(){return Object(n["a"])({url:"/app/getMediaAppList",method:"get"})}function m(t){return Object(n["a"])({url:"/app/getApplistByUserIdAndOs",method:"post",data:t})}},c443:function(t,e,s){"use strict";s.d(e,"d",(function(){return o})),s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return i})),s.d(e,"e",(function(){return c}));var n=s("b775");function o(t){return Object(n["a"])({url:"/message/page",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/message/add",method:"post",data:t})}function a(t){return Object(n["a"])({url:"/message/update",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/message/readPage",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/message/updateReadSts",method:"post",data:t})}}}]);