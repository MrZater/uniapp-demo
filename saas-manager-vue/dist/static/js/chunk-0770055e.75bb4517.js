(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0770055e"],{"2c76":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("4d90"),a("99af");var r=function(t,e){var a=new Date(t),r=a.getFullYear(),i=(a.getMonth()+1+"").padStart("2","0"),n=(a.getDate()+"").padStart("2","0"),o=(a.getHours()+"").padStart("2","0"),s=(a.getMinutes()+"").padStart("2","0"),l=(a.getSeconds()+"").padStart("2","0");return"YYYY-MM-DD hh:mm:ss"==e?"".concat(r,"-").concat(i,"-").concat(n," ").concat(o,":").concat(s,":").concat(l):"YYYY/MM/DD hh:dd:ss"==e?"".concat(r,"/").concat(i,"/").concat(n," ").concat(o,":").concat(s,":").concat(l):"YYYY-MM-DD_hhmmss"==e?"".concat(r,"-").concat(i,"-").concat(n,"_").concat(o).concat(s).concat(l):"".concat(r,"-").concat(i,"-").concat(n)}},3620:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return o}));var r=a("ade3"),i=(a("d3b7"),a("159b"),{tooltip:{trigger:"axis",formatter:function(t){var e="";return t.forEach((function(t,a){var r={};"收益"==t.seriesName||"eCPM"==t.seriesName||"预估收益"==t.seriesName||"ARPDAU"==t.seriesName?r.value="￥"+t.value:"渗透率"==t.seriesName?r.value=t.value+"%":r.value=t.value,e+=t.marker+t.seriesName+": "+r.value+"<br>"})),t[0].axisValue+"<br>"+e}},legend:{data:[]},grid:{top:"2%",left:"0%",right:"2%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLine:{lineStyle:{color:"#000",width:.5}}},yAxis:[Object(r["a"])({type:"value",axisLabel:{formatter:"￥{value}"},position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1}},"axisLabel",{show:!1}),{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},{type:"value",position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}}],series:[{name:"",type:"line",smooth:!0,yAxisIndex:0,data:[],symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#0055ff",lineStyle:{color:"#0055ff",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:1,data:[],symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#ffab31",lineStyle:{color:"#ffab31",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:2,data:[],symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#39da61",lineStyle:{color:"#39da61",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:3,data:[],symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#ff6688",lineStyle:{color:"#ff6688",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:4,data:[],symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#a8a8ff",lineStyle:{color:"#a8a8ff",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:5,data:[],symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#de7af9",lineStyle:{color:"#de7af9",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:6,data:[],symbol:"circle",symbolSize:7,itemStyle:{normal:{color:"rgb(0, 118, 143)",lineStyle:{color:"rgb(0, 118, 143)",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:7,data:[],symbol:"circle",symbolSize:7,itemStyle:{normal:{color:"rgb(76, 180, 231)",lineStyle:{color:"rgb(76, 180, 231)",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:8,data:[],symbol:"circle",symbolSize:7,itemStyle:{normal:{color:"rgb(255, 192, 159)",lineStyle:{color:"rgb(255, 192, 159)",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:9,data:[],symbol:"circle",symbolSize:7,itemStyle:{normal:{color:"rgb(145, 78, 0)",lineStyle:{color:"rgb(145, 78, 0)",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:10,data:[],symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#ff746c",lineStyle:{color:"#ff746c",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:11,data:[],symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"rgb(59, 203, 213)",lineStyle:{color:"rgb(59, 203, 213)",width:2}}}},{name:"",type:"line",smooth:!0,yAxisIndex:12,data:[],symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#ff4400",lineStyle:{color:"#ff4400",width:2}}}}]}),n={disabledDate:function(t){return t.getTime()>Date.now()||t.getTime()<16330176e5},shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近14天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-12096e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}}]},o={tooltip:{trigger:"item"},legend:{bottom:"3%",left:"center"},series:[{type:"pie",radius:["45%","70%"],center:["50%","40%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:0,borderColor:"#fff",borderWidth:2},label:{normal:{show:!0,position:"center",color:"#000",formatter:"汇总：123",fontSize:"18",fontWeight:300},emphasis:{show:!0}},emphasis:{label:{show:!1,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!0},data:[{value:1048,name:"Search Engine",itemStyle:{color:"rgb(255, 192, 159)"}},{value:735,name:"Direct",itemStyle:{color:"rgb(145, 78, 0)"}},{value:580,name:"Email",itemStyle:{color:"#de7af9"}},{value:484,name:"Union Ads",itemStyle:{color:"rgb(0, 118, 143)"}},{value:300,name:"Video Ads",itemStyle:{color:"#a8a8ff"}}]}]}},"4e82":function(t,e,a){"use strict";var r=a("23e7"),i=a("1c0b"),n=a("7b0b"),o=a("d039"),s=a("a640"),l=[],c=l.sort,u=o((function(){l.sort(void 0)})),d=o((function(){l.sort(null)})),p=s("sort"),h=u||!d||!p;r({target:"Array",proto:!0,forced:h},{sort:function(t){return void 0===t?c.call(n(this)):c.call(n(this),i(t))}})},"88f5":function(t,e,a){"use strict";a("c4f5")},a434:function(t,e,a){"use strict";var r=a("23e7"),i=a("23cb"),n=a("a691"),o=a("50c4"),s=a("7b0b"),l=a("65f0"),c=a("8418"),u=a("1dde"),d=a("ae40"),p=u("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,f=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p||!h},{splice:function(t,e){var a,r,u,d,p,h,y=s(this),v=o(y.length),w=i(t,v),x=arguments.length;if(0===x?a=r=0:1===x?(a=0,r=v-w):(a=x-2,r=f(m(n(e),0),v-w)),v+a-r>b)throw TypeError(g);for(u=l(y,r),d=0;d<r;d++)p=w+d,p in y&&c(u,d,y[p]);if(u.length=r,a<r){for(d=w;d<v-r;d++)p=d+r,h=d+a,p in y?y[h]=y[p]:delete y[h];for(d=v;d>v-r+a;d--)delete y[d-1]}else if(a>r)for(d=v-r;d>w;d--)p=d+r-1,h=d+a-1,p in y?y[h]=y[p]:delete y[h];for(d=0;d<a;d++)y[d+w]=arguments[d+2];return y.length=v-r+a,u}})},c4f5:function(t,e,a){},e398:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-abtest-container"},[t.showTestDialog?a("el-dialog",{attrs:{title:t.addAbtest?"添加A/B分组":"A/B分组编辑",visible:t.showTestDialog,"destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.showTestDialog=e},close:t.closeTestDialog}},[a("el-form",{ref:"testdialog",attrs:{model:t.testquery,"label-width":"150px",rules:t.testRules}},[a("el-form-item",{attrs:{label:"应用:"}},[a("span",[t._v(t._s(t.appName))])]),a("el-form-item",{attrs:{label:"广告位:"}},[a("span",[t._v(t._s(t.placeName))])]),a("el-form-item",{attrs:{label:"流量分组:"}},[a("span",[t._v(t._s(t.group.name))])]),a("el-form-item",{attrs:{label:"A/B测试名称:",prop:"testName"}},[a("el-input",{staticStyle:{width:"20rem"},attrs:{placeholder:"请输入A/B测试名称"},model:{value:t.testquery.testName,callback:function(e){t.$set(t.testquery,"testName",e)},expression:"testquery.testName"}})],1),a("el-form-item",{attrs:{label:"流量划分形式",prop:"type"}},[a("el-radio-group",{attrs:{disabled:!t.addAbtest},model:{value:t.testquery.type,callback:function(e){t.$set(t.testquery,"type",e)},expression:"testquery.type"}},[a("el-radio",{attrs:{label:0}},[t._v(" 请求 ")]),a("el-radio",{attrs:{label:1}},[t._v(" 用户 ")])],1)],1),a("el-form-item",{attrs:{label:"创建分组:"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleAddTest}},[t._v(" 添加分组 ")])],1),a("el-table",{staticStyle:{width:"42rem","margin-left":"3rem"},attrs:{border:"",data:t.testquery.abTestList.filter((function(t){return"default"!==t.testId})),fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"分组名称",fixed:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form-item",{attrs:{prop:"abTestList."+e.$index+".groupName",rules:{required:!0,message:"分组名称不能为空",trigger:"blur"},"label-width":"0"}},[a("el-input",{staticStyle:{width:"10rem"},attrs:{size:"mini",required:!0,placeholder:"请填写分组名称"},model:{value:e.row.groupName,callback:function(a){t.$set(e.row,"groupName",a)},expression:"scope.row.groupName"}})],1)]}}],null,!1,2896028185)}),1==t.testquery.type?a("el-table-column",{attrs:{label:"比例",fixed:"",align:"center",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.getProportion(e.$index)+"%")+" ")]}}],null,!1,276516870)}):t._e(),a("el-table-column",{attrs:{label:0==t.testquery.type?"比例":"用户区间",fixed:"",prop:"proportion",align:"center",width:"250px","render-header":t.testrenderHeader},scopedSlots:t._u([{key:"default",fn:function(e){return[0==t.testquery.type?a("el-form-item",{attrs:{"label-width":"0",prop:"abTestList."+e.$index+".proportion",rules:[{required:!0,message:"比例不能为空",trigger:"blur"},,{required:!0,trigger:"blur",validator:t.proportionValidator}]}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",prop:"proportion",placeholder:"请填写比例"},model:{value:e.row.proportion,callback:function(a){t.$set(e.row,"proportion",t._n(a))},expression:"scope.row.proportion"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("%")])])],1):t._e(),1==t.testquery.type?a("div",[t._l(e.row.intervalList,(function(r,i){return[a("div",{key:i,staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{"label-width":"0px",label:"",prop:"abTestList."+e.$index+".intervalList["+i+"][0]",rules:[{required:!0,trigger:"blur",validator:t.intervalListValidator}]}},[a("el-input-number",{staticStyle:{width:"100px","margin-left":"5px"},attrs:{size:"mini",max:100,min:1,placeholder:""},model:{value:e.row.intervalList[i][0],callback:function(a){t.$set(e.row.intervalList[i],0,t._n(a))},expression:"scope.row.intervalList[index][0]"}})],1),a("el-form-item",{attrs:{"label-width":"0px",label:"",prop:"abTestList."+e.$index+".intervalList["+i+"][1]",rules:[{required:!0,trigger:"blur",validator:t.intervalListValidator}]}},[a("el-input-number",{staticStyle:{width:"100px","margin-left":"5px"},attrs:{size:"mini",max:100,min:1,placeholder:""},model:{value:e.row.intervalList[i][1],callback:function(a){t.$set(e.row.intervalList[i],1,t._n(a))},expression:"scope.row.intervalList[index][1]"}})],1),t.testquery.abTestList[e.$index]["intervalList"].length>1?a("span",{staticClass:"closeIcon el-icon-circle-close",staticStyle:{"line-height":"35px",color:"red",cursor:"pointer","margin-left":"5px"},on:{click:function(a){return t.closeintervalList(e.$index,i)}}}):t._e()],1)]})),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.handleAddintervalList(e.$index)}}},[t._v(" 添加区间 ")])],2):t._e()]}}],null,!1,3203210188)}),a("el-table-column",{attrs:{width:"100",label:"操作",fixed:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[!e.row.testId&&0!==e.$index&&t.testquery.abTestList.length>2?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.closeTest(e.$index)}}},[t._v(" 删除 ")]):t._e(),e.row.testId&&(t.testDisabled||"A"!==e.row.sts)?a("el-switch",{staticStyle:{height:"20px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"A","inactive-value":"S"},model:{value:e.row.sts,callback:function(a){t.$set(e.row,"sts",a)},expression:"scope.row.sts"}}):t._e()]}}],null,!1,1025424802)})],1)],1),t.allowOperate?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.closeTestDialog}},[t._v("取消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleSubmitTestForm}},[t._v("确定")])],1):t._e()],1):t._e()],1)},i=[],n=a("1da1"),o=(a("96cf"),a("e9c4"),a("d3b7"),a("159b"),a("a434"),a("4e82"),a("8280")),s=a("f4f7"),l={name:"AddABTestDialog",components:{tips:o["a"]},props:{showTestDialogTemp:{type:Boolean,default:!1},addAbtest:{type:Boolean,default:!1},testqueryTemp:{type:Object,default:{placeId:"",groupId:"",testName:"",type:0,abTestList:[{groupName:"A组",proportion:50,testId:"",sts:"A",intervalList:[[1,1]]},{groupName:"B组",proportion:50,testId:"",sts:"A",intervalList:[[1,1]]}]}},appName:{default:""},placeName:{default:""},group:{type:Object,default:function(){}}},data:function(){return{testRules:{testName:[{required:!0,message:"请填写测试名称",trigger:"blur"}],type:[{required:!0,message:"请选择区分形式",trigger:"blur"}]},testquery:{},showTestDialog:!1,testDisabled:!1}},computed:{allowOperate:function(){return this.$store.getters.allowOperate}},watch:{testqueryTemp:{handler:function(t){this.testquery=JSON.parse(JSON.stringify(t))},deep:!0},showTestDialogTemp:{handler:function(t){this.showTestDialog=t}},testquery:{handler:function(t){var e=0;t.abTestList.forEach((function(t){"A"===t.sts&&e++})),this.testDisabled=e>2},deep:!0}},methods:{getProportion:function(t){var e=0;return this.testquery.abTestList[t].intervalList.forEach((function(t){var a=t[1]-t[0]+1;e+=a})),e},handleAddintervalList:function(t){this.testquery.abTestList[t].intervalList.push([1,1])},closeintervalList:function(t,e){this.testquery.abTestList[t].intervalList.splice(e,1)},closeTestDialog:function(){this.$emit("closeTestDialog")},handleAddTest:function(){if(this.addAbtest)this.testquery.abTestList.push({groupName:"",proportion:0,sts:"A",intervalList:[[1,1]]});else{var t=this.testquery.abTestList.length;this.testquery.abTestList.splice(t-1,0,{groupName:"",proportion:0,sts:"A",intervalList:[[1,1]]})}},closeTest:function(t){this.testquery.abTestList.splice(t,1)},handleSubmitTestForm:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$refs.testdialog.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var r,i,n,o,l,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:if(r=0,i=JSON.parse(JSON.stringify(t.testquery)),i.abTestList.forEach((function(t){if("A"===t.sts){var e=+t.proportion;r=+r+e}})),1!=i.type){e.next=17;break}if(n=[],o=0,l=0,i.abTestList.forEach((function(t,e){"A"===t.sts?t.intervalList&&t.intervalList.forEach((function(t,e){l++,n.push(t[0]),n.push(t[1]),o+=t[1]-t[0]})):t.intervalList})),n=n.sort((function(t,e){return t-e})),c=n.length,!t.addAbtest){e.next=15;break}if(o+l==100&&1==n[0]&&100==n[c-1]){e.next=15;break}return e.abrupt("return",t.$message.error("输入区间有误！"));case 15:e.next=19;break;case 17:if(100===r){e.next=19;break}return e.abrupt("return",t.$message.error("比例总和必须为100"));case 19:if(!t.addAbtest){e.next=26;break}return e.next=22,Object(s["a"])(i);case 22:u=e.sent,200===u.code&&(t.$message.success("添加成功！"),t.$emit("editSuccess")),e.next=30;break;case 26:return e.next=28,Object(s["C"])(i);case 28:d=e.sent,200===d.code&&(t.$message.success("配置成功！"),t.$emit("editSuccess"));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()},proportionValidator:function(t,e,a){+e<0?a(new Error("比例不能为负数！")):"number"!==typeof+e?a(new Error("比例必须为数字！")):a()},intervalListValidator:function(t,e,a){return e?a():a(new Error("请输入区间值！"))},testrenderHeader:function(t,e){e.column,e.$index;return 0==this.testquery.type?this.$createElement("span","比例"):1==this.testquery.type?this.$createElement("tips",{props:{content:"对用户进行分组，每个分组配置一个数值区间，各分组数值区间不可以交叉。",title:"用户区间",isShow:!0}}):void 0}}},c=l,u=a("2877"),d=Object(u["a"])(c,r,i,!1,null,null,null);e["a"]=d.exports},e7c5:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"abtest-data-container"},[a("div",{staticClass:"goback"},[a("el-page-header",{staticStyle:{color:"#2265ff"},attrs:{content:"A/B测试数据"},on:{back:t.goBack}})],1),a("div",{staticClass:"header"},[a("div",{staticClass:"app item"},[a("p",{staticClass:"title"},[t._v(" 应用 ")]),a("p",{staticClass:"value"},[t._v(" "+t._s(t.appName)+" ")])]),a("div",{staticClass:"place item"},[a("p",{staticClass:"title"},[t._v(" 广告位 ")]),a("p",{staticClass:"value"},[t._v(" "+t._s(t.placeName)+" ")])]),a("div",{staticClass:"group item"},[a("p",{staticClass:"title"},[t._v(" 流量分组 ")]),a("p",{staticClass:"value"},[t._v(" "+t._s(t.groupName)+" ")])]),a("div",{staticClass:"abtest item"},[a("p",{staticClass:"title"},[t._v(" A/B测试 ")]),a("p",{staticClass:"value"},[t._v(" "+t._s(t.abTestName)+" ")])]),a("div",{staticClass:"time item"},[a("p",{staticClass:"title"},[t._v(" 生效时间 ")]),a("p",{staticClass:"value"},[t._v(" "+t._s(t.createTime)+" ")])])]),a("div",{staticClass:"table"},[a("div",{staticClass:"control"},[a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期",clearable:!1,"value-format":"yyyy-MM-dd"},on:{change:t.changTableDate},model:{value:t.tableDate[0],callback:function(e){t.$set(t.tableDate,0,e)},expression:"tableDate[0]"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.editABTest}},[t._v(" 修改流量分配 ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"tableref",attrs:{"header-cell-style":{"background-color":"#f7f8fa",color:"#000"},data:t.tableList,"empty-text":"-",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{width:"",label:"分组",prop:"testGroupName",align:"center"}}),0==t.type?a("el-table-column",{attrs:{width:"",label:"比例",prop:"proportion",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(r.proportion)+"%")])]}}],null,!1,1217027638)}):t._e(),1==t.type?a("el-table-column",{attrs:{width:"",label:"区间比例",prop:"proportion",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return["default"!=r.testId?a("span",[t._v(t._s(t.getProportion(r))+"%")]):a("span",[t._v("0%")])]}}],null,!1,1803184741)}):t._e(),a("el-table-column",{attrs:{width:"",label:"预估收益",prop:"income",align:"center","render-header":t.renderHeader}}),a("el-table-column",{attrs:{width:"",label:"预估eCPM",prop:"estimatedRevenueEcpm",align:"center","render-header":t.renderHeader}}),a("el-table-column",{attrs:{width:"",label:"流量请求",prop:"request",align:"center","render-header":t.renderHeader}}),a("el-table-column",{attrs:{width:"",label:"流量填充率",prop:"requestFilledRate",align:"center","render-header":t.renderHeader},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.requestFilledRate)+"% ")]}}])}),a("el-table-column",{attrs:{width:"",label:"填充耗时",prop:"cacheTime",align:"center","render-header":t.renderHeader},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.cacheTime)+"s ")]}}])}),a("el-table-column",{attrs:{width:"",label:"展示",prop:"impress",align:"center","render-header":t.renderHeader}}),a("el-table-column",{attrs:{width:"",label:"展示率",prop:"impressRate",align:"center","render-header":t.renderHeader},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.impressRate)+"% ")]}}])}),a("el-table-column",{attrs:{width:"",label:"展请率",prop:"impressRequestRate",align:"center","render-header":t.renderHeader},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.impressRequestRate)+"% ")]}}])})],1)],1),a("div",{staticClass:"chart"},[a("div",{staticClass:"control"},[a("el-date-picker",{attrs:{clearable:!1,type:"daterange","value-format":"yyyy-MM-dd",align:"center","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.getChartTime},model:{value:t.chartDate,callback:function(e){t.chartDate=e},expression:"chartDate"}}),a("el-select",{attrs:{placeholder:"请选择指标"},on:{change:t.changeType},model:{value:t.chartQuery.targetType,callback:function(e){t.$set(t.chartQuery,"targetType",e)},expression:"chartQuery.targetType"}},[a("el-option",{attrs:{label:"预估eCPM",value:"1"}}),a("el-option",{attrs:{label:"流量请求",value:"2"}}),a("el-option",{attrs:{label:"流量填充率",value:"3"}}),a("el-option",{attrs:{label:"展示",value:"4"}}),a("el-option",{attrs:{label:"展示率",value:"5"}}),a("el-option",{attrs:{label:"填充耗时",value:"6"}}),a("el-option",{attrs:{label:"展请率",value:"7"}})],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.chartLoading,expression:"chartLoading"}],ref:"chart",staticClass:"chartbox"})]),a("div",{staticClass:"dialog"},[a("addABTestDialog",{attrs:{"show-test-dialog-temp":t.showTestDialog,"add-abtest":!1,"testquery-temp":t.testquery,"app-name":t.appName,"place-name":t.placeName,group:t.group},on:{closeTestDialog:function(e){t.showTestDialog=!1},editSuccess:t.handleSubmitTestForm}})],1)])},i=[],n=a("1da1"),o=a("ade3"),s=(a("96cf"),a("d3b7"),a("159b"),a("99af"),a("ddb0"),a("e398")),l=a("f4f7"),c=a("3620"),u=a("2c76"),d=a("20ca"),p=a("8280"),h=a("164e"),m={name:"AbTestData",components:{addABTestDialog:s["a"],tips:p["a"]},data:function(){return{tableDate:["",""],query:{placeId:"",groupId:"",startDate:"",endDate:""},appName:"",placeName:"",groupName:"",abTestName:"",createTime:"",type:"",tableList:[],tableLoading:!1,group:{},showTestDialog:!1,testquery:{placeId:"",groupId:"",testName:"",type:0,abTestList:[{groupName:"A组",proportion:50,testId:"",sts:"A",max:0,min:0},{groupName:"B组",proportion:50,testId:"",sts:"A",max:0,min:0}]},chartDate:[],pickerOptions:c["a"]||[],chartQuery:{placeId:"",groupId:"",startDate:"",endDate:"",targetType:"1"},chartLoading:!1,chartOption:{tooltip:{trigger:"axis",axisPointer:{type:"cross"},extraCssText:"width: 200px"},legend:{data:[]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLine:{lineStyle:{color:"#000",width:.5}}},yAxis:[Object(o["a"])({type:"value",axisLabel:{formatter:"{value}"},position:"",axisLine:{lineStyle:{color:"#666",width:.5}},axisTick:{show:!0},splitLine:{show:!0}},"axisLabel",{show:!0})],series:[{name:"",type:"line",smooth:!0,yAxisIndex:0,data:[],symbol:"circle",symbolSize:6,itemStyle:{normal:{color:"#0055ff",lineStyle:{color:"#0055ff",width:2}}}}]},myEcharts:null,colorList:["#0055ff","#ffab31","#39da61","#ff6688","#a8a8ff","#de7af9","rgb(0, 118, 143)","rgb(76, 180, 231)","rgb(255, 192, 159)","rgb(145, 78, 0)","#ff746c"],iscreat:!0,targetName:""}},computed:{title:function(){return this.$store.getters.title}},destroyed:function(){this.myEcharts.dispose(),window.removeEventListener("resize",Object(d["a"])(this.getSize,100))},mounted:function(){this.initTableDate(),this.query.appId=this.$route.query.appId,this.query.placeId=this.$route.query.placeId,this.query.groupId=this.$route.query.groupId,this.chartQuery.placeId=this.$route.query.placeId,this.chartQuery.groupId=this.$route.query.groupId,this.getTableData(),this.getGroup(),this.initChartDate(),this.getChartData(),window.addEventListener("resize",Object(d["a"])(this.getSize,100)),this.getSize()},methods:{getProportion:function(t){var e=0;return t.intervalList=t.intervalList?t.intervalList:[],t.intervalList.forEach((function(t){var a=t[1]-t[0]+1;e+=a})),e},goBack:function(){this.$router.push({path:"/traffic/aggregate",query:{appId:this.query.appId,placeId:this.query.placeId}})},initTableDate:function(){var t=(new Date).getTime(),e=new Date(t).getFullYear(),a=new Date(t).getMonth()+1,r=new Date(t).getDate(),i="".concat(e,"-").concat(a<10?"0"+a:a,"-").concat(r<10?"0"+r:r);this.tableDate[0]=this.tableDate[1]=i,this.query.endDate=i,this.query.startDate=i},changTableDate:function(t){this.tableDate[1]=t,this.query.endDate=t,this.query.startDate=t,this.getTableData()},getTableData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading=!0,e.next=3,Object(l["s"])(t.query);case 3:a=e.sent,t.appName=a.data.appName,t.placeName=a.data.placeName,t.groupName=a.data.groupName,t.abTestName=a.data.testName,t.createTime=a.data.takeEffectTime,t.tableList=a.data.abTestReportDataList,t.tableLoading=!1;case 11:case"end":return e.stop()}}),e)})))()},renderHeader:function(t,e){var a=e.column;e.$index;return"income"==a.property?this.$createElement("tips",{props:{content:"预估收益=SUM(代码位人工填写的eCPM价格*".concat(this.title,"统计的展示/1000)"),title:"预估收益",isShow:!0}}):"estimatedRevenueEcpm"==a.property?this.$createElement("tips",{props:{content:"（预估收益/".concat(this.title,"统计的展示）*1000"),title:"预估eCPM",isShow:!0}}):"request"==a.property?this.$createElement("tips",{props:{content:"应用向".concat(this.title,"发送请求的次数，一次流量请求可能触发多次广告请求"),title:"流量请求",isShow:!0}}):"requestFilledRate"==a.property?this.$createElement("tips",{props:{content:"汇总行表示流量填充率，即应用向".concat(this.title,"发送请求后返回成功的占比；其余行表示广告填充率，即").concat(this.title,"向广告平台发送请求后返回成功的占比"),title:"流量填充率",isShow:!0}}):"cacheTime"==a.property?this.$createElement("tips",{props:{content:"".concat(this.title," SDK向广告源发送请求到填充成功的平均耗时"),title:"填充耗时",isShow:!0}}):"impress"==a.property?this.$createElement("tips",{props:{content:"".concat(this.title,"统计的广告曝光次数，由于统计口径差异、网络丢包等因素，").concat(this.title,"统计的展示数据与广告平台展示数据可能存在差异"),title:"展示",isShow:!0}}):"impressRate"==a.property?this.$createElement("tips",{props:{content:"".concat(this.title,"收到来自广告平台的广告返回后，展示成功的占比。公式为 展示率 = (展示/填充)"),title:"展示率",isShow:!0}}):"impressRequestRate"==a.property?this.$createElement("tips",{props:{content:"展示 / 流量请求",title:"展请率",isShow:!0}}):this.$createElement("tips",{props:{content:"",title:"-",isShow:!1}})},getGroup:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["v"])(t.query.placeId);case 2:a=e.sent,a.data.groups.forEach((function(e){e.id==t.query.groupId&&(t.group=e,t.type=t.group.abTests[0].type)}));case 4:case"end":return e.stop()}}),e)})))()},editABTest:function(){this.getGroup(),this.showTestDialog=!0,this.testquery.placeId=this.query.placeId,this.testquery.groupId=this.query.groupId,this.testquery.testName=this.group.abTests[0].testName,this.testquery.type=this.group.abTests[0].type,this.testquery.abTestList=this.group.abTests},handleSubmitTestForm:function(){this.showTestDialog=!1,this.getTableData(),this.getGroup()},initChartDate:function(){var t=Object(u["a"])(Date.now()),e=Object(u["a"])(Date.now()-5184e5);this.chartDate=[e,t],this.chartQuery.startDate=this.chartDate[0],this.chartQuery.endDate=this.chartDate[1]},getChartTime:function(t){this.chartQuery.startDate=t[0],this.chartQuery.endDate=t[1],this.getChartData()},changeType:function(){this.getChartData()},getChartData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.chartLoading=!0,e.next=3,Object(l["r"])(t.chartQuery);case 3:a=e.sent,t.targetName=1==t.chartQuery.targetType?"预估eCPM":2==t.chartQuery.targetType?"流量请求":3==t.chartQuery.targetType?"流量填充率":4==t.chartQuery.targetType?"展示":5==t.chartQuery.targetType?"展示率":6==t.chartQuery.targetType?"填充耗时":7==t.chartQuery.targetType?"展请率":"",t.chartOption.xAxis.data=a.data.dateList,t.chartOption.tooltip.formatter=function(e){var a="";return e.forEach((function(e,r){var i={};"1"==t.chartQuery.targetType?i.value="￥"+e.value:"3"==t.chartQuery.targetType||"5"==t.chartQuery.targetType||"7"==t.chartQuery.targetType?i.value=e.value+"%":"6"==t.chartQuery.targetType?i.value=e.value+"s":i.value=e.value,a+=" <div style='width:100%;display:flex;justify-content:space-between'><span>".concat(e.marker).concat(e.seriesName,"</span>").concat(i.value,"</div>")})),"<div style='width:100%;display:flex;justify-content:space-between'><span>".concat(e[0].axisValue,"</span>").concat(t.targetName,"</div>")+a},t.chartOption.series=[],t.chartOption.legend.data=[],a.data.abTestReportDataList.forEach((function(e,a){t.chartOption.legend.data.push(e.testGroupName),t.chartOption.series.push({name:e.testGroupName,type:"line",smooth:!0,yAxisIndex:0,data:e.values,symbol:"circle",symbolSize:6,itemStyle:{normal:{color:t.colorList[a]?t.colorList[a]:"#f40",lineStyle:{color:t.colorList[a]?t.colorList[a]:"#f40",width:2}}}})})),t.echartsInit(),t.chartLoading=!1;case 12:case"end":return e.stop()}}),e)})))()},echartsInit:function(){var t=h.init(this.$refs.chart);t.setOption(this.chartOption),this.myEcharts=t},getSize:function(){this.iscreat||this.myEcharts.resize(),this.iscreat=!1}}},f=m,b=(a("88f5"),a("2877")),g=Object(b["a"])(f,r,i,!1,null,"76dc52fc",null);e["default"]=g.exports},e9c4:function(t,e,a){var r=a("23e7"),i=a("d066"),n=a("d039"),o=i("JSON","stringify"),s=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(t,e,a){var r=a.charAt(e-1),i=a.charAt(e+1);return l.test(t)&&!c.test(i)||c.test(t)&&!l.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},d=n((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&r({target:"JSON",stat:!0,forced:d},{stringify:function(t,e,a){var r=o.apply(null,arguments);return"string"==typeof r?r.replace(s,u):r}})},f4f7:function(t,e,a){"use strict";a.d(e,"v",(function(){return i})),a.d(e,"w",(function(){return n})),a.d(e,"x",(function(){return o})),a.d(e,"E",(function(){return s})),a.d(e,"D",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"F",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"o",(function(){return p})),a.d(e,"n",(function(){return h})),a.d(e,"m",(function(){return m})),a.d(e,"e",(function(){return f})),a.d(e,"p",(function(){return b})),a.d(e,"f",(function(){return g})),a.d(e,"g",(function(){return y})),a.d(e,"y",(function(){return v})),a.d(e,"u",(function(){return w})),a.d(e,"k",(function(){return x})),a.d(e,"a",(function(){return S})),a.d(e,"q",(function(){return T})),a.d(e,"C",(function(){return L})),a.d(e,"B",(function(){return D})),a.d(e,"A",(function(){return k})),a.d(e,"z",(function(){return _})),a.d(e,"l",(function(){return q})),a.d(e,"t",(function(){return O})),a.d(e,"h",(function(){return A})),a.d(e,"j",(function(){return N})),a.d(e,"i",(function(){return I})),a.d(e,"s",(function(){return $})),a.d(e,"r",(function(){return j})),a.d(e,"d",(function(){return C}));var r=a("b775");function i(t){return Object(r["a"])({url:"/aggregate/group",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/aggregate/source",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/aggregate/changePriority",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/aggregate/updateSource",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/aggregate/updateSource",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/aggregate/addSource",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/aggregate/updateSource",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/aggregate/addGroup",method:"post",data:t})}function p(t){return Object(r["a"])({url:"/aggregate/updateGroup",method:"post",data:t})}function h(t){return Object(r["a"])({url:"/aggregate",method:"Delete",params:t})}function m(t){return Object(r["a"])({url:"/aggregate/deleteGroupById",method:"Delete",params:t})}function f(t){return Object(r["a"])({url:"/aggregate/templateList",method:"post",data:t})}function b(t){return Object(r["a"])({url:"/aggregate/updateImpress",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/place/timeInfo",method:"post",data:t})}function y(t){return Object(r["a"])({url:"/place/updateTimeInfo",method:"post",data:t})}function v(){return Object(r["a"])({url:"/aggregate/templateTypeList",method:"get"})}function w(){return Object(r["a"])({url:"/common/area_list",method:"get"})}function x(){return Object(r["a"])({url:"/common/brandList",method:"get"})}function S(t){return Object(r["a"])({url:"/abtest/add",method:"post",data:t})}function T(t){return Object(r["a"])({url:"/abtest/abtest_list",method:"post",data:t})}function L(t){return Object(r["a"])({url:"/abtest/update",method:"post",data:t})}function D(t){return Object(r["a"])({url:"/abtest/shutdownTest",method:"post",data:t})}function k(t){return Object(r["a"])({url:"/abtest/update_args",method:"post",data:t})}function _(){return Object(r["a"])({url:"/creative/template_list",method:"get"})}function q(t){return Object(r["a"])({url:"/aggregate/checkPlatPlaceId",method:"post",data:t})}function O(t){return Object(r["a"])({url:"/app/getAppById",method:"post",data:t})}function A(t){return Object(r["a"])({url:"/aggregate/batchAddSource",method:"post",data:t})}function N(t){return Object(r["a"])({url:"/aggregate/batchUpdateSourceSts",method:"post",data:t})}function I(t){return Object(r["a"])({url:"/aggregate/batchReplicationConfig",method:"post",data:t})}function $(t){return Object(r["a"])({url:"/abtest/getAbTestReport",method:"post",data:t})}function j(t){return Object(r["a"])({url:"/abtest/getAbTestEchartsReport",method:"post",data:t})}function C(t){return Object(r["a"])({url:"/aggregate/adsourceAdvancedSetup",method:"post",data:t})}}}]);