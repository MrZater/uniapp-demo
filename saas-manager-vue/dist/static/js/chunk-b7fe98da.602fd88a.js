(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b7fe98da"],{2017:function(e,t,r){"use strict";r("9177")},"21f2":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var s=r("24e5"),o=r.n(s),i="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAOfRWRy4W0URnPurEe18T+Vs9xjlyGPeb6MLfcgoTCMK46OkC3IdQ53Gt6cRFAbk/OvoJ4cQWZMd8GYSxaN4oUUCAwEAAQ==";function a(e){var t=new o.a;return t.setPublicKey(i),t.encrypt(e)}},"2a1a":function(e,t,r){},"8c8f":function(e,t,r){},9177:function(e,t,r){},"9ed6":function(e,t,r){"use strict";r.r(t);var s,o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container",style:{backgroundImage:"url(images/login_bg.png )"}},[r("div",{staticClass:"title-container"},[r("div",{staticStyle:{"text-align":"center"}},[e.isMedPro?e._e():r("img",{staticClass:"logoimg",staticStyle:{width:"200px"},attrs:{draggable:"false",src:"/images/login_logo.png"}}),e.isMedPro?r("img",{staticClass:"logoimg",staticStyle:{width:"200px"},attrs:{draggable:"false",src:e.origin+"/dynamic_logo.png"}}):e._e(),e.isMedPro?e._e():r("img",{staticClass:"mobile_logoimg",staticStyle:{width:"200px"},attrs:{draggable:"false",src:"/images/login_logo.png"}}),e.isMedPro?r("img",{staticClass:"mobile_logoimg",staticStyle:{width:"200px"},attrs:{draggable:"false",src:e.origin+"/dynamic_logo.png"}}):e._e()])]),e.isLogin?r("div",{staticClass:"login"},[r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,autocomplete:"on","label-position":"left"}},[r("el-form-item",{attrs:{prop:"username"}},[r("span",{staticClass:"svg-container"},[r("svg-icon",{attrs:{"icon-class":"user"}})],1),r("el-input",{ref:"username",attrs:{placeholder:"请输入注册邮箱",name:"username",type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("span",{staticClass:"svg-container"},[r("svg-icon",{attrs:{"icon-class":"password"}})],1),r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2",autocomplete:"on"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return e.checkCapslock(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}]},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e.formMember?e._e():r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),r("el-form-item",{staticStyle:{background:"none"},attrs:{prop:"code"}},[r("div",{staticClass:"codeimg"},[r("div",{staticClass:"codeinput"},[r("el-input",{attrs:{placeholder:"验证码",clearable:"",tabindex:"3"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}})],1),r("div",{staticClass:"login-code"},[r("img",{attrs:{src:e.codeUrl},on:{click:e.getCode}})])])]),r("div",{staticClass:"remember"},[r("el-checkbox",{attrs:{size:"medium"},model:{value:e.isremember,callback:function(t){e.isremember=t},expression:"isremember"}},[r("span",{staticStyle:{color:"#333"}},[e._v("记住密码")])])],1),r("el-button",{staticStyle:{height:"47px",width:"100%","margin-bottom":"30px","background-color":"#3f62ba","margin-top":"10px"},attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v(" 登录 ")]),r("div",{staticClass:"logintoother"},[e.allowRegister?r("div",{staticClass:"toregist"},[e._v(" 没有账号？ "),r("router-link",{staticStyle:{color:"#3f62ba"},attrs:{to:"/register"}},[e._v(" 去注册 ")])],1):e._e(),r("div",{staticClass:"toreset"},[r("a",{staticStyle:{color:"#3f62ba"},attrs:{href:"#"},on:{click:e.toResetPwd}},[e._v("忘记密码")])])])],1)],1):r("div",{staticClass:"restpwd"},[r("resetPwd",{on:{tologin:e.tologin}})],1)])},i=[],a=r("ade3"),n=r("1da1"),l=(r("96cf"),r("d3b7"),r("159b"),r("e9c4"),r("b64b"),r("c24f")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"resetPwd-container"},[r("el-form",{ref:"resetForm",staticClass:"login-form",attrs:{model:e.resetForm,rules:e.resetRules,"label-position":"left"}},[r("el-form-item",{attrs:{prop:"email"}},[r("span",{staticClass:"svg-container"},[r("svg-icon",{attrs:{"icon-class":"email"}})],1),r("el-input",{attrs:{placeholder:"请输入邮箱",name:"email",type:"text"},model:{value:e.resetForm.email,callback:function(t){e.$set(e.resetForm,"email",t)},expression:"resetForm.email"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("span",{staticClass:"svg-container"},[r("svg-icon",{attrs:{"icon-class":"password"}})],1),r("el-input",{key:e.passwordType1,ref:"password",attrs:{type:e.passwordType1,placeholder:"密码",name:"password"},model:{value:e.resetForm.password,callback:function(t){e.$set(e.resetForm,"password",t)},expression:"resetForm.password"}}),r("span",{staticClass:"show-pwd",on:{click:function(t){return e.showPwd(1)}}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType1?"eye":"eye-open"}})],1)],1),r("el-form-item",{attrs:{prop:"confirmPassword"}},[r("span",{staticClass:"svg-container"},[r("svg-icon",{attrs:{"icon-class":"password"}})],1),r("el-input",{key:e.passwordType2,ref:"confirmPassword",attrs:{type:e.passwordType2,placeholder:"确认密码",name:"confirmPassword"},model:{value:e.resetForm.confirmPassword,callback:function(t){e.$set(e.resetForm,"confirmPassword",t)},expression:"resetForm.confirmPassword"}}),r("span",{staticClass:"show-pwd",on:{click:function(t){return e.showPwd(2)}}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType2?"eye":"eye-open"}})],1)],1),r("el-row",{staticClass:"getcode",attrs:{gutter:5}},[r("el-col",{attrs:{lg:16}},[r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.resetForm.code,callback:function(t){e.$set(e.resetForm,"code",t)},expression:"resetForm.code"}})],1)],1),r("el-col",{attrs:{lg:8}},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.waittime,expression:"!waittime"}],staticStyle:{height:"47px","background-color":"#3f62ba"},attrs:{size:"medium",type:"primary ",loading:e.waittime},on:{click:e.postMsg}},[e._v(" 获取验证码 ")])],1),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.waittime,expression:"waittime"}],staticStyle:{height:"47px","background-color":"#3f62ba"},attrs:{type:"primary ",size:"medium",disabled:""}},[e._v(" "+e._s(e.count)+"s后再获取 ")])],1),r("el-button",{staticStyle:{height:"47px",width:"100%","margin-bottom":"30px","background-color":"#3f62ba"},attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.handleReset(t)}}},[e._v(" 确认修改 ")]),r("div",{staticClass:"toother"},[e.allowRegister?r("div",{staticClass:"toregist"},[e._v(" 没有账号？"),r("router-link",{staticStyle:{color:"#3f62ba"},attrs:{to:"/register"}},[e._v(" 去注册 ")])],1):e._e(),r("div",{staticClass:"tologin"},[r("a",{staticStyle:{color:"#3f62ba"},attrs:{href:"#"},on:{click:e.tologin}},[e._v("去登录")])])])],1)],1)},u=[],d=(r("ac1f"),r("00b4"),r("498a"),r("21f2")),m={data:function(){var e=this,t=/(?=.*[\d])/,r=/(?=.*[a-z])/,s=/(?=.*[A-Z])/,o=/(?=.*[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、])/,i=function(e,t,r){""===t?r(new Error("请输入验证码！")):r()},a=function(e,i,a){""===i?a(new Error("新密码不能为空！请重新输入")):i.length>16?a(new Error("密码长度不超过16个字符。")):i.length<8?a(new Error("密码不低于8位，包含大小字母、数字、特殊符号")):/^[a-zA-Z\d]{1}/.test(i)?t.test(i)&&r.test(i)&&s.test(i)&&o.test(i)?a():a(new Error("密码不低于8位，包含大小字母、数字、特殊符号!")):a(new Error("密码必须以英文大小写字母或数字开头！"))},n=function(t,r,s){0===r.length?s(new Error("请确认密码")):e.resetForm.password!==r?s(new Error("确认密码错误！")):s()};return{resetForm:{code:"",email:"",password:"",confirmPassword:""},passwordType1:"password",passwordType2:"password",loading:!1,waittime:!1,count:60,timer:null,resetRules:{code:[{required:!0,trigger:"blur",validator:i}],password:[{required:!0,trigger:"blur",validator:a}],confirmPassword:[{required:!0,trigger:"blur",validator:n}],email:[{required:!0,message:"请填写邮箱",trigger:"blur"},{message:"邮箱无效",pattern:/^[\w\.]+@[a-z0-9]+[\.a-z]+\.[a-z]{2,3}[\.]?$/,trigger:"blur"}]}}},computed:{origin:function(){return this.$store.getters.origin},allowRegister:function(){return this.$store.getters.allowRegister}},methods:Object(a["a"])({handleReset:function(){},postCodeMES:function(){},showPwd:function(e){var t=this;1===e?("password"===this.passwordType1?this.passwordType1="":this.passwordType1="password",this.$nextTick((function(){t.$refs.password.focus()}))):2===e&&("password"===this.passwordType2?this.passwordType2="":this.passwordType2="password",this.$nextTick((function(){t.$refs.confirmPassword.focus()})))},postMsg:function(){var e=this;""!==this.resetForm.email.trim()?Object(l["g"])(this.resetForm.email).then((function(t){if(200===t.code){var r=60;e.waittime=!0,e.timer=setInterval((function(){e.count>0&&e.count<=r?e.count--:(e.waittime=!1,clearInterval(e.timer),e.timer=null)}),1e3)}})):this.$message.error("请输入邮箱")},tologin:function(){this.$emit("tologin")}},"handleReset",(function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.resetForm.password===e.resetForm.confirmPassword){t.next=3;break}return e.$message.error("确认密码不正确"),t.abrupt("return");case 3:e.$refs.resetForm.validate((function(t){if(!t)return!1;var r=Object(d["a"])(e.resetForm.password),s=Object(d["a"])(e.resetForm.confirmPassword),o=JSON.parse(JSON.stringify(e.resetForm));o.password=r,o.confirmPassword=s,Object(l["f"])(o).then((function(t){200===t.code&&(e.$message.success("修改成功！"),e.tologin())}))}));case 4:case"end":return t.stop()}}),t)})))()}))},p=m,g=(r("b226"),r("2877")),f=Object(g["a"])(p,c,u,!1,null,"dc245eac",null),w=f.exports;r("a434");function h(e,t){if(e)if(localStorage.getItem("userinfo_0413")&&JSON.parse(localStorage.getItem("userinfo_0413")).length>0){var r=JSON.parse(localStorage.getItem("userinfo_0413"));r.forEach((function(e,s){e.username==t.username&&r.splice(s,1)})),r.unshift(JSON.parse(JSON.stringify({username:t.username,password:t.password}))),localStorage.setItem("userinfo_0413",JSON.stringify(r))}else localStorage.setItem("userinfo_0413",JSON.stringify([{username:t.username,password:t.password}]));else if(localStorage.getItem("userinfo_0413")&&JSON.parse(localStorage.getItem("userinfo_0413")).length>1){var s=JSON.parse(localStorage.getItem("userinfo_0413"));s.forEach((function(e,r){if(e.username==t.username)return s.splice(r,1),void localStorage.setItem("userinfo_0413",JSON.stringify(s))}))}}var b=(s={name:"Login",components:{resetPwd:w},data:function(){var e=function(e,t,r){""===t?r(new Error("请输入注册邮箱！")):r()},t=function(e,t,r){0===t.length?r(new Error("密码不能为空！")):r()};return{env:"production",isremember:!1,isLogin:!0,userinfoList:[],loginForm:{username:"",password:"",uuid:"",code:""},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}],code:[{required:!0,trigger:"blur",message:"请输入验证码"}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{},codeUrl:"",formMember:!1}},computed:{origin:function(){return this.$store.getters.origin},allowRegister:function(){return this.$store.getters.allowRegister},isMedPro:function(){return this.$store.getters.isMedPro}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}}},Object(a["a"])(s,"watch",{"loginForm.username":{handler:function(e){var t=this;if(""==e)this.loginForm.password="",this.formMember=!1;else{var r=!0;this.userinfoList.forEach((function(s){s.username==e&&(r=!1,t.formMember=!0,t.loginForm.password=s.password)})),r&&(this.formMember=!1,this.loginForm.password=""),this.passwordType="password"}}},"loginForm.password":{handler:function(e,t){var r=this,s=!0;this.userinfoList.forEach((function(o){o.password==e&&o.username==r.loginForm.username&&(r.formMember=!0,s=!1),o.password==t&&o.username==r.loginForm.username&&(r.loginForm.password="")})),s&&(this.formMember=!1)}}}),Object(a["a"])(s,"created",(function(){return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()})),Object(a["a"])(s,"mounted",(function(){localStorage.getItem("userinfo_0413")&&localStorage.getItem("userinfo_0413")&&JSON.parse(localStorage.getItem("userinfo_0413")).length>0&&(this.formMember=!0,this.isremember=!0,this.loginForm.username=JSON.parse(localStorage.getItem("userinfo_0413"))[0].username,this.loginForm.password=JSON.parse(localStorage.getItem("userinfo_0413"))[0].password,this.loginForm=JSON.parse(localStorage.getItem("userinfo_0413"))[0],this.userinfoList=JSON.parse(localStorage.getItem("userinfo_0413"))),""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus(),this.getCode()})),Object(a["a"])(s,"methods",{checkCapslock:function(e){var t=e.key;this.capsTooltip=t&&1===t.length&&t>="A"&&t<="Z"},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.loading||this.$refs.loginForm.validate((function(t){if(!t)return!1;e.loading=!0;var r=JSON.parse(JSON.stringify(e.loginForm));if(!e.formMember){var s=Object(d["a"])(e.loginForm.password);r.password=s}e.$store.dispatch("user/login",r).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(s){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(10001!=s.code&&10002!=s.code&&10003!=s.code){t.next=5;break}e.getCode(),e.loading=!1,t.next=13;break;case 5:if(200!=s.code){t.next=13;break}return t.next=8,e.$store.dispatch("user/getInfo");case 8:return t.next=10,h(e.isremember,r);case 10:"AUDITOR"===e.$store.getters.roles[0]?e.$router.push("/material/audit"):"MEDIA"===e.$store.getters.roles[0]?e.$router.push("/reportData/mediaReport"):e.$router.push("/dashboard"),location.reload(),e.loading=!1;case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.loading=!1}))}))},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,r){return"redirect"!==r&&(t[r]=e[r]),t}),{})},tologin:function(){this.isLogin=!0,this.isremember?(this.loginForm.username=this.userinfoList[0]?this.userinfoList[0].username:"",this.loginForm.password=this.userinfoList[0]?this.userinfoList[0].password:"",this.formMember=!0):(this.loginForm.username="",this.loginForm.password="",this.formMember=!1)},toResetPwd:function(){this.isLogin=!1},getCode:function(){var e=this;Object(l["a"])().then((function(t){e.codeUrl="data:image/gif;base64,"+t.data.img,e.loginForm.uuid=t.data.uuid})),this.$set(this.loginForm,"code","")}}),s),v=b,y=(r("2017"),r("c4f55"),Object(g["a"])(v,o,i,!1,null,"3484b74d",null));t["default"]=y.exports},a434:function(e,t,r){"use strict";var s=r("23e7"),o=r("23cb"),i=r("a691"),a=r("50c4"),n=r("7b0b"),l=r("65f0"),c=r("8418"),u=r("1dde"),d=r("ae40"),m=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,f=Math.min,w=9007199254740991,h="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!m||!p},{splice:function(e,t){var r,s,u,d,m,p,b=n(this),v=a(b.length),y=o(e,v),k=arguments.length;if(0===k?r=s=0:1===k?(r=0,s=v-y):(r=k-2,s=f(g(i(t),0),v-y)),v+r-s>w)throw TypeError(h);for(u=l(b,s),d=0;d<s;d++)m=y+d,m in b&&c(u,d,b[m]);if(u.length=s,r<s){for(d=y;d<v-s;d++)m=d+s,p=d+r,m in b?b[p]=b[m]:delete b[p];for(d=v;d>v-s+r;d--)delete b[d-1]}else if(r>s)for(d=v-s;d>y;d--)m=d+s-1,p=d+r-1,m in b?b[p]=b[m]:delete b[p];for(d=0;d<r;d++)b[d+y]=arguments[d+2];return b.length=v-s+r,u}})},b226:function(e,t,r){"use strict";r("2a1a")},c4f55:function(e,t,r){"use strict";r("8c8f")}}]);