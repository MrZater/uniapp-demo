(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-375425a8"],{"008b":function(t,e,a){"use strict";a("f0e6")},"441c":function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"f",(function(){return u})),a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return c}));var n=a("b775");function r(t){return Object(n["a"])({url:"/plat/pager",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/plat/add",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/plat/update",method:"post",data:t})}function i(){return Object(n["a"])({url:"/plat/list",method:"get"})}function s(t){return Object(n["a"])({url:"/plat/accounts/"+t,method:"post"})}function c(t){return Object(n["a"])({url:"/plat/addDefinedPlat",method:"post",data:t})}},b4e2:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"batch-add-container"},[a("div",{staticClass:"header"},[a("span",{staticClass:"goback",on:{click:t.goback}},[a("i",{staticClass:"el-icon-back"},[t._v("返回")])]),a("h3",[t._v("批量导入代码位")])]),a("div",{staticClass:"content"},[a("div",{staticClass:"title"},[a("div",{staticClass:"title_app"},[a("div",{staticClass:"image"},[a("el-image",{attrs:{src:t.iconUrl?t.getCreativeUrl(t.iconUrl):"/images/app-none.png",fit:"fill"}})],1),a("div",{staticClass:"titlebox"},[a("p",{staticClass:"name"},[a("span",{staticClass:"label"},[a("svg-icon",{attrs:{"icon-class":1===t.os?"android":0===t.os?"ios":""}}),t._v(t._s(t.appName))],1)]),a("p",{staticClass:"id"},[a("span",{staticClass:"label"}),t._v(t._s(t.appId)+" ")])])]),a("div",{staticClass:"title_place"},[a("div",{staticClass:"titlebox"},[a("p",{staticClass:"name"},[a("span",{staticClass:"label"},[t._v(t._s(t.placeName))])]),a("p",{staticClass:"id"},[a("span",{staticClass:"label"},[t._v(t._s(t.placeId))])])])]),a("div",{staticClass:"title_position"},[a("div",{staticClass:"titlebox"},[a("p",{staticClass:"name position"},[a("span",{staticClass:"label"},[t._v(t._s(t.positionName))])])])])]),t.appId?a("div",{staticClass:"platform"},[a("div",{staticClass:"label"},[t._v(" 广告源： ")]),a("div",{staticClass:"platformbox"},[a("AppPlatform",{staticClass:"appplatform",attrs:{"is-batch":!0,"app-id":t.appId,"linked-show":!1,active:null,disabled:!1,"is-edit":!1},on:{getplatrow:t.getplatrow}})],1)]):t._e()]),a("div",{staticClass:"export_btn"},[a("el-form",{ref:"form",attrs:{model:t.query,"label-width":"120px","label-position":"left",rules:t.rules}},[t.platName?a("el-form-item",{attrs:{label:"下载模板"}},[a("div",{staticClass:"download_btn"},[a("el-button",{attrs:{loading:t.downLoading,size:"small",type:"primary"},on:{click:t.handleDownload}},[t._v(" 下载【"+t._s(t.platName)+"】模板 ")])],1)]):t._e(),a("el-form-item",{attrs:{label:"文件上传",prop:"fileList"}},[a("el-upload",{ref:"upload",attrs:{accept:".xlsx",action:"","with-credentials":!0,"http-request":t.httpRequest,"on-change":t.uploadFile,"on-remove":t.removeFile,"file-list":t.query.fileList,"auto-upload":!1,limit:1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"success"},slot:"trigger"},[t._v(" 选取文件 ")]),a("div",{staticClass:"el-upload__tip",staticStyle:{display:"inline-block","margin-left":"20px"},attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传xlsx格式的 excel文件 ")])],1)],1)],1)],1),a("div",{staticClass:"submit_btn"},[a("el-button",{attrs:{type:"primary",disabled:0==t.query.fileList.length},on:{click:t.handleSubmit}},[t._v(" 提交 ")])],1)])},r=[],o=a("1da1"),u=(a("96cf"),a("b0c0"),a("e9c4"),a("1dc2")),i=a("f4f7"),s=a("441c"),c=a("fcc1"),d=a("b775"),p={name:"BatchAdd",components:{AppPlatform:u["a"]},data:function(){return{query:{fileList:[]},appId:"",appName:"",placeId:"",placeName:"",positionId:"",positionName:"",iconUrl:"",os:"",settleType:"",platName:"",platId:"",testId:"",groupId:"",editplatquery:{platAccountId:"",platId:"",platAppId:"",appKey:"",appId:"",id:"",accessType:""},rules:{fileList:[{required:!0,message:"请上传文件"}]},downLoading:!1}},computed:{},mounted:function(){this.$route.query&&(this.appId=this.$route.query.appId?this.$route.query.appId:"",this.placeId=this.$route.query.placeId?this.$route.query.placeId:"",this.groupId=this.$route.query.groupId?this.$route.query.groupId:"",this.testId=this.$route.query.testId?this.$route.query.testId:""),this.getAppInfoById()},methods:{getAccounts:function(t){var e=this;Object(s["c"])(t).then((function(t){e.accounts=t.data}))},getAppInfoById:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["t"])({id:t.appId,placeId:t.placeId});case 2:a=e.sent,t.appName=a.data[0]?a.data[0].name:"",t.placeName=a.data[0]?a.data[0].placeName:"",t.positionId=a.data[0]?a.data[0].position:"",t.positionName=a.data[0]?a.data[0].positionName:"",t.iconUrl=a.data[0]?a.data[0].iconUrl:"",t.os=a.data[0]?a.data[0].os:"";case 9:case"end":return e.stop()}}),e)})))()},getCreativeUrl:function(t){return t?this.$store.getters.resourceUrl+t:null},getplatrow:function(t){this.getAccounts(t.id),this.platId=t.id,this.platName=t.name,this.settleType=t.settleType,this.editplatquery={name:t.name,appId:this.appId,platAccountId:t.platAccountId,platId:t.id,platAppId:t.platAppId,appKey:t.appKey,accessType:t.accessType}},goback:function(){this.$router.push({path:"/traffic/aggregate",query:{appId:this.appId,placeId:this.placeId}})},handleDownload:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.downLoading=!0,e.prev=1,e.next=4,t.exportToExcel();case 4:return a=e.sent,e.next=7,Object(c["a"])(a,"【".concat(t.platName,"】代码位模板.xlsx"));case 7:t.downLoading=!1,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.downLoading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},exportToExcel:function(){return d["a"].post("/aggregate/downloadAdsourceTemplate",{platId:this.platId},{responseType:"blob"})},uploadFile:function(t){this.query.fileList=[],this.query.fileList[0]=t},removeFile:function(t){this.query.fileList=[]},httpRequest:function(t){var e=this,a=t.file,n=new FormData;n.append("file",a);var r={placeId:this.placeId,platId:this.platId,groupId:this.groupId,testId:this.testId};n.append("parameter",JSON.stringify(r));var o="/aggregate/bulkImportAdsource",u={headers:{"Content-Type":"multipart/form-data"}};d["a"].post(o,n,u).then((function(t){200==t.code&&(e.$message.success("导入成功！"),e.goback())}))},handleSubmit:function(){var t=this;this.platId||this.$message.error("请选择广告源！"),this.$refs.form.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:t.$refs.upload.submit();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},l=p,f=(a("008b"),a("2877")),m=Object(f["a"])(l,n,r,!1,null,"7262d7da",null);e["default"]=m.exports},b562:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"f",(function(){return u})),a.d(e,"a",(function(){return i})),a.d(e,"k",(function(){return s})),a.d(e,"j",(function(){return c})),a.d(e,"b",(function(){return d})),a.d(e,"d",(function(){return p})),a.d(e,"i",(function(){return l})),a.d(e,"h",(function(){return f})),a.d(e,"g",(function(){return m}));var n=a("b775");function r(){return Object(n["a"])({url:"/app/list",method:"get"})}function o(t){return Object(n["a"])({url:"/app/getAppListByRole",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/app/pager",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/app/add",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/app/update",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/aggregate/platformList/"+t,method:"post"})}function d(t){return Object(n["a"])({url:"/dashboard/getAdminAndAppListByBusinessId",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/dashboard/getAppListByAdminId",method:"post",data:t})}function l(){return Object(n["a"])({url:"/user/adminList",method:"get"})}function f(){return Object(n["a"])({url:"/app/getMediaAppList",method:"get"})}function m(t){return Object(n["a"])({url:"/app/getApplistByUserIdAndOs",method:"post",data:t})}},f0e6:function(t,e,a){},f4f7:function(t,e,a){"use strict";a.d(e,"v",(function(){return r})),a.d(e,"w",(function(){return o})),a.d(e,"x",(function(){return u})),a.d(e,"E",(function(){return i})),a.d(e,"D",(function(){return s})),a.d(e,"c",(function(){return c})),a.d(e,"F",(function(){return d})),a.d(e,"b",(function(){return p})),a.d(e,"o",(function(){return l})),a.d(e,"n",(function(){return f})),a.d(e,"m",(function(){return m})),a.d(e,"e",(function(){return g})),a.d(e,"p",(function(){return h})),a.d(e,"f",(function(){return b})),a.d(e,"g",(function(){return v})),a.d(e,"y",(function(){return I})),a.d(e,"u",(function(){return O})),a.d(e,"k",(function(){return j})),a.d(e,"a",(function(){return y})),a.d(e,"q",(function(){return w})),a.d(e,"C",(function(){return C})),a.d(e,"B",(function(){return _})),a.d(e,"A",(function(){return x})),a.d(e,"z",(function(){return A})),a.d(e,"l",(function(){return L})),a.d(e,"t",(function(){return k})),a.d(e,"h",(function(){return q})),a.d(e,"j",(function(){return N})),a.d(e,"i",(function(){return R})),a.d(e,"s",(function(){return T})),a.d(e,"r",(function(){return $})),a.d(e,"d",(function(){return U}));var n=a("b775");function r(t){return Object(n["a"])({url:"/aggregate/group",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/aggregate/source",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/aggregate/changePriority",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/aggregate/updateSource",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/aggregate/updateSource",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/aggregate/addSource",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/aggregate/updateSource",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/aggregate/addGroup",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/aggregate/updateGroup",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/aggregate",method:"Delete",params:t})}function m(t){return Object(n["a"])({url:"/aggregate/deleteGroupById",method:"Delete",params:t})}function g(t){return Object(n["a"])({url:"/aggregate/templateList",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/aggregate/updateImpress",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/place/timeInfo",method:"post",data:t})}function v(t){return Object(n["a"])({url:"/place/updateTimeInfo",method:"post",data:t})}function I(){return Object(n["a"])({url:"/aggregate/templateTypeList",method:"get"})}function O(){return Object(n["a"])({url:"/common/area_list",method:"get"})}function j(){return Object(n["a"])({url:"/common/brandList",method:"get"})}function y(t){return Object(n["a"])({url:"/abtest/add",method:"post",data:t})}function w(t){return Object(n["a"])({url:"/abtest/abtest_list",method:"post",data:t})}function C(t){return Object(n["a"])({url:"/abtest/update",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/abtest/shutdownTest",method:"post",data:t})}function x(t){return Object(n["a"])({url:"/abtest/update_args",method:"post",data:t})}function A(){return Object(n["a"])({url:"/creative/template_list",method:"get"})}function L(t){return Object(n["a"])({url:"/aggregate/checkPlatPlaceId",method:"post",data:t})}function k(t){return Object(n["a"])({url:"/app/getAppById",method:"post",data:t})}function q(t){return Object(n["a"])({url:"/aggregate/batchAddSource",method:"post",data:t})}function N(t){return Object(n["a"])({url:"/aggregate/batchUpdateSourceSts",method:"post",data:t})}function R(t){return Object(n["a"])({url:"/aggregate/batchReplicationConfig",method:"post",data:t})}function T(t){return Object(n["a"])({url:"/abtest/getAbTestReport",method:"post",data:t})}function $(t){return Object(n["a"])({url:"/abtest/getAbTestEchartsReport",method:"post",data:t})}function U(t){return Object(n["a"])({url:"/aggregate/adsourceAdvancedSetup",method:"post",data:t})}},fcc1:function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var n=a("1da1"),r=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("4de4"),a("ac1f"),a("1276"),a("00b4"),a("5319"),a("4d63"),a("2c3e"),a("25f0"),a("b0c0"),a("5f72"));var o=function(t){var e=new FileReader;return new Promise((function(a,n){e.onload=function(t){a(e.result)},e.readAsText(t,"utf-8")}))};function u(t){return i.apply(this,arguments)}function i(){return i=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,n,u,i,s,c,d=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=d.length>1&&void 0!==d[1]?d[1]:"未命名.xls",t.next=3,o(e);case 3:n=t.sent;try{u=JSON.parse(n),i=u.rspMsg||u.msg,r["Notification"].warning({title:"提示",message:i+""})}catch(p){s=window.URL.createObjectURL(e),c=document.createElement("a"),c.download=a,c.href=s,c.click(),URL.revokeObjectURL(s)}case 5:case"end":return t.stop()}}),t)}))),i.apply(this,arguments)}}}]);